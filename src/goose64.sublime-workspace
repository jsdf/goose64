{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"total",
				"totalUpdates\tabc"
			],
			[
				"ed64io",
				"ed64io.h\t(main.c)"
			],
			[
				"seq",
				"seqPlaying\tabc"
			],
			[
				"Honk",
				"Honk1Sound\tabc"
			],
			[
				"Hon",
				"Honk5Sound"
			],
			[
				"NON",
				"NoneSound\t(sound.h)"
			],
			[
				"ed",
				"ed64PrintfSync2\tabc"
			],
			[
				"end",
				"endif\t(Makefile)"
			],
			[
				"got",
				"gotFirstInterrupt\tabc"
			],
			[
				"LOG",
				"LOG_SAMPLING_PROFILE\tabc"
			],
			[
				"sampl",
				"sampling_profiler.h\t(stage00.c)"
			],
			[
				"thread",
				"threadToProfile\tabc"
			],
			[
				"MAX",
				"MAX_PROFILE_SIZE\tabc"
			],
			[
				"error",
				"errorDesc\tabc"
			],
			[
				"print",
				"printf\tprintf …"
			],
			[
				"ed64",
				"ed64Printf\t(constants.h)"
			],
			[
				"RENDERER",
				"RENDERER_PAINTERS_ALGORITHM\tabc"
			],
			[
				"RENDER",
				"RENDERER_FRUSTUM_CULLING\tabc"
			],
			[
				"Vec3d_",
				"Vec3d_set\t(vec3d.c)"
			],
			[
				"stage",
				"stage00\t(main.c)"
			],
			[
				"debug",
				"debugPrintf\tabc"
			],
			[
				"OS",
				"OSThread\tabc"
			],
			[
				"ed64Prin",
				"ed64PrintStackTrace\t(ed64io_fault.c)"
			],
			[
				"Render",
				"RendererSortDistance\tabc"
			],
			[
				"ModelTyp",
				"ModelTypeStrings\t(stage00.c)"
			],
			[
				"visi",
				"visibleObjectsCount\tabc"
			],
			[
				"zW",
				"zWriteObjectsCount\tabc"
			],
			[
				"Game",
				"GameObject\tabc"
			],
			[
				"Renderer",
				"Renderer_isZWriteGameObject\tabc"
			],
			[
				"Gam",
				"GameObject\tabc"
			],
			[
				"intersec",
				"intersect\t(collision.c)"
			],
			[
				"High",
				"HIGH_RESOLUTION_HALF_Y\tabc"
			],
			[
				"snd",
				"snd_no\tabc"
			],
			[
				"SCR",
				"SCREEN_HT\tabc"
			],
			[
				"SCRE",
				"SCREEN_Y\t(graphic.h)"
			],
			[
				"SCREE",
				"SCREEN_X\t(graphic.h)"
			],
			[
				"SC",
				"SCREEN_X\t(graphic.h)"
			],
			[
				"SCREN",
				"SCREEN_WD\tabc"
			],
			[
				"visib",
				"visibleObjDistance\tabc"
			],
			[
				"view",
				"viewport\tabc"
			],
			[
				"proj",
				"projection\tabc"
			],
			[
				"ti",
				"tick\t(player.c)"
			],
			[
				"NoneS",
				"NoneSprite\t(animation.c)"
			],
			[
				"Mtx",
				"MtxF\tabc"
			],
			[
				"Mt",
				"MtxF\tabc"
			],
			[
				"sprite",
				"spriteAttachment\t(animation.h)"
			],
			[
				"spr",
				"spriteAttachment\t(animation.h)"
			],
			[
				"spri",
				"spriteType\tabc"
			],
			[
				"Spr",
				"Sprite_honk1spr\t(honk1spr.h)"
			],
			[
				"n64",
				"n64audio.c\tabc"
			],
			[
				"inc",
				"inc\t#include \"…\""
			],
			[
				"E",
				"EXTERN_SEGMENT\tabc"
			],
			[
				"objTrans",
				"objTransforms\t(graphic.h)"
			],
			[
				"Garden",
				"GardenerCharacterModel\t(game.c)"
			],
			[
				"debu",
				"debugPrintf\tabc"
			],
			[
				"HIGH",
				"HIGH_RESOLUTION_OPTS\t(renderer.c)"
			],
			[
				"SCREEN",
				"SCREEN_WD\tabc"
			],
			[
				"Chara",
				"GardenerCharacterModel"
			],
			[
				"dis",
				"distance\t(renderer.c)"
			],
			[
				"ob",
				"obj\tabc"
			],
			[
				"Z",
				"ZBUFFER_ADDR\t(graphic.h)"
			],
			[
				"centr",
				"centroidOffset\tabc"
			],
			[
				"selec",
				"selectObjectAtScreenPos\tabc"
			],
			[
				"draw",
				"drawMarker\tabc"
			],
			[
				"las",
				"lastProjection\tabc"
			],
			[
				"enable",
				"enableLighting\tabc"
			],
			[
				"drawY",
				"drawRaycastLine\tabc"
			],
			[
				"Game_ge",
				"Game_getObjRadius\t(game.c)"
			],
			[
				"glPop",
				"glPopMatrix\tabc"
			],
			[
				"Vec",
				"Vec3d\tabc"
			],
			[
				"res",
				"result\tabc"
			],
			[
				"clo",
				"closestObjHit\tabc"
			],
			[
				"close",
				"closestObjHitDist\tabc"
			],
			[
				"Game_get",
				"Game_getIntersectingObjectID\t(glgoose.cpp)"
			],
			[
				"exi",
				"exitCode\tabc"
			],
			[
				"bone",
				"boneIndex\tabc"
			],
			[
				"bon",
				"boneIdx\tabc"
			],
			[
				"modeltype",
				"ModelTypeStrings"
			],
			[
				"flor",
				"floorHeight\tabc"
			],
			[
				"floor",
				"floorHeight\tabc"
			],
			[
				"Model",
				"ModelTypeStrings\tabc"
			],
			[
				"char",
				"characterrig\t(characterrig.h)"
			],
			[
				"character_anim",
				"character_anim_data\t(character_anim.h)"
			],
			[
				"Anim",
				"AnimationFrame\tabc"
			],
			[
				"MAXME",
				"MAX_ANIM_MESH_PARTS\t(animation.h)"
			],
			[
				"chrac",
				"characterhand_r_characterhand_rmesh\t(character_anim.h)"
			],
			[
				"mesh",
				"meshPart\tabc"
			],
			[
				"anims",
				"animStateInt\tabc"
			],
			[
				"blen",
				"blender_bone_name\tabc"
			],
			[
				"GOOSE",
				"GOOSE_WALK_SPEED_RATIO\tabc"
			],
			[
				"Character_ang",
				"Character_topDownAngleMagToObj\tabc"
			],
			[
				"pos",
				"position\tabc"
			],
			[
				"angle",
				"angleToPlayer\tabc"
			],
			[
				"glp",
				"glPopAttrib\tabc"
			],
			[
				"Bu",
				"BushModel\tabc"
			],
			[
				"_",
				"__N64__\tabc"
			],
			[
				"phs",
				"physBody\t(player.c)"
			],
			[
				"USE",
				"USE_PHYSICS_MOVEMENT\t(player.c)"
			],
			[
				"Phys",
				"PhysBody\tabc"
			],
			[
				"pla",
				"playerMovementScaled\tabc"
			],
			[
				"phy",
				"physBody\tabc"
			],
			[
				"items",
				"itemsCount\tabc"
			],
			[
				"non",
				"nonIntegralVelocity\tabc"
			],
			[
				"ph",
				"physBody\tabc"
			],
			[
				"phys",
				"physicsBodies\tabc"
			],
			[
				"NUM_",
				"NUM_ITEMS\tabc"
			],
			[
				"CHARAtr",
				"NUM_CHARACTERS"
			],
			[
				"model",
				"modelType\tabc"
			],
			[
				"GAme",
				"GameObject\tabc"
			],
			[
				"Goose",
				"GooseModel\tabc"
			],
			[
				"mode",
				"modelTypesProperties\tabc"
			],
			[
				"zoom",
				"zoomIn\t(input.c)"
			],
			[
				"Mode",
				"ModelType\t(glgoose.cpp)"
			],
			[
				"rot",
				"rotation\tabc"
			],
			[
				"Eul",
				"EulerDegrees_origin\t(rotation.h)"
			],
			[
				"Euler",
				"EulerDegrees\tabc"
			],
			[
				"hel",
				"heldItem\tabc"
			],
			[
				"item",
				"itemHolder\tabc"
			],
			[
				"goose_",
				"goosehead_gooseheadmesh\t(glgoose.cpp)"
			],
			[
				"Obj",
				"ObjModel\tabc"
			],
			[
				"off",
				"offset\tabc"
			],
			[
				"animDa",
				"animDataNumBones\tabc"
			],
			[
				"animfra",
				"animFrameB\tabc"
			],
			[
				"rad",
				"radiansA\tabc"
			],
			[
				"EulerDeg",
				"EulerDegrees_fromEuler\t(rotation.h)"
			],
			[
				"degTo",
				"degToRad\t(constants.h)"
			],
			[
				"Eu",
				"EulerDegrees\tabc"
			],
			[
				"qu",
				"quaternionA\tabc"
			]
		]
	},
	"buffers":
	[
		{
			"file": "stage00.c",
			"settings":
			{
				"buffer_size": 42519,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					21,
					1,
					"clang_format",
					{
						"whole_buffer": true
					},
					"AQAAAAAAAAAAAAAAFqYAAAAAAAAfpgAALyoKICAgc3RhZ2UwMC5jCgogIHRoZSBtYWluIGdhbWUgZmlsZQoqLwoKI2luY2x1ZGUgPGFzc2VydC5oPgojaW5jbHVkZSA8bnVzeXMuaD4KLy8gI2luY2x1ZGUgPHN0ZGxpYi5oPgoKI2luY2x1ZGUgPG51YWxzdGxfbi5oPgoKI2luY2x1ZGUgPG1hbGxvYy5oPgojaW5jbHVkZSA8bWF0aC5oPgoKLy8gZ2FtZQojaW5jbHVkZSAiYW5pbWF0aW9uLmgiCiNpbmNsdWRlICJjb25zdGFudHMuaCIKI2luY2x1ZGUgImZydXN0dW0uaCIKI2luY2x1ZGUgImdhbWUuaCIKI2luY2x1ZGUgImdhbWVvYmplY3QuaCIKI2luY2x1ZGUgImdyYXBoaWMuaCIKI2luY2x1ZGUgImlucHV0LmgiCiNpbmNsdWRlICJtYWluLmgiCiNpbmNsdWRlICJtb2RlbHR5cGUuaCIKI2luY2x1ZGUgIm9wdGlvbi5oIgojaW5jbHVkZSAicGF0aGZpbmRpbmcuaCIKI2luY2x1ZGUgInBoeXNpY3MuaCIKI2luY2x1ZGUgInJlbmRlcmVyLmgiCiNpbmNsdWRlICJzb3VuZC5oIgojaW5jbHVkZSAic3ByaXRlLmgiCiNpbmNsdWRlICJ0cmFjZS5oIgojaW5jbHVkZSAidmVjMmQuaCIKI2luY2x1ZGUgInZlYzNkLmgiCgojaW5jbHVkZSAibW9kZWxzLmgiCiNpbmNsdWRlICJzZWdtZW50cy5oIgoKLy8gbWFwCiNpbmNsdWRlICJnYXJkZW5fbWFwLmgiCiNpbmNsdWRlICJnYXJkZW5fbWFwX2NvbGxpc2lvbi5oIgojaW5jbHVkZSAiZ2FyZGVuX21hcF9ncmFwaC5oIgovLyBhbmltIGRhdGEKI2luY2x1ZGUgImNoYXJhY3Rlcl9hbmltLmgiCiNpbmNsdWRlICJnb29zZV9hbmltLmgiCgojaW5jbHVkZSAiZWQ2NGlvLmgiCiAKI2RlZmluZSBMT0dfVFJBQ0VTIDAKI2RlZmluZSBMT0dfUFJPRklMSU5HIDEKCiNkZWZpbmUgQ09OVFJPTExFUl9ERUFEX1pPTkUgMC4xCiNkZWZpbmUgU09VTkRfVEVTVCAwCiNkZWZpbmUgRFJBV19TUFJJVEVTIDAKCnR5cGVkZWYgZW51bSBSZW5kZXJNb2RlIHsKICBUb29uRmxhdFNoYWRpbmdSZW5kZXJNb2RlLAogIFRleHR1cmVBbmRMaWdodGluZ1JlbmRlck1vZGUsCiAgVGV4dHVyZU5vTGlnaHRpbmdSZW5kZXJNb2RlLAogIE5vVGV4dHVyZU5vTGlnaHRpbmdSZW5kZXJNb2RlLAogIExpZ2h0aW5nTm9UZXh0dXJlUmVuZGVyTW9kZSwKICBXaXJlZnJhbWVSZW5kZXJNb2RlLAogIE1BWF9SRU5ERVJfTU9ERQp9IFJlbmRlck1vZGU7Cgp0eXBlZGVmIGVudW0gQ29uc29sZU1vZGUgewogIENPTlNPTEVfU0hPV19DQU1FUkEsCiAgQ09OU09MRV9TSE9XX0NQVV9QUk9GSUxJTkcsCiAgQ09OU09MRV9TSE9XX0NVTExJTkcsCiAgQ09OU09MRV9TSE9XX1BST0ZJTElORywKICBDT05TT0xFX1NIT1dfUkNQX1RBU0tTLAogIENPTlNPTEVfU0hPV19TT1VORCwKICBDT05TT0xFX1NIT1dfVFJBQ0lORywKICBDT05TT0xFX1NIT1dfRUQ2NExPR19JTlRFUk5BTFMsCiAgTUFYX0NPTlNPTEVfTU9ERQp9IENvbnNvbGVNb2RlOwoKc3RhdGljIGludCBjb25zb2xlU2hvd24gPSBUUlVFOwpzdGF0aWMgaW50IG51UGVyZkJhclNob3duID0gRkFMU0U7CnN0YXRpYyBDb25zb2xlTW9kZSBjb25zb2xlTW9kZSA9IENPTlNPTEVfU0hPV19QUk9GSUxJTkc7CgpzdGF0aWMgVmVjM2Qgdmlld1BvczsKc3RhdGljIFZlYzNkIHZpZXdSb3Q7CnN0YXRpYyBJbnB1dCBpbnB1dDsKCnN0YXRpYyB1MTYgcGVyc3BOb3JtOwpzdGF0aWMgdTMyIG5lYXJQbGFuZTsgLyogTmVhciBQbGFuZSAqLwpzdGF0aWMgdTMyIGZhclBsYW5lOyAgLyogRmFyIFBsYW5lICovCnN0YXRpYyBGcnVzdHVtIGZydXN0dW07CiNpZiBISUdIX1JFU09MVVRJT04gJiYgSElHSF9SRVNPTFVUSU9OX0hBTEZfWQpzdGF0aWMgZmxvYXQgYXNwZWN0ID0gKGYzMilTQ1JFRU5fV0QgLyAoZjMyKShTQ1JFRU5fSFQgKiAyKTsKI2Vsc2UKc3RhdGljIGZsb2F0IGFzcGVjdCA9IChmMzIpU0NSRUVOX1dEIC8gKGYzMilTQ1JFRU5fSFQ7CiNlbmRpZgpzdGF0aWMgZmxvYXQgZm92eSA9IERFRkFVTFRfRk9WWTsKc3RhdGljIFZlYzNkIHVwVmVjdG9yID0gezAuMGYsIDEuMGYsIDAuMGZ9OwoKLyogZnJhbWUgY291bnRlciAqLwpmbG9hdCBmcmFtZUNvdW50ZXJMYXN0VGltZTsKaW50IGZyYW1lQ291bnRlckN1ckZyYW1lczsKaW50IGZyYW1lQ291bnRlckxhc3RGcmFtZXM7CgovKiBwcm9maWxpbmcgKi8KaW50IHRvdGFsVXBkYXRlczsKZmxvYXQgcHJvZkF2Z0NoYXJhY3RlcnM7CmZsb2F0IHByb2ZBdmdQaHlzaWNzOwpmbG9hdCBwcm9mQXZnRHJhdzsKZmxvYXQgcHJvZkF2Z1BhdGg7CmZsb2F0IGxhc3RGcmFtZVRpbWU7CmZsb2F0IHByb2ZpbGluZ0F2ZXJhZ2VzW01BWF9UUkFDRV9FVkVOVF9UWVBFXTsKCnN0YXRpYyBpbnQgb2JqZWN0c0N1bGxlZDsKCnN0YXRpYyBpbnQgdXNiRW5hYmxlZDsKc3RhdGljIGludCB1c2JSZXN1bHQ7CnN0YXRpYyBVc2JMb2dnZXJTdGF0ZSB1c2JMb2dnZXJTdGF0ZTsKCnN0YXRpYyBpbnQgbG9nVHJhY2VTdGFydE9mZnNldCA9IDA7CnN0YXRpYyBpbnQgbG9nZ2luZ1RyYWNlID0gRkFMU0U7CgpzdGF0aWMgaW50IHR3b0N5Y2xlTW9kZTsKc3RhdGljIFJlbmRlck1vZGUgcmVuZGVyTW9kZVNldHRpbmc7ClBoeXNXb3JsZERhdGEgcGh5c1dvcmxkRGF0YTsKCnZvaWQgZHJhd1dvcmxkT2JqZWN0cyhEeW5hbWljKiBkeW5hbWljcCk7CnZvaWQgc291bmRDaGVjayh2b2lkKTsKdm9pZCBSb20yUmFtKHZvaWQqLCB2b2lkKiwgczMyKTsKaW50IHNjcmVlblByb2plY3QoVmVjM2QqIG9iaiwKICAgICAgICAgICAgICAgICAgTXR4RiBtb2RlbE1hdHJpeCwKICAgICAgICAgICAgICAgICAgTXR4RiBwcm9qTWF0cml4LAogICAgICAgICAgICAgICAgICBWaWV3cG9ydEYgdmlld3BvcnQsCiAgICAgICAgICAgICAgICAgIFZlYzNkKiB3aW4pOwp2b2lkIGRyYXdTcHJpdGUodW5zaWduZWQgc2hvcnQqIHNwckRhdGEsCiAgICAgICAgICAgICAgICBpbnQgc3ByV2lkdGgsCiAgICAgICAgICAgICAgICBpbnQgc3BySGVpZ2h0LAogICAgICAgICAgICAgICAgaW50IHgsCiAgICAgICAgICAgICAgICBpbnQgeSwKICAgICAgICAgICAgICAgIGludCB3aWR0aCwKICAgICAgICAgICAgICAgIGludCBoZWlnaHQsCiAgICAgICAgICAgICAgICBpbnQgY2VudGVyZWQpOwoKI2RlZmluZSBPQkpfU1RBUlRfVkFMIDEwMDAKCkxpZ2h0czEgc3VuX2xpZ2h0ID0gZ2RTUERlZkxpZ2h0czEoMTIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMjAsIC8qIHdlYWsgYW1iaWVudCBsaWdodCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDI1NSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyNTUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjU1LCAvKiB3aGl0ZSBsaWdodCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDApOwoKTGlnaHRzMCBhbWJfbGlnaHQgPSBnZFNQRGVmTGlnaHRzMCgyMDAsIDIwMCwgMjAwIC8qICBhbWJpZW50IGxpZ2h0ICovKTsKCnN0YXRpYyBtdXNIYW5kbGUgc25kSGFuZGxlID0gMDsKc3RhdGljIG11c0hhbmRsZSBzZXFIYW5kbGUgPSAwOwpzdGF0aWMgZmxvYXQgc25kUGl0Y2ggPSAxMC41OyAgLy8gaSBkb24ndCBmdWNraW5nIGtub3cgOigoCnN0YXRpYyBpbnQgc25kTnVtYmVyID0gMDsKc3RhdGljIGludCBob25rU291bmRSYW5nZSA9IEhvbms1U291bmQgLSBIb25rMVNvdW5kOwpzdGF0aWMgaW50IHNlcVBsYXlpbmcgPSBGQUxTRTsKCi8qIFRoZSBpbml0aWFsaXphdGlvbiBvZiBzdGFnZSAwICovCnZvaWQgaW5pdFN0YWdlMDAoKSB7CiAgR2FtZSogZ2FtZTsKICBpbnQgaTsKCiAgLy8gbG9hZCBpbiB0aGUgbW9kZWxzIHNlZ21lbnQgaW50byBoaWdoZXIgbWVtb3J5CiAgUm9tMlJhbShfbW9kZWxzU2VnbWVudFJvbVN0YXJ0LCBfbW9kZWxzU2VnbWVudFN0YXJ0LAogICAgICAgICAgX21vZGVsc1NlZ21lbnRSb21FbmQgLSBfbW9kZWxzU2VnbWVudFJvbVN0YXJ0KTsKICAvLyBsb2FkIGluIHRoZSBzcHJpdGVzIHNlZ21lbnQgaW50byBoaWdoZXIgbWVtb3J5CiAgUm9tMlJhbShfc3ByaXRlc1NlZ21lbnRSb21TdGFydCwgX3Nwcml0ZXNTZWdtZW50U3RhcnQsCiAgICAgICAgICBfc3ByaXRlc1NlZ21lbnRSb21FbmQgLSBfc3ByaXRlc1NlZ21lbnRSb21TdGFydCk7CiAgLy8gbG9hZCBpbiB0aGUgY29sbGlzaW9uIHNlZ21lbnQgaW50byBoaWdoZXIgbWVtb3J5CiAgUm9tMlJhbShfY29sbGlzaW9uU2VnbWVudFJvbVN0YXJ0LCBfY29sbGlzaW9uU2VnbWVudFN0YXJ0LAogICAgICAgICAgX2NvbGxpc2lvblNlZ21lbnRSb21FbmQgLSBfY29sbGlzaW9uU2VnbWVudFJvbVN0YXJ0KTsKCiAgLyogUmVhZCBhbmQgcmVnaXN0ZXIgdGhlIHNhbXBsZSBiYW5rLiAqLwogIG51QXVTdGxQdHJCYW5rSW5pdChQQkFOS19FTkQgLSBQQkFOS19TVEFSVCk7CiAgbnVBdVN0bFB0ckJhbmtTZXQoKHU4KilQQkFOS19TVEFSVCwgUEJBTktfRU5EIC0gUEJBTktfU1RBUlQsCiAgICAgICAgICAgICAgICAgICAgKHU4KilXQkFOS19TVEFSVCk7CgogIC8qIFJlYWQgYW5kIHJlZ2lzdGVyIHRoZSBzb3VuZCBlZmZlY3RzLiAqLwogIG51QXVTdGxTbmRQbGF5ZXJEYXRhU2V0KCh1OCopU0ZYX1NUQVJULCBTRlhfRU5EIC0gU0ZYX1NUQVJUKTsKCiAgbnVBdVN0bFNlcVBsYXllckRhdGFTZXQoMCwgKHU4KilTT05HX1NUQVJULCBTT05HX0VORCAtIFNPTkdfU1RBUlQpOwoKICBkZWJ1Z1ByaW50ZlN5bmMoImF1ZGlvIGhlYXAgdXNlZD0lZCwgZnJlZT0lZFxuIiwgbnVBdVN0bEhlYXBHZXRVc2VkKCksCiAgICAgICAgICAgICAgICAgIG51QXVTdGxIZWFwR2V0RnJlZSgpKTsKCiAgcGh5c1dvcmxkRGF0YSA9IChQaHlzV29ybGREYXRhKXtnYXJkZW5fbWFwX2NvbGxpc2lvbl9jb2xsaXNpb25fbWVzaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdBUkRFTl9NQVBfQ09MTElTSU9OX0xFTkdUSCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZnYXJkZW5fbWFwX2NvbGxpc2lvbl9jb2xsaXNpb25fbWVzaF9oYXNoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypncmF2aXR5Ki8gLTkuOCAqIE42NF9TQ0FMRV9GQUNUT1IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKnZpc2Nvc2l0eSovIDAuMDUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKndhdGVySGVpZ2h0Ki8gV0FURVJfSEVJR0hUfTsKCiAgdXNiRW5hYmxlZCA9IFRSVUU7CiAgdXNiUmVzdWx0ID0gMDsKCiAgZnJhbWVDb3VudGVyTGFzdFRpbWUgPSAwOwogIGZyYW1lQ291bnRlckN1ckZyYW1lcyA9IDA7CiAgdG90YWxVcGRhdGVzID0gMDsKICBwcm9mQXZnQ2hhcmFjdGVycyA9IDA7CiAgcHJvZkF2Z1BoeXNpY3MgPSAwOwogIHByb2ZBdmdEcmF3ID0gMDsKICBwcm9mQXZnUGF0aCA9IDA7CgogIGxvZ2dpbmdUcmFjZSA9IEZBTFNFOwoKICB0d29DeWNsZU1vZGUgPSBGQUxTRTsKICByZW5kZXJNb2RlU2V0dGluZyA9IFRvb25GbGF0U2hhZGluZ1JlbmRlck1vZGU7CiAgbmVhclBsYW5lID0gREVGQVVMVF9ORUFSUExBTkU7CiAgZmFyUGxhbmUgPSBERUZBVUxUX0ZBUlBMQU5FOwogIFZlYzNkX2luaXQoJnZpZXdQb3MsIDAuMEYsIDAuMEYsIC00MDAuMEYpOwogIFZlYzNkX2luaXQoJnZpZXdSb3QsIDAuMEYsIDAuMEYsIDAuMEYpOwogIElucHV0X2luaXQoJmlucHV0KTsKCiAgR2FtZV9pbml0KGdhcmRlbl9tYXBfZGF0YSwgR0FSREVOX01BUF9DT1VOVCwgJnBoeXNXb3JsZERhdGEpOwoKICBpbnZhcmlhbnQoR0FSREVOX01BUF9DT1VOVCA8PSBNQVhfV09STERfT0JKRUNUUyk7CgogIGdhbWUgPSBHYW1lX2dldCgpOwoKICBnYW1lLT5wYXRoZmluZGluZ0dyYXBoID0gJmdhcmRlbl9tYXBfZ3JhcGg7CiAgZ2FtZS0+cGF0aGZpbmRpbmdTdGF0ZSA9ICZnYXJkZW5fbWFwX2dyYXBoX3BhdGhmaW5kaW5nX3N0YXRlOwoKICBsYXN0RnJhbWVUaW1lID0gQ1VSX1RJTUVfTVMoKTsKCiAgZm9yIChpID0gMDsgaSA8IE1BWF9UUkFDRV9FVkVOVF9UWVBFOyArK2kpIHsKICAgIHByb2ZpbGluZ0F2ZXJhZ2VzW2ldID0gMDsKICAgIHByb2ZpbGluZ0FjY3VtdWxhdGVkW2ldID0gMDsKICAgIHByb2ZpbGluZ0NvdW50c1tpXSA9IDA7CiAgfQoKI2lmZGVmIEVENjQKICAvLyBzdGFydCBhIHRocmVhZCB0byB3YXRjaCB0aGUgdG90YWxVcGRhdGVzIHZhbHVlCiAgLy8gaWYgaXQgZG9lc24ndCBjaGFuZ2UgZWFjaCBzZWNvbmQsIHdlJ3ZlIGNyYXNoZWQKICBlZDY0U3RhcnRXYXRjaGRvZ1RocmVhZCgmdG90YWxVcGRhdGVzLCAxMDAwKTsKCiAgZGVidWdQcmludGZTeW5jKCJnZXRNb2RlbERpc3BsYXlMaXN0IGF0ICVwXG4iLCBnZXRNb2RlbERpc3BsYXlMaXN0KTsKI2VuZGlmCgogIGRlYnVnUHJpbnRmKCJnb29kIG1vcm5pbmdcbiIpOyAKfQoKdm9pZCBkZWJ1Z1ByaW50VmVjM2QoaW50IHgsIGludCB5LCBjaGFyKiBsYWJlbCwgVmVjM2QqIHZlYykgewogIGNoYXIgY29uYnVmWzEwMF07CiAgbnVEZWJDb25UZXh0UG9zKDAsIHgsIHkpOwogIHNwcmludGYoY29uYnVmLCAiJXMgeyU1LjBmLCU1LjBmLCU1LjBmfSIsIGxhYmVsLCB2ZWMtPngsIHZlYy0+eSwgdmVjLT56KTsKICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7Cn0KCnZvaWQgZGVidWdQcmludEZsb2F0KGludCB4LCBpbnQgeSwgY2hhciogZm9ybWF0LCBmbG9hdCB2YWx1ZSkgewogIGNoYXIgY29uYnVmWzEwMF07CiAgbnVEZWJDb25UZXh0UG9zKDAsIHgsIHkpOwogIHNwcmludGYoY29uYnVmLCBmb3JtYXQsIHZhbHVlKTsKICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7Cn0KCiNpZmRlZiBOVV9ERUJVRwp2b2lkIHRyYWNlUkNQKCkgewogIGludCBpOwogIGZsb2F0IGxvbmdlc3RSRFBUYXNrVGltZSA9IDA7CiAgZmxvYXQgbG9uZ2VzdFJTUFRhc2tUaW1lID0gMDsKICAvLyBzNjQgcmV0cmFjZVRpbWU7CgogIC8vIHJldHJhY2VUaW1lID0gbnVEZWJUYXNrUGVyZlB0ci0+cmV0cmFjZVRpbWU7CiAgLy8gZGVidWdQcmludGYoInJ0PSVmICIsIHJldHJhY2VUaW1lIC8gKDEwMDAwMDAuMCkpOwogIGZvciAoaSA9IDA7IGkgPCBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrQ250OyBpKyspIHsKICAgIC8vIGRlYnVnUHJpbnRmKAogICAgLy8gICAgICJbdCVkOiBzdD0lZiByc3A9JWYscmRwPSVmXSAiLCBpLAogICAgLy8gICAgIChudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVtpXS5yc3BTdGFydCApIC8gMTAwMC4wLAogICAgLy8gICAgIChudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVtpXS5yc3BFbmQgLQogICAgLy8gICAgICBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVtpXS5yc3BTdGFydCkgLwogICAgLy8gICAgICAgICAxMDAwLjAsCiAgICAvLyAgICAgKG51RGViVGFza1BlcmZQdHItPmdmeFRhc2tUaW1lW2ldLnJkcEVuZCAtCiAgICAvLyAgICAgIG51RGViVGFza1BlcmZQdHItPmdmeFRhc2tUaW1lW2ldLnJzcFN0YXJ0KSAvCiAgICAvLyAgICAgICAgIDEwMDAuMCk7CgogICAgLy8gcHVsbGVkIG91dCB0byBhIHZhcmlhYmxlIHNvIHRoZSBtb2Rlcm4gY29tcGlsZXIgZG9lc24ndAogICAgLy8gZ2VuZXJhdGUgYnJva2VuIGNvZGUKICAgIE5VRGViVGFza1RpbWUgZ2Z4VGFza1RpbWUgPSBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVtpXTsKCiAgICBUcmFjZV9hZGRFdmVudChSU1BUYXNrVHJhY2VFdmVudCwgZ2Z4VGFza1RpbWUucnNwU3RhcnQgLyAxMDAwLjBmLAogICAgICAgICAgICAgICAgICAgZ2Z4VGFza1RpbWUucnNwRW5kIC8gMTAwMC4wZik7CgogICAgVHJhY2VfYWRkRXZlbnQoUkRQVGFza1RyYWNlRXZlbnQsIGdmeFRhc2tUaW1lLnJzcFN0YXJ0IC8gMTAwMC4wZiwKICAgICAgICAgICAgICAgICAgIGdmeFRhc2tUaW1lLnJkcEVuZCAvIDEwMDAuMGYpOwoKICAgIC8vIGxvbmdlc3RSRFBUYXNrVGltZSA9IE1BWChsb25nZXN0UkRQVGFza1RpbWUsICgoZ2Z4VGFza1RpbWUucnNwRW5kKSAvIDEwMDAuMGYgLQogICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnZnhUYXNrVGltZS5yZHBTdGFydCAvIDEwMDAuMGYpKSk7CiAgICBsb25nZXN0UkRQVGFza1RpbWUgPSBNQVgobG9uZ2VzdFJEUFRhc2tUaW1lLCAoKGdmeFRhc2tUaW1lLnJkcEVuZCkgLyAxMDAwLjBmIC0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZ2Z4VGFza1RpbWUucnNwRW5kIC8gMTAwMC4wZikpKTsKICAgIGxvbmdlc3RSU1BUYXNrVGltZSA9IE1BWChsb25nZXN0UlNQVGFza1RpbWUsICgoZ2Z4VGFza1RpbWUucnNwRW5kKSAvIDEwMDAuMGYgLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnZnhUYXNrVGltZS5yc3BTdGFydCAvIDEwMDAuMGYpKSk7CiAgfQogIC8vIGRlYnVnUHJpbnRmKCJcbiIpOwogIHByb2ZpbGluZ0FjY3VtdWxhdGVkW1JEUFRhc2tUcmFjZUV2ZW50XSArPSBsb25nZXN0UkRQVGFza1RpbWU7CiAgcHJvZmlsaW5nQ291bnRzW1JEUFRhc2tUcmFjZUV2ZW50XSsrOwogIHByb2ZpbGluZ0FjY3VtdWxhdGVkW1JTUFRhc2tUcmFjZUV2ZW50XSArPSBsb25nZXN0UlNQVGFza1RpbWU7CiAgcHJvZmlsaW5nQ291bnRzW1JTUFRhc2tUcmFjZUV2ZW50XSsrOwp9CiNlbmRpZgoKLyogTWFrZSB0aGUgZGlzcGxheSBsaXN0IGFuZCBhY3RpdmF0ZSB0aGUgdGFzayAqLwp2b2lkIG1ha2VETDAwKCkgewogIEdhbWUqIGdhbWU7CiAgRHluYW1pYyogZHluYW1pY3A7CiAgaW50IGNvbnNvbGVPZmZzZXQ7CiAgZmxvYXQgY3VyVGltZTsKICBpbnQgaTsKICBmbG9hdCBwcm9mU3RhcnREcmF3LCBwcm9mRW5kRHJhdywgcHJvZlN0YXJ0RGVidWdEcmF3OwojaWYgREVCVUcKICBjaGFyIGNvbmJ1ZlsxMDBdOwojZW5kaWYKCiAgZ2FtZSA9IEdhbWVfZ2V0KCk7CiAgY29uc29sZU9mZnNldCA9IDIwOwoKICBjdXJUaW1lID0gQ1VSX1RJTUVfTVMoKTsKICBmcmFtZUNvdW50ZXJDdXJGcmFtZXMrKzsKCiAgcHJvZlN0YXJ0RHJhdyA9IGN1clRpbWU7CgogIFRyYWNlX2FkZEV2ZW50KEZyYW1lVHJhY2VFdmVudCwgY3VyVGltZSwgY3VyVGltZSArIDE2KTsKCiAgaWYgKGN1clRpbWUgLSBmcmFtZUNvdW50ZXJMYXN0VGltZSA+PSAxMDAwLjApIHsKICAgIGZyYW1lQ291bnRlckxhc3RGcmFtZXMgPSBmcmFtZUNvdW50ZXJDdXJGcmFtZXM7CiAgICBmcmFtZUNvdW50ZXJDdXJGcmFtZXMgPSAwOwogICAgZnJhbWVDb3VudGVyTGFzdFRpbWUgKz0gMTAwMC4wOwogIH0KCiAgLyogU3BlY2lmeSB0aGUgZGlzcGxheSBsaXN0IGJ1ZmZlciAqLwogIGR5bmFtaWNwID0gJmdmeF9keW5hbWljW2dmeF9ndGFza19ub107CiAgZ2xpc3RwID0gJmdmeF9nbGlzdFtnZnhfZ3Rhc2tfbm9dWzBdOwoKICAvKiBJbml0aWFsaXplIFJDUCAqLwogIGdmeFJDUEluaXQoKTsKCi8qIENsZWFyIHRoZSBmcmFtZSBhbmQgWi1idWZmZXIgKi8KI2lmIFJFTkRFUkVSX0ZBS0VfR1JPVU5ECiAgZ2Z4Q2xlYXJDZmIoR1BBQ0tfUkdCQTU1NTEoMTEyLCAxNTgsIDEyMiwgMSkpOwojZWxzZQogIGdmeENsZWFyQ2ZiKEdQQUNLX1JHQkE1NTUxKDAsIDAsIDAsIDEpKTsKI2VuZGlmCgogIEZydXN0dW1fc2V0Q2FtSW50ZXJuYWxzKCZmcnVzdHVtLCBmb3Z5LCBhc3BlY3QsIG5lYXJQbGFuZSwgZmFyUGxhbmUpOwoKICAvKiBwcm9qZWN0aW9uLCB2aWV3aW5nLCBtb2RlbGluZyBtYXRyaXggc2V0ICovCiAgZ3VQZXJzcGVjdGl2ZSgmZHluYW1pY3AtPnByb2plY3Rpb24sICZwZXJzcE5vcm0sIGZvdnksIGFzcGVjdCwgbmVhclBsYW5lLAogICAgICAgICAgICAgICAgZmFyUGxhbmUsIDEuMCk7CiAgZ1NQUGVyc3BOb3JtYWxpemUoZ2xpc3RwKyssIHBlcnNwTm9ybSk7CgogIC8vIGdTUENsaXBSYXRpbyhnbGlzdHArKywgRlJVU1RSQVRJT180KTsKCiAgRnJ1c3R1bV9zZXRDYW1EZWYoJmZydXN0dW0sICZnYW1lLT52aWV3UG9zLCAmZ2FtZS0+dmlld1RhcmdldCwgJnVwVmVjdG9yKTsKCiAgaWYgKGdhbWUtPmZyZWVWaWV3KSB7CiAgICBndVBvc2l0aW9uKCZkeW5hbWljcC0+Y2FtZXJhLAogICAgICAgICAgICAgICB2aWV3Um90LngsICAvLyByb2xsCiAgICAgICAgICAgICAgIHZpZXdSb3QueSwgIC8vIHBpdGNoCiAgICAgICAgICAgICAgIHZpZXdSb3QueiwgIC8vIHlhdwogICAgICAgICAgICAgICAxLjBGLCAgICAgICAvLyBzY2FsZQogICAgICAgICAgICAgICB2aWV3UG9zLngsIHZpZXdQb3MueSwgdmlld1Bvcy56KTsKICB9IGVsc2UgewogICAgZ3VMb29rQXQoJmR5bmFtaWNwLT5jYW1lcmEsIGdhbWUtPnZpZXdQb3MueCwgZ2FtZS0+dmlld1Bvcy55LAogICAgICAgICAgICAgZ2FtZS0+dmlld1Bvcy56LCBnYW1lLT52aWV3VGFyZ2V0LngsIGdhbWUtPnZpZXdUYXJnZXQueSwKICAgICAgICAgICAgIGdhbWUtPnZpZXdUYXJnZXQueiwgdXBWZWN0b3IueCwgdXBWZWN0b3IueSwgdXBWZWN0b3Iueik7CiAgfQoKICBkcmF3V29ybGRPYmplY3RzKGR5bmFtaWNwKTsKCiAgZ0RQRnVsbFN5bmMoZ2xpc3RwKyspOwogIGdTUEVuZERpc3BsYXlMaXN0KGdsaXN0cCsrKTsKCiAgaW52YXJpYW50KChnbGlzdHAgLSBnZnhfZ2xpc3RbZ2Z4X2d0YXNrX25vXSkgPCBHRlhfR0xJU1RfTEVOKTsKCiAgLyogQWN0aXZhdGUgdGhlIHRhc2sgYW5kIChtYXliZSkKICAgICBzd2l0Y2ggZGlzcGxheSBidWZmZXJzICovCiAgbnVHZnhUYXNrU3RhcnQoCiAgICAgICZnZnhfZ2xpc3RbZ2Z4X2d0YXNrX25vXVswXSwKICAgICAgKHMzMikoZ2xpc3RwIC0gZ2Z4X2dsaXN0W2dmeF9ndGFza19ub10pICogc2l6ZW9mKEdmeCksCiAgICAgIHJlbmRlck1vZGVTZXR0aW5nID09IFdpcmVmcmFtZVJlbmRlck1vZGUKICAgICAgICAgID8gTlVfR0ZYX1VDT0RFX0wzREVYMgogICAgICAgICAgOiAgTlVfR0ZYX1VDT0RFX0YzREVYICwKICAgICAgLy8gc3dhcCBidWZmZXIgaWYgd2UgZG9uJ3QgYWxzbyBoYXZlIGFub3RoZXIgdGFzayB0byBzaG93IGRlYnVnIHN0dWZmCiAgICAgIGNvbnNvbGVTaG93biB8fCBudVBlcmZCYXJTaG93biA/IE5VX1NDX05PU1dBUEJVRkZFUiA6IE5VX1NDX1NXQVBCVUZGRVIpOwoKICAvKiBTd2l0Y2ggZGlzcGxheSBsaXN0IGJ1ZmZlcnMgKi8KICBnZnhfZ3Rhc2tfbm8gXj0gMTsKCiAgcHJvZkVuZERyYXcgPSBDVVJfVElNRV9NUygpOwogIFRyYWNlX2FkZEV2ZW50KERyYXdUcmFjZUV2ZW50LCBwcm9mU3RhcnREcmF3LCBwcm9mRW5kRHJhdyk7CiAgZ2FtZS0+cHJvZlRpbWVEcmF3ICs9IHByb2ZFbmREcmF3IC0gcHJvZlN0YXJ0RHJhdzsKCiAgcHJvZlN0YXJ0RGVidWdEcmF3ID0gQ1VSX1RJTUVfTVMoKTsKCiAgaWYgKG51UGVyZkJhclNob3duKQogICAgbnVEZWJUYXNrUGVyZkJhcjEoMSwgMjAwLCBOVV9TQ19TV0FQQlVGRkVSKTsKCi8vIGRlYnVnIHRleHQgb3ZlcmxheQojaWYgREVCVUcKICBpbnZhcmlhbnQoIShjb25zb2xlU2hvd24mJm51UGVyZkJhclNob3duKSk7CgogIGlmIChjb250UGF0dGVybiAmIDB4MSkgewogICAgbnVEZWJDb25DbGVhcigwKTsKICAgIGNvbnNvbGVPZmZzZXQgPSAyMTsKCiAgICBpZiAoZ2FtZS0+ZnJlZVZpZXcpIHsKICAgICAgZGVidWdQcmludFZlYzNkKDQsIGNvbnNvbGVPZmZzZXQrKywgInZpZXdQb3MiLCAmdmlld1Bvcyk7CiAgICB9IGVsc2UgewogICAgICBzd2l0Y2ggKGNvbnNvbGVNb2RlKSB7IAogICAgICAgIGNhc2UgQ09OU09MRV9TSE9XX0NQVV9QUk9GSUxJTkc6CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAiY2hhcj0lMy4yZm1zIiwgcHJvZkF2Z0NoYXJhY3RlcnMpOwogICAgICAgICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgInBoeXM9JTMuMmZtcyIsIHByb2ZBdmdQaHlzaWNzKTsKICAgICAgICAgIGRlYnVnUHJpbnRGbG9hdCg0LCBjb25zb2xlT2Zmc2V0KyssICJkcmF3PSUzLjJmbXMiLCBwcm9mQXZnRHJhdyk7CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoMCwgY29uc29sZU9mZnNldCsrLCAicGF0aD0lMy4yZm1zIiwgcHJvZkF2Z1BhdGgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfUFJPRklMSU5HOgogICAgICAgICAgbnVEZWJDb25UZXh0UG9zKDAsIDQsIGNvbnNvbGVPZmZzZXQrKyk7CiAgICAgICAgICBzcHJpbnRmKGNvbmJ1ZiwgImNwdT0lMy4yZixyc3A9JTMuMmYscmRwPSUzLjJmIiwKICAgICAgICAgICAgICAgICAgcHJvZmlsaW5nQXZlcmFnZXNbTWFpbkNQVVRyYWNlRXZlbnRdLAogICAgICAgICAgICAgICAgICBwcm9maWxpbmdBdmVyYWdlc1tSU1BUYXNrVHJhY2VFdmVudF0sCiAgICAgICAgICAgICAgICAgIHByb2ZpbGluZ0F2ZXJhZ2VzW1JEUFRhc2tUcmFjZUV2ZW50XSk7CiAgICAgICAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgIHNwcmludGYoY29uYnVmLCAiT3B0TWVzaFN1YmRpdj0lZCIsIG9wdGlvbnNbT3B0TWVzaFN1YmRpdl0pOwogICAgICAgICAgbnVEZWJDb25DUHV0cygwLCBjb25idWYpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfVFJBQ0lORzoKICAgICAgICAgIG51RGViQ29uVGV4dFBvcygwLCA0LCBjb25zb2xlT2Zmc2V0KyspOwogICAgICAgICAgc3ByaW50Zihjb25idWYsICJ0cmFjZSByZWM9JWQsbG9nPSVkLGV2cz0lZCxsZ2Q9JWQiLCBUcmFjZV9pc1RyYWNpbmcoKSwKICAgICAgICAgICAgICAgICAgbG9nZ2luZ1RyYWNlLCBUcmFjZV9nZXRFdmVudHNDb3VudCgpLCBsb2dUcmFjZVN0YXJ0T2Zmc2V0KTsKICAgICAgICAgIG51RGViQ29uQ1B1dHMoMCwgY29uYnVmKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ09OU09MRV9TSE9XX1JDUF9UQVNLUzoKI2lmZGVmIE5VX0RFQlVHCiAgICAgICAgICB7CiAgICAgICAgICAgIGludCB0c2tJZHg7CiAgICAgICAgICAgIGZvciAodHNrSWR4ID0gMDsgdHNrSWR4IDwgbnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza0NudDsgdHNrSWR4KyspIHsKICAgICAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgICAgICBzcHJpbnRmKGNvbmJ1ZiwgIlt0JWQ6ICByc3A9JS4yZixyZHA9JS4yZl0gIiwgdHNrSWR4LAogICAgICAgICAgICAgICAgICAgICAgKG51RGViVGFza1BlcmZQdHItPmdmeFRhc2tUaW1lW3Rza0lkeF0ucnNwRW5kIC0KICAgICAgICAgICAgICAgICAgICAgICBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVt0c2tJZHhdLnJzcFN0YXJ0KSAvCiAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwMC4wLAogICAgICAgICAgICAgICAgICAgICAgKG51RGViVGFza1BlcmZQdHItPmdmeFRhc2tUaW1lW3Rza0lkeF0ucmRwRW5kIC0KICAgICAgICAgICAgICAgICAgICAgICBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVt0c2tJZHhdLnJzcFN0YXJ0KSAvCiAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwMC4wKTsKICAgICAgICAgICAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KI2VuZGlmCiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIENPTlNPTEVfU0hPV19DVUxMSU5HOgogICAgICAgICAgbnVEZWJDb25UZXh0UG9zKDAsIDQsIGNvbnNvbGVPZmZzZXQrKyk7CiAgICAgICAgICBzcHJpbnRmKGNvbmJ1ZiwgImN1bGxlZD0lZCIsIG9iamVjdHNDdWxsZWQpOwogICAgICAgICAgbnVEZWJDb25DUHV0cygwLCBjb25idWYpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfQ0FNRVJBOgogICAgICAgICAgY29uc29sZU9mZnNldCA9IDE2OyAvLyBuZWVkcyBleHRyYSBzcGFjZQogICAgICAgICAgZGVidWdQcmludFZlYzNkKDQsIGNvbnNvbGVPZmZzZXQrKywgInZpZXdQb3MiLCAmZ2FtZS0+dmlld1Bvcyk7CiAgICAgICAgICBkZWJ1Z1ByaW50VmVjM2QoNCwgY29uc29sZU9mZnNldCsrLCAidmlld1RhcmdldCIsICZnYW1lLT52aWV3VGFyZ2V0KTsKICAgICAgICAgIGRlYnVnUHJpbnRGbG9hdCg0LCBjb25zb2xlT2Zmc2V0KyssICJ2aWV3Wm9vbT0lMS4xZiIsIGdhbWUtPnZpZXdab29tKTsKICAgICAgICAgIGRlYnVnUHJpbnRGbG9hdCg0LCBjb25zb2xlT2Zmc2V0KyssICJmb3Z5PSUzLjFmIiwgZm92eSk7CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAibmVhclBsYW5lPSUuMmYiLCBuZWFyUGxhbmUpOwogICAgICAgICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgImZhclBsYW5lPSUuMmYiLCBmYXJQbGFuZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfRUQ2NExPR19JTlRFUk5BTFM6CiNpZmRlZiBFRDY0CiAgICAgICAgICB1c2JMb2dnZXJHZXRTdGF0ZSgmdXNiTG9nZ2VyU3RhdGUpOwogICAgICAgICAgbnVEZWJDb25UZXh0UG9zKDAsIDQsIGNvbnNvbGVPZmZzZXQrKyk7CiAgICAgICAgICBzcHJpbnRmKGNvbmJ1ZiwgInVzYj0lZCxyZXM9JWQsc3Q9JWQsaWQ9JWQsbXFzej0lZCIsIHVzYkVuYWJsZWQsCiAgICAgICAgICAgICAgICAgIHVzYlJlc3VsdCwgdXNiTG9nZ2VyU3RhdGUuZmlmb1dyaXRlU3RhdGUsIHVzYkxvZ2dlclN0YXRlLm1zZ0lELAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS5tc2dRU2l6ZSk7CiAgICAgICAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgIHNwcmludGYoY29uYnVmLCAib2ZmPSU0ZCxmbHU9JWQsb3ZmPSVkLGRvbj0lZCxlcnI9JWQiLAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS51c2JMb2dnZXJPZmZzZXQsIHVzYkxvZ2dlclN0YXRlLnVzYkxvZ2dlckZsdXNoaW5nLAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS51c2JMb2dnZXJPdmVyZmxvdywgdXNiTG9nZ2VyU3RhdGUuY291bnREb25lLAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS53cml0ZUVycm9yKTsKICAgICAgICAgIG51RGViQ29uQ1B1dHMoMCwgY29uYnVmKTsKI2VuZGlmCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfU09VTkQ6CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAic25kPSUuMGYiLCBzbmROdW1iZXIpOwogICAgICAgICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgInBpdGNoPSVmIiwgc25kUGl0Y2gpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0gLy8gZW5kIHN3aXRjaAogICAgfSAvLyBlbmQgaWYgKGZyZWVWaWV3KQogICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgImZyYW1lPSUzLjJmbXMiLAogICAgICAgICAgICAgICAgICAgIDEwMDAuMCAvIGZyYW1lQ291bnRlckxhc3RGcmFtZXMpOwoKICAgIG51RGViQ29uVGV4dFBvcygwLCA0LCBjb25zb2xlT2Zmc2V0KyspOwogICAgc3ByaW50Zihjb25idWYsICJyZXRyYWNlPSVsdSIsIG51U2NSZXRyYWNlQ291bnRlcik7CiAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICBkZWJ1Z1ByaW50VmVjM2QoNCwgY29uc29sZU9mZnNldCsrLCAicG9zIiwgJmdhbWUtPnBsYXllci5nb29zZS0+cG9zaXRpb24pOwogIH0gZWxzZSB7CiAgICBudURlYkNvblRleHRQb3MoMCwgOSwgMjQpOwogICAgbnVEZWJDb25DUHV0cygwLCAiQ29udHJvbGxlcjEgbm90IGNvbm5lY3RlZCIpOwogIH0KCiAgLyogRGlzcGxheSBjaGFyYWN0ZXJzIG9uIHRoZSBmcmFtZSBidWZmZXIgKi8KICBudURlYkNvbkRpc3AoTlVfU0NfU1dBUEJVRkZFUik7CiNlbmRpZiAvLyBlbmQgb2YgI2lmIERFQlVHCgogIFRyYWNlX2FkZEV2ZW50KERlYnVnRHJhd1RyYWNlRXZlbnQsIHByb2ZTdGFydERlYnVnRHJhdywgQ1VSX1RJTUVfTVMoKSk7Cn0KCnZvaWQgY2hlY2tEZWJ1Z0NvbnRyb2xzKEdhbWUqIGdhbWUpIHsKICAvKiBDaGFuZ2UgdGhlIGRpc3BsYXkgcG9zaXRpb24gYnkgc3RpY2sgZGF0YSAqLwogIHZpZXdSb3QueCA9IGNvbnRkYXRhLT5zdGlja195OyAgLy8gcm90IGFyb3VuZCB4CiAgdmlld1JvdC55ID0gY29udGRhdGEtPnN0aWNrX3g7ICAvLyByb3QgYXJvdW5kIHkKCiAgLyogVGhlIHJldmVyc2Ugcm90YXRpb24gYnkgdGhlIEEgYnV0dG9uICovCiAgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBBX0JVVFRPTikgewogICAgdHdvQ3ljbGVNb2RlID0gIXR3b0N5Y2xlTW9kZTsKICB9CiAgLyogQ2hhbmdlIHRoZSBtb3Zpbmcgc3BlZWQgd2l0aCB1cC9kb3duIGJ1dHRvbnMgb2YgY29udHJvbGxlciAqLwogIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBVX0pQQUQpCiAgICB2aWV3UG9zLnogKz0gMTAuMDsKICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgRF9KUEFEKQogICAgdmlld1Bvcy56IC09IDEwLjA7CgogIGlmICh2aWV3UG9zLnogPCAoNjAwLjAgLSBmYXJQbGFuZSkpIHsKICAgIC8qIEl0IGNvbWVzIGJhY2sgbmVhciBpZiBpdCBnb2VzIHRvbyBmYXIgKi8KICAgIHZpZXdQb3MueiA9IDYwMC4wIC0gbmVhclBsYW5lOwogIH0gZWxzZSBpZiAodmlld1Bvcy56ID4gKDYwMC4wIC0gbmVhclBsYW5lKSkgewogICAgLyogSXQgZ29lcyBiYWNrIGZhciBpZiBpdCBjb21lcyB0b28gbmVhciAqLwogICAgdmlld1Bvcy56ID0gNjAwLjAgLSBmYXJQbGFuZTsKICB9CgogIC8qIDw8IFhZIGF4aXMgc2hpZnQgcHJvY2VzcyA+PiAqLwogIC8qIE1vdmUgbGVmdC9yaWdodCB3aXRoIGxlZnQvcmlnaHQgYnV0dG9ucyBvZiBjb250cm9sbGVyICovCiAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIExfSlBBRCkKICAgIHZpZXdQb3MueCAtPSAxLjA7CiAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIFJfSlBBRCkKICAgIHZpZXdQb3MueCArPSAxLjA7CiAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIFVfQ0JVVFRPTlMpCiAgICB2aWV3UG9zLnkgLT0gMzAuMDsKICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgRF9DQlVUVE9OUykKICAgIHZpZXdQb3MueSArPSAzMC4wOwogIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBMX0NCVVRUT05TKQogICAgdmlld1Bvcy54IC09IDMwLjA7CiAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIFJfQ0JVVFRPTlMpCiAgICB2aWV3UG9zLnggKz0gMzAuMDsKfQoKdm9pZCBsb2dUcmFjZUNodW5rKCkgewogIGludCBpOwogIGludCBwcmludGVkRmlyc3RJdGVtOwojaWYgRUQ2NAoKICBwcmludGVkRmlyc3RJdGVtID0gRkFMU0U7CiAgaWYgKHVzYkxvZ2dlckJ1ZmZlclJlbWFpbmluZygpIDwgMTIwKSB7CiAgICByZXR1cm47CiAgfQogIGRlYnVnUHJpbnRmKCJUUkFDRT1bIik7CiAgZm9yIChpID0gbG9nVHJhY2VTdGFydE9mZnNldDsgaSA8IFRyYWNlX2dldEV2ZW50c0NvdW50KCk7IGkrKykgewogICAgLy8gY2hlY2sgd2UgaGF2ZSByb29tIGZvciBtb3JlIGRhdGEKICAgIGlmICh1c2JMb2dnZXJCdWZmZXJSZW1haW5pbmcoKSA8IDQwKSB7CiAgICAgIGJyZWFrOwogICAgfQogICAgZGVidWdQcmludGYoIiVzWyUuMmYsJS4yZiwlZF0iLCBwcmludGVkRmlyc3RJdGVtID8gIiwiIDogIiIsCiAgICAgICAgICAgICAgICB0cmFjZUV2ZW50c1tpXS5zdGFydCwgdHJhY2VFdmVudHNbaV0uZW5kLCB0cmFjZUV2ZW50c1tpXS50eXBlKTsKICAgIHByaW50ZWRGaXJzdEl0ZW0gPSBUUlVFOwogICAgbG9nVHJhY2VTdGFydE9mZnNldCA9IGk7CiAgfQogIGRlYnVnUHJpbnRmKCJdXG4iKTsKCiAgaWYgKGxvZ1RyYWNlU3RhcnRPZmZzZXQgPT0gVHJhY2VfZ2V0RXZlbnRzQ291bnQoKSAtIDEpIHsKICAgIC8vIGZpbmlzaGVkCiAgICBsb2dnaW5nVHJhY2UgPSBGQUxTRTsKICAgIGxvZ1RyYWNlU3RhcnRPZmZzZXQgPSAwOwogICAgVHJhY2VfY2xlYXIoKTsKICB9CiNlbmRpZgp9Cgp2b2lkIHN0YXJ0UmVjb3JkaW5nVHJhY2UoKSB7CiAgVHJhY2VfY2xlYXIoKTsKICBUcmFjZV9zdGFydCgpOwp9Cgp2b2lkIGZpbmlzaFJlY29yZGluZ1RyYWNlKCkgewogIFRyYWNlX3N0b3AoKTsKICBsb2dnaW5nVHJhY2UgPSBUUlVFOwp9CgovKiBUaGUgZ2FtZSBwcm9ncmVzc2luZyBwcm9jZXNzIGZvciBzdGFnZSAwICovCnZvaWQgdXBkYXRlR2FtZTAwKHZvaWQpIHsKICBpbnQgaTsKICBHYW1lKiBnYW1lOwoKICB0b3RhbFVwZGF0ZXMrKzsKI2lmZGVmIE5VX0RFQlVHCiAgdHJhY2VSQ1AoKTsgIC8vIHJlY29yZCByY3AgcGVyZiBmcm9tIHByZXYgZnJhbWUKI2VuZGlmCgogIGdhbWUgPSBHYW1lX2dldCgpOwoKICBWZWMyZF9vcmlnaW4oJmlucHV0LmRpcmVjdGlvbik7CgogIC8qIERhdGEgcmVhZGluZyBvZiBjb250cm9sbGVyIDEgKi8KICBudUNvbnREYXRhR2V0RXgoY29udGRhdGEsIDApOwogIGlmIChjb250ZGF0YVswXS50cmlnZ2VyICYgU1RBUlRfQlVUVE9OKSB7CiAgICAvLyByZW5kZXJNb2RlU2V0dGluZysrOwogICAgLy8gaWYgKHJlbmRlck1vZGVTZXR0aW5nID49IE1BWF9SRU5ERVJfTU9ERSkgewogICAgLy8gICByZW5kZXJNb2RlU2V0dGluZyA9IDA7CiAgICAvLyB9CiAgICByZW5kZXJNb2RlU2V0dGluZyA9IHJlbmRlck1vZGVTZXR0aW5nID09IFRvb25GbGF0U2hhZGluZ1JlbmRlck1vZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gV2lyZWZyYW1lUmVuZGVyTW9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBUb29uRmxhdFNoYWRpbmdSZW5kZXJNb2RlOwogIH0KCiNpZiBTT1VORF9URVNUCiAgc291bmRDaGVjaygpOwojZW5kaWYKICBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIFpfVFJJRykgewogICAgZ2FtZS0+ZnJlZVZpZXcgPSAhZ2FtZS0+ZnJlZVZpZXc7CiAgfQogIGlmIChnYW1lLT5mcmVlVmlldykgewogICAgY2hlY2tEZWJ1Z0NvbnRyb2xzKGdhbWUpOwogIH0gZWxzZSB7CiAgICAvLyBub3JtYWwgY29udHJvbHMKICAgIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBBX0JVVFRPTikgewogICAgICBpbnB1dC5ydW4gPSBUUlVFOwogICAgfQogICAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIEJfQlVUVE9OKSB7CiAgICAgIGlucHV0LnBpY2t1cCA9IFRSVUU7CiAgICB9IAogICAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIExfVFJJRykgewogICAgICBpbnB1dC56b29tSW4gPSBUUlVFOwogICAgfQogICAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIFJfVFJJRykgewogICAgICBpbnB1dC56b29tT3V0ID0gVFJVRTsKICAgIH0KCiAgICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgTF9KUEFEKSB7CiAgICAgIGlmIChjb25zb2xlU2hvd24pIHsKICAgICAgICBjb25zb2xlTW9kZSAtPSAxOwogICAgICAgIGlmIChjb25zb2xlTW9kZSA8IDApIHsKICAgICAgICAgIGNvbnNvbGVNb2RlID0gTUFYX0NPTlNPTEVfTU9ERSAtIDE7CiAgICAgICAgICBjb25zb2xlU2hvd24gPSBGQUxTRTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZVNob3duID0gVFJVRTsKICAgICAgfQogICAgfQogICAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIFJfSlBBRCkgewogICAgICBpZiAoY29uc29sZVNob3duKSB7CiAgICAgICAgY29uc29sZU1vZGUgKz0gMTsKICAgICAgICBpZiAoY29uc29sZU1vZGUgPT0gTUFYX0NPTlNPTEVfTU9ERSkgewogICAgICAgICAgY29uc29sZU1vZGUgPSAwOwogICAgICAgICAgY29uc29sZVNob3duID0gRkFMU0U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGVTaG93biA9IFRSVUUKICAgICAgfQogICAgfQoKICAgIGlmIChjb250ZGF0YVswXS50cmlnZ2VyICYgRF9DQlVUVE9OUykgewogICAgICBvcHRpb25zW09wdE1lc2hTdWJkaXZdID0gIW9wdGlvbnNbT3B0TWVzaFN1YmRpdl07CiAgICB9CgojaWYgU09VTkRfVEVTVAogICAgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBMX0NCVVRUT05TKSB7CiAgICAgIC8vIFRPRE86IHRyaWdnZXIgdGhpcyBzb3VuZCBmcm9tIGluc2lkZSB0aGUgcGxheWVyIHN0YXRlIG1hY2hpbmUKICAgICAgc25kTnVtYmVyID0gUkFORChob25rU291bmRSYW5nZSkgKyBIb25rMVNvdW5kOwogICAgICAvLyB0aGlzIGN1dHMgb3V0IGFueSBwcmV2aW91cyBob25rCiAgICAgIC8vIFRPRE86IHByZXZlbnQgb3ZlcmxhcHBpbmcgaG9ua3M/CiAgICAgIGlmIChzbmRIYW5kbGUgIT0gMCkgewogICAgICAgIG51QXVTdGxTbmRQbGF5ZXJTbmRTdG9wKHNuZEhhbmRsZSwgMCk7CiAgICAgIH0KICAgICAgLy8gc25kUGl0Y2ggPSAxMC41OyAgLy8gaGFuZCB0dW5lZC4uLiB0aGUgc2FtcGxlIHR1bmluZyBpcyBmdWNrZWQKICAgICAgc25kUGl0Y2ggPSAwOwogICAgICBzbmRIYW5kbGUgPSBudUF1U3RsU25kUGxheWVyUGxheShzbmROdW1iZXIpOwogICAgICBudUF1U3RsU25kUGxheWVyU2V0U25kUGl0Y2goc25kSGFuZGxlLCBzbmRQaXRjaCk7CiAgICB9CgogICAgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBSX0NCVVRUT05TKSB7CiAgICAgIGlmIChzZXFQbGF5aW5nKSB7CiAgICAgICAgZGVidWdQcmludGYoInN0b3AgcGxheWluZyBzZXFcbiIpOwogICAgICAgIG51QXVTdGxTZXFQbGF5ZXJTdG9wKC8qZnJhbWVzIHVudGlsIHN0b3AqLyAwKTsKICAgICAgICBzZXFQbGF5aW5nID0gRkFMU0U7CiAgICAgICAgc2VxSGFuZGxlID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWJ1Z1ByaW50Zigic3RhcnQgcGxheWluZyBzZXFcbiIpOwogICAgICAgIHNlcUhhbmRsZSA9IG51QXVTdGxTZXFQbGF5ZXJQbGF5KC8qc2VxIHBsYXllciBudW0qLyBOVV9BVV9TRVFfUExBWUVSMCk7CiAgICAgICAgbnVBdVN0bFNlcVBsYXllclNldE1hc3RlclZvbCgvKm1heCovIDB4N2ZmZik7CiAgICAgICAgTXVzSGFuZGxlU2V0Vm9sdW1lKHNlcUhhbmRsZSwgLyogMjAwJSAqLyAweDEwMCk7CiAgICAgICAgc2VxUGxheWluZyA9IFRSVUU7CiAgICAgIH0KICAgIH0KI2VuZGlmCiAgCiAgICBpbnB1dC5kaXJlY3Rpb24ueCA9IC1jb250ZGF0YS0+c3RpY2tfeCAvIDYxLjBGOwogICAgaW5wdXQuZGlyZWN0aW9uLnkgPSBjb250ZGF0YS0+c3RpY2tfeSAvIDYzLjBGOwogICAgaWYgKGZhYnNmKGlucHV0LmRpcmVjdGlvbi54KSA8IENPTlRST0xMRVJfREVBRF9aT05FKQogICAgICBpbnB1dC5kaXJlY3Rpb24ueCA9IDA7CiAgICBpZiAoZmFic2YoaW5wdXQuZGlyZWN0aW9uLnkpIDwgQ09OVFJPTExFUl9ERUFEX1pPTkUpCiAgICAgIGlucHV0LmRpcmVjdGlvbi55ID0gMDsKICAgIGlmIChWZWMyZF9sZW5ndGgoJmlucHV0LmRpcmVjdGlvbikgPiAxLjBGKSB7CiAgICAgIFZlYzJkX25vcm1hbGlzZSgmaW5wdXQuZGlyZWN0aW9uKTsKICAgIH0KICB9CgoKICBHYW1lX3VwZGF0ZSgmaW5wdXQpOwoKICAjaWYgTE9HX1BST0ZJTElORwogICAgZGVidWdQcmludGYoImNwdT0lMy4yZixyc3A9JTMuMmYscmRwPSUzLjJmXG4iLAogICAgICAgICAgICAgICAgICAgIHByb2ZpbGluZ0F2ZXJhZ2VzW01haW5DUFVUcmFjZUV2ZW50XSwKICAgICAgICAgICAgICAgICAgICBwcm9maWxpbmdBdmVyYWdlc1tSU1BUYXNrVHJhY2VFdmVudF0sCiAgICAgICAgICAgICAgICAgICAgcHJvZmlsaW5nQXZlcmFnZXNbUkRQVGFza1RyYWNlRXZlbnRdKTsKICAjZW5kaWYKIAojaWYgTE9HX1RSQUNFUwogICAgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBVX0NCVVRUT05TKSB7CiAgICAgIGlmICghbG9nZ2luZ1RyYWNlKSB7CiAgICAgICAgaWYgKCFUcmFjZV9pc1RyYWNpbmcoKSkgewogICAgICAgICAgc3RhcnRSZWNvcmRpbmdUcmFjZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaW5pc2hSZWNvcmRpbmdUcmFjZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIGlmIChUcmFjZV9nZXRFdmVudHNDb3VudCgpID09IFRSQUNFX0VWRU5UX0JVRkZFUl9TSVpFKSB7CiAgICBmaW5pc2hSZWNvcmRpbmdUcmFjZSgpOwogIH0KI2VuZGlmCiAgaWYgKHVzYkVuYWJsZWQpIHsKI2lmIExPR19UUkFDRVMKICAgIGlmIChsb2dnaW5nVHJhY2UpIHsKICAgICAgbG9nVHJhY2VDaHVuaygpOwogICAgfQojZW5kaWYKICB9CgogIC8vIGlmICh0b3RhbFVwZGF0ZXMgJSA2MCA9PSAwKSB7CiAgLy8gICBkZWJ1Z1ByaW50ZlN5bmMoInJldHJhY2U9JWRcbiIsIG51U2NSZXRyYWNlQ291bnRlcik7CiAgLy8gfQoKICBpZiAodXNiRW5hYmxlZCkgewojaWYgTE9HX1RSQUNFUwogICAgaWYgKGxvZ2dpbmdUcmFjZSkgewogICAgICBsb2dUcmFjZUNodW5rKCk7CiAgICB9CiNlbmRpZgojaWZkZWYgRUQ2NAogICAgdXNiUmVzdWx0ID0gZWQ2NEFzeW5jTG9nZ2VyRmx1c2goKTsKI2VuZGlmCiAgfQoKICBpZiAodG90YWxVcGRhdGVzICUgNjAgPT0gMCkgewogICAgLy8gY2FsYyBhdmVyYWdlcyBmb3IgbGFzdCA2MCB1cGRhdGVzCiAgICBwcm9mQXZnQ2hhcmFjdGVycyA9IGdhbWUtPnByb2ZUaW1lQ2hhcmFjdGVycyAvIDYwOwogICAgZ2FtZS0+cHJvZlRpbWVDaGFyYWN0ZXJzID0gMC4wZjsKICAgIHByb2ZBdmdQaHlzaWNzID0gZ2FtZS0+cHJvZlRpbWVQaHlzaWNzIC8gNjA7CiAgICBnYW1lLT5wcm9mVGltZVBoeXNpY3MgPSAwLjBmOwogICAgcHJvZkF2Z0RyYXcgPSBnYW1lLT5wcm9mVGltZURyYXcgLyA2MDsKICAgIGdhbWUtPnByb2ZUaW1lRHJhdyA9IDAuMGY7CiAgICBwcm9mQXZnUGF0aCA9IGdhbWUtPnByb2ZUaW1lUGF0aCAvIDYwOwogICAgZ2FtZS0+cHJvZlRpbWVQYXRoID0gMC4wZjsKCiAgICBmb3IgKGkgPSAwOyBpIDwgTUFYX1RSQUNFX0VWRU5UX1RZUEU7ICsraSkgewogICAgICBwcm9maWxpbmdBdmVyYWdlc1tpXSA9CiAgICAgICAgICBwcm9maWxpbmdDb3VudHNbaV0gPT0gMAogICAgICAgICAgICAgID8gMAogICAgICAgICAgICAgIDogcHJvZmlsaW5nQWNjdW11bGF0ZWRbaV0gLyAoZmxvYXQpcHJvZmlsaW5nQ291bnRzW2ldOwogICAgICBwcm9maWxpbmdBY2N1bXVsYXRlZFtpXSA9IDA7CiAgICAgIHByb2ZpbGluZ0NvdW50c1tpXSA9IDA7CiAgICB9CiAgfQp9CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgVGhlIGNhbGwtYmFjayBmdW5jdGlvbgoKICBwZW5kaW5nR2Z4IHdoaWNoIGlzIHBhc3NlZCBmcm9tIE51c3lzdGVtIGFzIHRoZSBhcmd1bWVudCBvZiB0aGUgY2FsbC1iYWNrCiAgZnVuY3Rpb24gaXMgdGhlIHRvdGFsIG9mIFJDUCB0YXNrcyB0aGF0IGFyZSBjdXJyZW50bHkgcHJvY2Vzc2luZyBhbmQKICB3YWl0aW5nIGZvciB0aGUgcHJvY2Vzcy4KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwp2b2lkIHN0YWdlMDAoaW50IHBlbmRpbmdHZngpIHsKICBmbG9hdCBza2lwcGVkR2Z4VGltZSwgcHJvZlN0YXJ0VXBkYXRlLCBwcm9mU3RhcnRGcmFtZSwgcHJvZkVuZEZyYW1lOwogIC8vIGFuIGV4dHJhIHRhc2sgaXMgdXNlZCB0byBkcmF3IGRlYnVnIHN0dWZmCiAgaW50IGdmeFRhc2tzUGVyTWFrZURMID0gY29uc29sZVNob3duIHx8IG51UGVyZkJhclNob3duID8gMiA6IDE7CiAgcHJvZlN0YXJ0RnJhbWUgPSBDVVJfVElNRV9NUygpOwogIC8qIFByb3ZpZGUgdGhlIGRpc3BsYXkgcHJvY2VzcyBpZiBuIG9yIGxlc3MgUkNQIHRhc2tzIGFyZSBwcm9jZXNzaW5nIG9yCiAgICAgICAgd2FpdGluZyBmb3IgdGhlIHByb2Nlc3MuICAqLwogIGlmIChudVNjUmV0cmFjZUNvdW50ZXIgJSBGUkFNRV9TS0lQID09IDApIHsKICAgIGlmIChwZW5kaW5nR2Z4IDwgZ2Z4VGFza3NQZXJNYWtlREwgKiAyKSB7CiAgICAgIG1ha2VETDAwKCk7CiAgICAgIFRyYWNlX2FkZEV2ZW50KE1haW5NYWtlRGlzcGxheUxpc3RUcmFjZUV2ZW50LCBwcm9mU3RhcnRGcmFtZSwKICAgICAgICAgICAgICAgICAgICAgQ1VSX1RJTUVfTVMoKSk7CiAgICB9IGVsc2UgewogICAgICBza2lwcGVkR2Z4VGltZSA9IENVUl9USU1FX01TKCk7CiAgICAgIFRyYWNlX2FkZEV2ZW50KFNraXBwZWRHZnhUYXNrVHJhY2VFdmVudCwgc2tpcHBlZEdmeFRpbWUsCiAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRHZnhUaW1lICsgMTYuMGYpOwogICAgICBwcm9maWxpbmdDb3VudHNbU2tpcHBlZEdmeFRhc2tUcmFjZUV2ZW50XSsrOwogICAgICAvLyBkZWJ1Z1ByaW50ZlN5bmMoImRyb3BwZWQgZnJhbWUgJWRcbiIsIG51U2NSZXRyYWNlQ291bnRlciAvIEZSQU1FX1NLSVApOwogICAgfQogIH0KCiAgcHJvZlN0YXJ0VXBkYXRlID0gQ1VSX1RJTUVfTVMoKTsKICAvKiBUaGUgcHJvY2VzcyBvZiBnYW1lIHByb2dyZXNzICAqLwogIHVwZGF0ZUdhbWUwMCgpOwogIHByb2ZFbmRGcmFtZSA9IENVUl9USU1FX01TKCk7CiAgVHJhY2VfYWRkRXZlbnQoTWFpbkNQVVRyYWNlRXZlbnQsIHByb2ZTdGFydEZyYW1lLCBwcm9mRW5kRnJhbWUpOwogIFRyYWNlX2FkZEV2ZW50KE1haW5VcGRhdGVUcmFjZUV2ZW50LCBwcm9mU3RhcnRVcGRhdGUsIHByb2ZFbmRGcmFtZSk7CiAgcHJvZmlsaW5nQWNjdW11bGF0ZWRbTWFpbkNQVVRyYWNlRXZlbnRdICs9IHByb2ZFbmRGcmFtZSAtIHByb2ZTdGFydEZyYW1lOwogIHByb2ZpbGluZ0NvdW50c1tNYWluQ1BVVHJhY2VFdmVudF0rKzsKfQoKCnR5cGVkZWYgZW51bSBMaWdodGluZ1R5cGUgewogIFN1bkxpZ2h0aW5nLAogIE9ubHlBbWJpZW50TGlnaHRpbmcsCiAgTUFYX0xJR0hUSU5HX1RZUEUKfSBMaWdodGluZ1R5cGU7CgpMaWdodGluZ1R5cGUgZ2V0TGlnaHRpbmdUeXBlKEdhbWVPYmplY3QqIG9iaikgewogIHN3aXRjaCAob2JqLT5tb2RlbFR5cGUpIHsKICAgIGNhc2UgVW5pRmxvb3JNb2RlbDoKICAgICAgcmV0dXJuIE9ubHlBbWJpZW50TGlnaHRpbmc7CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gU3VuTGlnaHRpbmc7CiAgfQp9CgppbnQgZ2V0QW5pbWF0aW9uTnVtTW9kZWxNZXNoUGFydHMoTW9kZWxUeXBlIG1vZGVsVHlwZSkgewogIHN3aXRjaCAobW9kZWxUeXBlKSB7CiAgICBjYXNlIEdvb3NlTW9kZWw6CiAgICAgIHJldHVybiBNQVhfR09PU0VfTUVTSF9UWVBFOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIE1BWF9DSEFSQUNURVJfTUVTSF9UWVBFOwogIH0KfQoKaW50IHNob3VsZExlcnBBbmltYXRpb24oTW9kZWxUeXBlIG1vZGVsVHlwZSkgewogIHN3aXRjaCAobW9kZWxUeXBlKSB7CiAgICBjYXNlIEdvb3NlTW9kZWw6CiAgICAgIHJldHVybiBUUlVFOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIEZBTFNFOwogIH0KfQoKQW5pbWF0aW9uUmFuZ2UqIGdldEN1cnJlbnRBbmltYXRpb25SYW5nZShHYW1lT2JqZWN0KiBvYmopIHsKICBpZiAob2JqLT5tb2RlbFR5cGUgPT0gR29vc2VNb2RlbCkgewogICAgcmV0dXJuICZnb29zZV9hbmltX3Jhbmdlc1soR29vc2VBbmltVHlwZSlvYmotPmFuaW1TdGF0ZS0+c3RhdGVdOwogIH0gZWxzZSB7CiAgICByZXR1cm4gJmNoYXJhY3Rlcl9hbmltX3Jhbmdlc1soQ2hhcmFjdGVyQW5pbVR5cGUpb2JqLT5hbmltU3RhdGUtPnN0YXRlXTsKICB9Cn0KCkFuaW1hdGlvbkZyYW1lKiBnZXRBbmltRGF0YShNb2RlbFR5cGUgbW9kZWxUeXBlKSB7CiAgc3dpdGNoIChtb2RlbFR5cGUpIHsKICAgIGNhc2UgR29vc2VNb2RlbDoKICAgICAgcmV0dXJuIGdvb3NlX2FuaW1fZGF0YTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBjaGFyYWN0ZXJfYW5pbV9kYXRhOwogIH0KfQoKdm9pZCBkcmF3V29ybGRPYmplY3RzKER5bmFtaWMqIGR5bmFtaWNwKSB7CiAgR2FtZSogZ2FtZTsKICBHYW1lT2JqZWN0KiBvYmo7CiAgaW50IGksIHVzZVpCdWZmZXJpbmc7CiAgaW50IG1vZGVsTWVzaElkeDsKICBpbnQgbW9kZWxNZXNoUGFydHM7CiAgR2Z4KiBtb2RlbERpc3BsYXlMaXN0OwogIEFuaW1hdGlvbkZyYW1lIGFuaW1GcmFtZTsKICBBbmltYXRpb25JbnRlcnBvbGF0aW9uIGFuaW1JbnRlcnA7CiAgQW5pbWF0aW9uUmFuZ2UqIGN1ckFuaW1SYW5nZTsKICBBbmltYXRpb25Cb25lQXR0YWNobWVudCogYXR0YWNobWVudDsKICBSZW5kZXJlclNvcnREaXN0YW5jZSogdmlzaWJsZU9iakRpc3RhbmNlOwogIGludCogd29ybGRPYmplY3RzVmlzaWJpbGl0eTsKICBpbnQqIGludGVyc2VjdGluZ09iamVjdHM7CiAgaW50IHZpc2libGVPYmplY3RzQ291bnQ7CiAgaW50IHZpc2liaWxpdHlDdWxsZWQgPSAwOwogIGZsb2F0IHByb2ZTdGFydFNvcnQsIHByb2ZTdGFydEl0ZXIsIHByb2ZTdGFydEFuaW07CiAgLy8gZmxvYXQgcHJvZlN0YXJ0QW5pbUxlcnA7CiAgZmxvYXQgcHJvZlN0YXJ0RnJ1c3R1bTsKCiAgZ2FtZSA9IEdhbWVfZ2V0KCk7CiAgd29ybGRPYmplY3RzVmlzaWJpbGl0eSA9IChpbnQqKW1hbGxvYyhnYW1lLT53b3JsZE9iamVjdHNDb3VudCAqIHNpemVvZihpbnQpKTsKICBpbnZhcmlhbnQod29ybGRPYmplY3RzVmlzaWJpbGl0eSk7CgogIHByb2ZTdGFydEZydXN0dW0gPSBDVVJfVElNRV9NUygpOwogIHZpc2liaWxpdHlDdWxsZWQgPSBSZW5kZXJlcl9jdWxsVmlzaWJpbGl0eSgKICAgICAgZ2FtZS0+d29ybGRPYmplY3RzLCBnYW1lLT53b3JsZE9iamVjdHNDb3VudCwgd29ybGRPYmplY3RzVmlzaWJpbGl0eSwKICAgICAgJmZydXN0dW0sIGdhcmRlbl9tYXBfYm91bmRzKTsKICBvYmplY3RzQ3VsbGVkID0gdmlzaWJpbGl0eUN1bGxlZDsKCiAgVHJhY2VfYWRkRXZlbnQoRHJhd0ZydXN0dW1DdWxsVHJhY2VFdmVudCwgcHJvZlN0YXJ0RnJ1c3R1bSwgQ1VSX1RJTUVfTVMoKSk7CgogIC8vIG9ubHkgYWxsb2Mgc3BhY2UgZm9yIG51bSB2aXNpYmxlIG9iamVjdHMKICB2aXNpYmxlT2JqZWN0c0NvdW50ID0gZ2FtZS0+d29ybGRPYmplY3RzQ291bnQgLSB2aXNpYmlsaXR5Q3VsbGVkOwogIHZpc2libGVPYmpEaXN0YW5jZSA9IChSZW5kZXJlclNvcnREaXN0YW5jZSopbWFsbG9jKAogICAgICAodmlzaWJsZU9iamVjdHNDb3VudCkgKiBzaXplb2YoUmVuZGVyZXJTb3J0RGlzdGFuY2UpKTsKICBpbnZhcmlhbnQodmlzaWJsZU9iakRpc3RhbmNlKTsKCiAgcHJvZlN0YXJ0U29ydCA9IENVUl9USU1FX01TKCk7CiAgUmVuZGVyZXJfc29ydFZpc2libGVPYmplY3RzKGdhbWUtPndvcmxkT2JqZWN0cywgZ2FtZS0+d29ybGRPYmplY3RzQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkT2JqZWN0c1Zpc2liaWxpdHksIHZpc2libGVPYmplY3RzQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVPYmpEaXN0YW5jZSwgJmdhbWUtPnZpZXdQb3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcmRlbl9tYXBfYm91bmRzKTsKICBUcmFjZV9hZGRFdmVudChEcmF3U29ydFRyYWNlRXZlbnQsIHByb2ZTdGFydFNvcnQsIENVUl9USU1FX01TKCkpOwoKICAvLyBib29sZWFuIG9mIHdoZXRoZXIgYW4gb2JqZWN0IGludGVyc2VjdHMgYW5vdGhlciAoZm9yIHogYnVmZmVyCiAgLy8gb3B0aW1pemF0aW9uKQogIGludGVyc2VjdGluZ09iamVjdHMgPSAoaW50KiltYWxsb2MoKHZpc2libGVPYmplY3RzQ291bnQpICogc2l6ZW9mKGludCkpOwogIGludmFyaWFudChpbnRlcnNlY3RpbmdPYmplY3RzKTsKICBSZW5kZXJlcl9jYWxjSW50ZXJzZWN0aW5nKGludGVyc2VjdGluZ09iamVjdHMsIHZpc2libGVPYmplY3RzQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlT2JqRGlzdGFuY2UsIGdhcmRlbl9tYXBfYm91bmRzKTsKCiAgZ1NQQ2xlYXJHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIDB4RkZGRkZGRkYpOwogIGdEUFNldEN5Y2xlVHlwZShnbGlzdHArKywgdHdvQ3ljbGVNb2RlID8gR19DWUNfMkNZQ0xFIDogR19DWUNfMUNZQ0xFKTsKCiAgLy8gei1idWZmZXJlZCwgYW50aWFsaWFzZWQgdHJpYW5nbGVzCiAgLy8KI2lmICFSRU5ERVJFUl9QQUlOVEVSU19BTEdPUklUSE0KICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX0FBX1pCX09QQV9TVVJGLCBHX1JNX0FBX1pCX09QQV9TVVJGMik7CiAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX1pCVUZGRVIpOwojZW5kaWYKCiAgZ1NQU2V0TGlnaHRzMChnbGlzdHArKywgYW1iX2xpZ2h0KTsKCiAgLy8gc2V0dXAgdmlldwogIGdTUE1hdHJpeChnbGlzdHArKywgT1NfSzBfVE9fUEhZU0lDQUwoJihkeW5hbWljcC0+cHJvamVjdGlvbikpLAogICAgICAgICAgICBHX01UWF9QUk9KRUNUSU9OIHwgR19NVFhfTE9BRCB8IEdfTVRYX05PUFVTSCk7CiAgZ1NQTWF0cml4KGdsaXN0cCsrLCBPU19LMF9UT19QSFlTSUNBTCgmKGR5bmFtaWNwLT5jYW1lcmEpKSwKICAgICAgICAgICAgR19NVFhfTU9ERUxWSUVXIHwgR19NVFhfTE9BRCB8IEdfTVRYX05PUFVTSCk7CgogIHByb2ZTdGFydEl0ZXIgPSBDVVJfVElNRV9NUygpOwogIC8vIHJlbmRlciB3b3JsZCBvYmplY3RzCiAgZm9yIChpID0gMDsgaSA8IHZpc2libGVPYmplY3RzQ291bnQ7IGkrKykgewogICAgLy8gaXRlcmF0ZSB2aXNpYmxlIG9iamVjdHMgZmFyIHRvIG5lYXIKICAgIG9iaiA9ICh2aXNpYmxlT2JqRGlzdGFuY2UgKyBpKS0+b2JqOwoKICAgIC8vIHJlbmRlciB0ZXh0dXJlZCBtb2RlbHMKICAgIGdTUFRleHR1cmUoZ2xpc3RwKyssIDB4ODAwMCwgMHg4MDAwLCAwLCBHX1RYX1JFTkRFUlRJTEUsIEdfT04pOwogICAgZ0RQU2V0VGV4dHVyZUZpbHRlcihnbGlzdHArKywgR19URl9CSUxFUlApOwogICAgZ0RQU2V0VGV4dHVyZVBlcnNwKGdsaXN0cCsrLCBHX1RQX1BFUlNQKTsKCiAgICBzd2l0Y2ggKHJlbmRlck1vZGVTZXR0aW5nKSB7CiAgICAgIGNhc2UgVGV4dHVyZUFuZExpZ2h0aW5nUmVuZGVyTW9kZToKICAgICAgY2FzZSBMaWdodGluZ05vVGV4dHVyZVJlbmRlck1vZGU6CiAgICAgICAgaWYgKGdldExpZ2h0aW5nVHlwZShvYmopID09IE9ubHlBbWJpZW50TGlnaHRpbmcpIHsKICAgICAgICAgIGdTUFNldExpZ2h0czAoZ2xpc3RwKyssIGFtYl9saWdodCk7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnU1BTZXRMaWdodHMxKGdsaXN0cCsrLCBzdW5fbGlnaHQpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KCiAgICBnU1BDbGVhckdlb21ldHJ5TW9kZShnbGlzdHArKywgMHhGRkZGRkZGRik7CiAgICBpbnZhcmlhbnQoaSA8IHZpc2libGVPYmplY3RzQ291bnQpOwogICAgaW52YXJpYW50KG9iaiAhPSBOVUxMKTsKICAgIGlmICghUkVOREVSRVJfUEFJTlRFUlNfQUxHT1JJVEhNIHx8ICAvLyBhbHdheXMgeiBidWZmZXIKICAgICAgCiAgICAgICAgaW50ZXJzZWN0aW5nT2JqZWN0c1tpXSB8fAogICAgICAgIC8vIGFuaW1hdGVkIGdhbWUgb2JqZWN0cyBoYXZlIGNvbmNhdmUgc2hhcGVzLCBuZWVkIHogYnVmZmVyaW5nCiAgICAgICAgUmVuZGVyZXJfaXNBbmltYXRlZEdhbWVPYmplY3Qob2JqKQogICAgICAgICkgewogICAgICBpZiAoIVJFTkRFUkVSX1BBSU5URVJTX0FMR09SSVRITSB8fCAgLy8gYWx3YXlzIHogYnVmZmVyCiAgICAgICAgICBSZW5kZXJlcl9pc1pCdWZmZXJlZEdhbWVPYmplY3Qob2JqKQogICAgICAgICAgKSB7CiAgICAgICAgaWYgKEFOVElBTElBU0lORykgewogICAgICAgICAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9BQV9aQl9PUEFfU1VSRiwgR19STV9BQV9aQl9PUEFfU1VSRjIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX1pCX09QQV9TVVJGLCBHX1JNX1pCX09QQV9TVVJGMik7CiAgICAgICAgfQogICAgICAgIGdTUFNldEdlb21ldHJ5TW9kZShnbGlzdHArKywgR19aQlVGRkVSKTsKICAgICAgfSBlbHNlIC8qaWYgKFJlbmRlcmVyX2lzWldyaXRlR2FtZU9iamVjdChvYmopKSovIHsKICAgICAgICBpZiAoQU5USUFMSUFTSU5HKSB7CiAgICAgICAgICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX0FBX1pVUERfT1BBX1NVUkYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIEdfUk1fQUFfWlVQRF9PUEFfU1VSRjIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX1pVUERfT1BBX1NVUkYsIEdfUk1fWlVQRF9PUEFfU1VSRjIpOwogICAgICAgIH0KICAgICAgICBnU1BTZXRHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIEdfWkJVRkZFUik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChBTlRJQUxJQVNJTkcpIHsKICAgICAgICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX0FBX09QQV9TVVJGLCBHX1JNX0FBX09QQV9TVVJGMik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9PUEFfU1VSRiwgR19STV9PUEFfU1VSRjIpOwogICAgICB9CiAgICB9CgogICAgc3dpdGNoIChyZW5kZXJNb2RlU2V0dGluZykgewogICAgICBjYXNlIFRvb25GbGF0U2hhZGluZ1JlbmRlck1vZGU6CiAgICAgICAgLy8gaWYgKFJlbmRlcmVyX2lzTGl0R2FtZU9iamVjdChvYmopKSB7CiAgICAgICAgLy8gICBnU1BTZXRHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIEdfU0hBREUgfCBHX0xJR0hUSU5HIHwgR19DVUxMX0JBQ0spOwogICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgLy8gICBnU1BTZXRHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIEdfU0hBREUgfCBHX0NVTExfQkFDSyk7CiAgICAgICAgLy8gfQoKICAgICAgICBnU1BTZXRHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIEdfQ1VMTF9CQUNLKTsKICAgICAgICBnRFBTZXRDb21iaW5lTW9kZShnbGlzdHArKywgR19DQ19ERUNBTFJHQiwgR19DQ19ERUNBTFJHQik7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgVGV4dHVyZU5vTGlnaHRpbmdSZW5kZXJNb2RlOgogICAgICBjYXNlIFdpcmVmcmFtZVJlbmRlck1vZGU6CiAgICAgICAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX1NIQURFIHwgR19TSEFESU5HX1NNT09USCB8IEdfQ1VMTF9CQUNLKTsKICAgICAgICBnRFBTZXRDb21iaW5lTW9kZShnbGlzdHArKywgR19DQ19ERUNBTFJHQiwgR19DQ19ERUNBTFJHQik7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgVGV4dHVyZUFuZExpZ2h0aW5nUmVuZGVyTW9kZToKICAgICAgICBnU1BTZXRHZW9tZXRyeU1vZGUoCiAgICAgICAgICAgIGdsaXN0cCsrLCBHX1NIQURFIHwgR19TSEFESU5HX1NNT09USCB8IEdfTElHSFRJTkcgfCBHX0NVTExfQkFDSyk7CiAgICAgICAgZ0RQU2V0Q29tYmluZU1vZGUoZ2xpc3RwKyssIEdfQ0NfTU9EVUxBVEVSR0IsIEdfQ0NfTU9EVUxBVEVSR0IpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIExpZ2h0aW5nTm9UZXh0dXJlUmVuZGVyTW9kZToKICAgICAgICBnU1BTZXRHZW9tZXRyeU1vZGUoCiAgICAgICAgICAgIGdsaXN0cCsrLCBHX1NIQURFIHwgR19TSEFESU5HX1NNT09USCB8IEdfTElHSFRJTkcgfCBHX0NVTExfQkFDSyk7CiAgICAgICAgZ0RQU2V0Q29tYmluZU1vZGUoZ2xpc3RwKyssIEdfQ0NfU0hBREUsIEdfQ0NfU0hBREUpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OiAgLy8gTm9UZXh0dXJlTm9MaWdodGluZ1JlbmRlck1vZGUKICAgICAgICBnRFBTZXRQcmltQ29sb3IoZ2xpc3RwKyssIDAsIDAsIC8qciovIDE4MCwgLypnKi8gMTgwLCAvKmIqLyAxODAsCiAgICAgICAgICAgICAgICAgICAgICAgIC8qYSovIDI1NSk7CiAgICAgICAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX0NVTExfQkFDSyk7CiAgICAgICAgZ0RQU2V0Q29tYmluZU1vZGUoZ2xpc3RwKyssIEdfQ0NfUFJJTUlUSVZFLCBHX0NDX1BSSU1JVElWRSk7CiAgICB9CgogICAgLy8gc2V0IHRoZSB0cmFuc2Zvcm0gaW4gd29ybGQgc3BhY2UgZm9yIHRoZSBnYW1lb2JqZWN0IHRvIHJlbmRlcgogICAgZ3VQb3NpdGlvbigmZHluYW1pY3AtPm9ialRyYW5zZm9ybXNbaV0sCiAgICAgICAgICAgICAgIDAuMEYsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdCB4CiAgICAgICAgICAgICAgIG9iai0+cm90YXRpb24ueSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdCB5CiAgICAgICAgICAgICAgIDAuMEYsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdCB6CiAgICAgICAgICAgICAgIG1vZGVsVHlwZXNQcm9wZXJ0aWVzW29iai0+bW9kZWxUeXBlXS5zY2FsZSwgIC8vIHNjYWxlCiAgICAgICAgICAgICAgIG9iai0+cG9zaXRpb24ueCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcyB4CiAgICAgICAgICAgICAgIG9iai0+cG9zaXRpb24ueSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcyB5CiAgICAgICAgICAgICAgIG9iai0+cG9zaXRpb24ueiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcyB6CiAgICApOwogICAgZ1NQTWF0cml4KAogICAgICAgIGdsaXN0cCsrLCBPU19LMF9UT19QSFlTSUNBTCgmKGR5bmFtaWNwLT5vYmpUcmFuc2Zvcm1zW2ldKSksCiAgICAgICAgR19NVFhfTU9ERUxWSUVXIHwgR19NVFhfTVVMIHwgR19NVFhfUFVTSCk7ICAvLyBnYW1lb2JqZWN0IG10eCBzdGFydAoKICAgIGlmIChSZW5kZXJlcl9pc0FuaW1hdGVkR2FtZU9iamVjdChvYmopKSB7CiAgICAgIC8vIGNhc2UgZm9yIG11bHRpLXBhcnQgb2JqZWN0cyB1c2luZyByaWdpZCBib2R5IGFuaW1hdGlvbgogICAgICBwcm9mU3RhcnRBbmltID0gQ1VSX1RJTUVfTVMoKTsKCiAgICAgIG1vZGVsTWVzaFBhcnRzID0gZ2V0QW5pbWF0aW9uTnVtTW9kZWxNZXNoUGFydHMob2JqLT5tb2RlbFR5cGUpOwogICAgICBjdXJBbmltUmFuZ2UgPSBnZXRDdXJyZW50QW5pbWF0aW9uUmFuZ2Uob2JqKTsKICAgICAgQW5pbWF0aW9uSW50ZXJwb2xhdGlvbl9jYWxjKCZhbmltSW50ZXJwLCBvYmotPmFuaW1TdGF0ZSwgY3VyQW5pbVJhbmdlKTsKCiAgICAgIGZvciAobW9kZWxNZXNoSWR4ID0gMDsgbW9kZWxNZXNoSWR4IDwgbW9kZWxNZXNoUGFydHM7ICsrbW9kZWxNZXNoSWR4KSB7CiAgICAgICAgLy8gcHJvZlN0YXJ0QW5pbUxlcnAgPSBDVVJfVElNRV9NUygpOwogICAgICAgIC8vIGxlcnBpbmcgdGFrZXMgYWJvdXQgMC4ybXMgcGVyIGJvbmUKICAgICAgICBpZiAoc2hvdWxkTGVycEFuaW1hdGlvbihvYmotPm1vZGVsVHlwZSkpIHsKICAgICAgICAgIEFuaW1hdGlvbkZyYW1lX2xlcnAoCiAgICAgICAgICAgICAgJmFuaW1JbnRlcnAsICAvLyByZXN1bHQgb2YgQW5pbWF0aW9uSW50ZXJwb2xhdGlvbl9jYWxjKCkKICAgICAgICAgICAgICBnZXRBbmltRGF0YSgKICAgICAgICAgICAgICAgICAgb2JqLT5tb2RlbFR5cGUpLCAgLy8gcG9pbnRlciB0byBzdGFydCBvZiBBbmltYXRpb25GcmFtZSBsaXN0CiAgICAgICAgICAgICAgbW9kZWxNZXNoUGFydHMsICAgICAgIC8vIG51bSBib25lcyBpbiByaWcgdXNlZCBieSBhbmltRGF0YQogICAgICAgICAgICAgIG1vZGVsTWVzaElkeCwgIC8vIGluZGV4IG9mIGJvbmUgaW4gcmlnIHRvIHByb2R1Y2UgdHJhbnNmb3JtIGZvcgogICAgICAgICAgICAgICZhbmltRnJhbWUgICAgIC8vIHRoZSByZXN1bHRhbnQgaW50ZXJwb2xhdGVkIGFuaW1hdGlvbiBmcmFtZQogICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQW5pbWF0aW9uRnJhbWVfZ2V0KAogICAgICAgICAgICAgICZhbmltSW50ZXJwLCAgLy8gcmVzdWx0IG9mIEFuaW1hdGlvbkludGVycG9sYXRpb25fY2FsYygpCiAgICAgICAgICAgICAgZ2V0QW5pbURhdGEoCiAgICAgICAgICAgICAgICAgIG9iai0+bW9kZWxUeXBlKSwgIC8vIHBvaW50ZXIgdG8gc3RhcnQgb2YgQW5pbWF0aW9uRnJhbWUgbGlzdAogICAgICAgICAgICAgIG1vZGVsTWVzaFBhcnRzLCAgICAgICAvLyBudW0gYm9uZXMgaW4gcmlnIHVzZWQgYnkgYW5pbURhdGEKICAgICAgICAgICAgICBtb2RlbE1lc2hJZHgsICAvLyBpbmRleCBvZiBib25lIGluIHJpZyB0byBwcm9kdWNlIHRyYW5zZm9ybSBmb3IKICAgICAgICAgICAgICAmYW5pbUZyYW1lICAgICAvLyB0aGUgcmVzdWx0YW50IGludGVycG9sYXRlZCBhbmltYXRpb24gZnJhbWUKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIC8vIFRyYWNlX2FkZEV2ZW50KEFuaW1MZXJwVHJhY2VFdmVudCwgcHJvZlN0YXJ0QW5pbUxlcnAsIENVUl9USU1FX01TKCkpOwoKICAgICAgICAvLyBwdXNoIG1hdHJpeCB3aXRoIHRoZSBibGVuZGVyIHRvIG42NCBjb29yZCByb3RhdGlvbiwgdGhlbiBtdWxpdHBseQogICAgICAgIC8vIGl0IGJ5IHRoZSBtb2RlbCdzIHJvdGF0aW9uIGFuZCBvZmZzZXQKCiAgICAgICAgLy8gcm90YXRlIGZyb20gei11cCAoYmxlbmRlcikgdG8geS11cCAob3BlbmdsKSBjb29yZHMKICAgICAgICAvLyBUT0RPOiBtb3ZlIGFzIG1hbnkgb2YgdGhlc2UgdHJhbnNmb3JtYXRpb25zIGFzIHBvc3NpYmxlIHRvCiAgICAgICAgLy8gYmUgcHJlY29tcHV0ZWQgaW4gYW5pbWF0aW9uIGRhdGEKICAgICAgICBndVJvdGF0ZSgmZHluYW1pY3AtPnpVcFRvWVVwQ29vcmRpbmF0ZXNSb3RhdGlvbiwgLTkwLjBmLCAxLCAwLCAwKTsKICAgICAgICBnU1BNYXRyaXgoZ2xpc3RwKyssCiAgICAgICAgICAgICAgICAgIE9TX0swX1RPX1BIWVNJQ0FMKCYoZHluYW1pY3AtPnpVcFRvWVVwQ29vcmRpbmF0ZXNSb3RhdGlvbikpLAogICAgICAgICAgICAgICAgICBHX01UWF9NT0RFTFZJRVcgfCBHX01UWF9NVUwgfCBHX01UWF9QVVNIKTsKCiAgICAgICAgZ3VQb3NpdGlvbigmb2JqLT5hbmltU3RhdGUtPmFuaW1NZXNoVHJhbnNmb3JtW21vZGVsTWVzaElkeF0sCiAgICAgICAgICAgICAgICAgICBhbmltRnJhbWUucm90YXRpb24ueCwgIC8vIHJvbGwKICAgICAgICAgICAgICAgICAgIGFuaW1GcmFtZS5yb3RhdGlvbi55LCAgLy8gcGl0Y2gKICAgICAgICAgICAgICAgICAgIGFuaW1GcmFtZS5yb3RhdGlvbi56LCAgLy8geWF3CiAgICAgICAgICAgICAgICAgICAxLjBGLCAgICAgICAgICAgICAgICAgIC8vIHNjYWxlCiAgICAgICAgICAgICAgICAgICBhbmltRnJhbWUucG9zaXRpb24ueCwgIC8vIHBvcyB4CiAgICAgICAgICAgICAgICAgICBhbmltRnJhbWUucG9zaXRpb24ueSwgIC8vIHBvcyB5CiAgICAgICAgICAgICAgICAgICBhbmltRnJhbWUucG9zaXRpb24ueiAgIC8vIHBvcyB6CiAgICAgICAgKTsKICAgICAgICBnU1BNYXRyaXgoZ2xpc3RwKyssCiAgICAgICAgICAgICAgICAgIE9TX0swX1RPX1BIWVNJQ0FMKAogICAgICAgICAgICAgICAgICAgICAgJihvYmotPmFuaW1TdGF0ZS0+YW5pbU1lc2hUcmFuc2Zvcm1bbW9kZWxNZXNoSWR4XSkpLAogICAgICAgICAgICAgICAgICBHX01UWF9NT0RFTFZJRVcgfCBHX01UWF9NVUwgfCBHX01UWF9OT1BVU0gpOwoKICAgICAgICBnU1BEaXNwbGF5TGlzdChnbGlzdHArKywgZ2V0TWVzaERpc3BsYXlMaXN0Rm9yTW9kZWxNZXNoUGFydCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai0+bW9kZWxUeXBlLCBhbmltRnJhbWUub2JqZWN0KSk7CgogICAgICAgIGF0dGFjaG1lbnQgPSAmb2JqLT5hbmltU3RhdGUtPmF0dGFjaG1lbnQ7CiAgICAgICAgaWYgKGF0dGFjaG1lbnQtPm1vZGVsVHlwZSAhPSBOb25lTW9kZWwgJiYKICAgICAgICAgICAgYXR0YWNobWVudC0+Ym9uZUluZGV4ID09IG1vZGVsTWVzaElkeCkgewogICAgICAgICAgZ3VQb3NpdGlvbigmb2JqLT5hbmltU3RhdGUtPmF0dGFjaG1lbnRUcmFuc2Zvcm0sCiAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQtPnJvdGF0aW9uLngsICAvLyByb2xsCiAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQtPnJvdGF0aW9uLnksICAvLyBwaXRjaAogICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50LT5yb3RhdGlvbi56LCAgLy8geWF3CiAgICAgICAgICAgICAgICAgICAgIDEuMEYsICAgICAgICAgICAgICAgICAgICAvLyBzY2FsZQogICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50LT5vZmZzZXQueCwgICAgLy8gcG9zIHgKICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudC0+b2Zmc2V0LnksICAgIC8vIHBvcyB5CiAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQtPm9mZnNldC56ICAgICAvLyBwb3MgegogICAgICAgICAgKTsKICAgICAgICAgIGdTUE1hdHJpeChnbGlzdHArKywKICAgICAgICAgICAgICAgICAgICBPU19LMF9UT19QSFlTSUNBTCgmKG9iai0+YW5pbVN0YXRlLT5hdHRhY2htZW50VHJhbnNmb3JtKSksCiAgICAgICAgICAgICAgICAgICAgR19NVFhfTU9ERUxWSUVXIHwgR19NVFhfTVVMIHwgR19NVFhfUFVTSCk7CiAgICAgICAgICBtb2RlbERpc3BsYXlMaXN0ID0gZ2V0TW9kZWxEaXNwbGF5TGlzdChhdHRhY2htZW50LT5tb2RlbFR5cGUsIDApOwogICAgICAgICAgZ1NQRGlzcGxheUxpc3QoZ2xpc3RwKyssIG1vZGVsRGlzcGxheUxpc3QpOwogICAgICAgICAgZ1NQUG9wTWF0cml4KGdsaXN0cCsrLCBHX01UWF9NT0RFTFZJRVcpOwogICAgICAgIH0KCiAgICAgICAgZ1NQUG9wTWF0cml4KGdsaXN0cCsrLCBHX01UWF9NT0RFTFZJRVcpOwogICAgICB9CiAgICAgIFRyYWNlX2FkZEV2ZW50KERyYXdBbmltVHJhY2VFdmVudCwgcHJvZlN0YXJ0QW5pbSwgQ1VSX1RJTUVfTVMoKSk7CiAgICB9IGVsc2UgewogICAgICAvLyBjYXNlIGZvciBzaW1wbGUgZ2FtZW9iamVjdHMgd2l0aCBubyBtb3Zpbmcgc3ViLXBhcnRzCiAgICAgIG1vZGVsRGlzcGxheUxpc3QgPSBnZXRNb2RlbERpc3BsYXlMaXN0KG9iai0+bW9kZWxUeXBlLCBvYmotPnN1YnR5cGUpOwoKICAgICAgZ1NQRGlzcGxheUxpc3QoZ2xpc3RwKyssIG1vZGVsRGlzcGxheUxpc3QpOwogICAgfQoKICAgIGdTUFBvcE1hdHJpeChnbGlzdHArKywgR19NVFhfTU9ERUxWSUVXKTsgIC8vIGdhbWVvYmplY3QgbXR4IGVuZAoKICAgIGdEUFBpcGVTeW5jKGdsaXN0cCsrKTsKICB9CgojaWYgRFJBV19TUFJJVEVTCiAgewogICAgVmlld3BvcnRGIHZpZXdwb3J0ID0gezAsIDAsIFNDUkVFTl9XRCwgU0NSRUVOX0hUfTsKICAgIGZsb2F0IHdpZHRoID0gNjQ7CiAgICBmbG9hdCBoZWlnaHQgPSA2NDsKICAgIFZlYzNkIGNlbnRlcjsKICAgIFZlYzNkIHByb2plY3RlZDsKICAgIE10eEYgbW9kZWxWaWV3TXR4RjsKICAgIE10eEYgcHJvamVjdGlvbk10eEY7CgogICAgZ3VNdHhMMkYobW9kZWxWaWV3TXR4RiwgJmR5bmFtaWNwLT5jYW1lcmEpOwogICAgZ3VNdHhMMkYocHJvamVjdGlvbk10eEYsICZkeW5hbWljcC0+cHJvamVjdGlvbik7CiAgICBmb3IgKGkgPSAwOyBpIDwgdmlzaWJsZU9iamVjdHNDb3VudDsgaSsrKSB7CiAgICAgIG9iaiA9IHZpc2libGVPYmpEaXN0YW5jZVtpXS5vYmo7CiAgICAgIEdhbWVfZ2V0T2JqQ2VudGVyKG9iaiwgJmNlbnRlcik7CiAgICAgIGNlbnRlci55ICs9IDc1OwogICAgICBpZiAoIW9iai0+YW5pbVN0YXRlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgc2NyZWVuUHJvamVjdCgmY2VudGVyLCBtb2RlbFZpZXdNdHhGLCBwcm9qZWN0aW9uTXR4Riwgdmlld3BvcnQsCiAgICAgICAgICAgICAgICAgICAgJnByb2plY3RlZCk7CgogICAgICAvLyByZW5kZXIgc3ByaXRlcwogICAgICBkcmF3U3ByaXRlKGdldFNwcml0ZUZvclNwcml0ZVR5cGUoSG9ua1Nwcml0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwcml0ZV9mcmFtZUN5Y2xlKEhPTktfU1BSSVRFX0ZSQU1FUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qc3ByaXRlIGZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMCwgZ2FtZS0+dGljaykpLAoKICAgICAgICAgICAgICAgICAzMiwgMzIsICAvLyB0ZXh0dXJlIGRpbWVuc2lvbnMKICAgICAgICAgICAgICAgICBwcm9qZWN0ZWQueCwKICAgICAgICAgICAgICAgICBTQ1JFRU5fSFQgLSBwcm9qZWN0ZWQueSwgIC8vIGRyYXcgYXQgcG9zLCBpbnZlcnQgeQogICAgICAgICAgICAgICAgIFJFU19TQ0FMRV9YKHdpZHRoKSwgUkVTX1NDQUxFX1koaGVpZ2h0KSwgVFJVRQoKICAgICAgKTsKICAgIH0KICB9CiNlbmRpZgoKICBmcmVlKGludGVyc2VjdGluZ09iamVjdHMpOwogIGZyZWUodmlzaWJsZU9iakRpc3RhbmNlKTsKICBmcmVlKHdvcmxkT2JqZWN0c1Zpc2liaWxpdHkpOwoKICBUcmFjZV9hZGRFdmVudChEcmF3SXRlclRyYWNlRXZlbnQsIHByb2ZTdGFydEl0ZXIsIENVUl9USU1FX01TKCkpOwp9CgovKiBQcm92aWRlIHBsYXliYWNrIGFuZCBjb250cm9sIG9mIGF1ZGlvIGJ5IHRoZSBidXR0b24gb2YgdGhlIGNvbnRyb2xsZXIgKi8Kdm9pZCBzb3VuZENoZWNrKHZvaWQpIHsKICAvKiBUaGUgb3JkZXIgaW4gd2hpY2ggYXVkaW8gaXMgcGxheWVkIGNhbiBiZSBkZXRlcm1pbmVkIHVzaW5nIHRoZSByaWdodCBhbmQKICAgKiBsZWZ0IHNpZGVzIG9mIHRoZSBjcm9zcyBrZXkuICovCiAgaWYgKChjb250ZGF0YVswXS50cmlnZ2VyICYgTF9KUEFEKSB8fCAoY29udGRhdGFbMF0udHJpZ2dlciAmIFJfSlBBRCkgfHwKICAgICAgY29udGRhdGFbMF0udHJpZ2dlciAmIFVfSlBBRCB8fCBjb250ZGF0YVswXS50cmlnZ2VyICYgRF9KUEFEKSB7CiAgICBpZiAoc25kTnVtYmVyKQogICAgICBudUF1U3RsU25kUGxheWVyU25kU3RvcChzbmRIYW5kbGUsIDApOwoKICAgIGlmIChjb250ZGF0YVswXS50cmlnZ2VyICYgTF9KUEFEKSB7CiAgICAgIHNuZE51bWJlci0tOwogICAgICBpZiAoc25kTnVtYmVyIDwgMSkKICAgICAgICBzbmROdW1iZXIgPSBNQVhfU09VTkRfVFlQRSAtIDE7CiAgICB9IGVsc2UgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBSX0pQQUQpIHsKICAgICAgc25kTnVtYmVyKys7CiAgICAgIGlmIChzbmROdW1iZXIgPiBNQVhfU09VTkRfVFlQRSAtIDEpCiAgICAgICAgc25kTnVtYmVyID0gMTsKICAgIH0gZWxzZSBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIFVfSlBBRCkgewogICAgICBzbmRQaXRjaCArPSAwLjU7CiAgICAgIGlmIChzbmRQaXRjaCA+IDEyLjApCiAgICAgICAgc25kUGl0Y2ggPSAtMTIuMDsKICAgIH0gZWxzZSBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIERfSlBBRCkgewogICAgICBzbmRQaXRjaCAtPSAwLjU7CiAgICAgIGlmIChzbmRQaXRjaCA8IC0xMi4wKQogICAgICAgIHNuZFBpdGNoID0gMTIuMDsKICAgIH0KCiAgICBzbmRIYW5kbGUgPSBudUF1U3RsU25kUGxheWVyUGxheShzbmROdW1iZXIgLSAxKTsKICAgIG51QXVTdGxTbmRQbGF5ZXJTZXRTbmRQaXRjaChzbmRIYW5kbGUsIHNuZFBpdGNoKTsKICB9Cn0KCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCi8qICBSb20yUmFtIC0gUmVhZHMgZGF0YSBmcm9tIFJPTSBpbnRvIFJBTSAgICAgICovCi8qICBJTjogZnJvbV9hZGRyIFRoZSBzb3VyY2UgYWRkcmVzcyBvZiB0aGUgZGF0YSBpbiBST00gICAqLwovKiAgICB0b19hZGRyICAgVGhlIGRlc3RpbmF0aW9uIGFkZHJlc3Mgb2YgdGhlIGRhdGEgaW4gUkFNICovCi8qICAgIHNlcV9zaXplICAgICAgICAgIFNpemUgb2YgdGhlIGRhdGEgdG8gcmVhZCAgICAgICovCi8qICBSRVQ6ICBOb3RoaW5nICAgICAgICAgICAgICovCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCnZvaWQgUm9tMlJhbSh2b2lkKiBmcm9tX2FkZHIsIHZvaWQqIHRvX2FkZHIsIHMzMiBzZXFfc2l6ZSkgewogIC8qIENhbm5vdCB0cmFuc2ZlciBpZiBzaXplIGlzIGFuIG9kZCBudW1iZXIsIHNvIG1ha2UgaXQgYW4gZXZlbiBudW1iZXIuICovCiAgaWYgKHNlcV9zaXplICYgMHgwMDAwMDAwMSkKICAgIHNlcV9zaXplKys7CgogIG51UGlSZWFkUm9tKCh1MzIpZnJvbV9hZGRyLCB0b19hZGRyLCBzZXFfc2l6ZSk7Cn0KCnZvaWQgZHJhd1Nwcml0ZSh1bnNpZ25lZCBzaG9ydCogc3ByRGF0YSwKICAgICAgICAgICAgICAgIGludCBzcHJXaWR0aCwKICAgICAgICAgICAgICAgIGludCBzcHJIZWlnaHQsCiAgICAgICAgICAgICAgICBpbnQgYXRYLAogICAgICAgICAgICAgICAgaW50IGF0WSwKICAgICAgICAgICAgICAgIGludCB3aWR0aCwKICAgICAgICAgICAgICAgIGludCBoZWlnaHQsCiAgICAgICAgICAgICAgICBpbnQgY2VudGVyZWQpIHsKICBpbnQgeCA9IGF0WCArIChjZW50ZXJlZCA/IC0od2lkdGggLyAyKSA6IDApOwogIGludCB5ID0gYXRZICsgKGNlbnRlcmVkID8gLShoZWlnaHQgLyAyKSA6IDApOwoKICBnRFBMb2FkVGV4dHVyZUJsb2NrKGdsaXN0cCsrLCBzcHJEYXRhLCBHX0lNX0ZNVF9SR0JBLCBHX0lNX1NJWl8xNmIsIHNwcldpZHRoLAogICAgICAgICAgICAgICAgICAgICAgc3BySGVpZ2h0LCAwLCBHX1RYX1dSQVAgfCBHX1RYX05PTUlSUk9SLAogICAgICAgICAgICAgICAgICAgICAgR19UWF9XUkFQIHwgR19UWF9OT01JUlJPUiwgMCwgMCwgR19UWF9OT0xPRCwgR19UWF9OT0xPRCk7CiAgZ0RQU2V0VGV4dHVyZVBlcnNwKGdsaXN0cCsrLCBHX1RQX05PTkUpOwogIGdEUFNldEFscGhhQ29tcGFyZShnbGlzdHArKywgR19BQ19USFJFU0hPTEQpOwogIGdEUFNldENvbWJpbmVNb2RlKGdsaXN0cCsrLCBHX0NDX01PRFVMQVRFUkdCQV9QUklNLCBHX0NDX01PRFVMQVRFUkdCQV9QUklNKTsKICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX1hMVV9TVVJGLCBHX1JNX1hMVV9TVVJGMik7CiAgLy8gVE9ETzogY2xpcCByZWN0YW5nbGUgYW5kIG9mZnNldCtzY2FsZSB0ZXggY29vcmRzIHNvIHdlIGNhbiByZW5kZXIgcGFydGx5CiAgLy8gb2Zmc2NyZWVuIHRleHR1cmVzCiAgZ1NQU2Npc1RleHR1cmVSZWN0YW5nbGUoCiAgICAgIGdsaXN0cCsrLAogICAgICAoaW50KSh4KSA8PCAyLCAgICAgICAgICAgLy8gdXBwZXIgbGVmdCB4LAogICAgICAoaW50KSh5KSA8PCAyLCAgICAgICAgICAgLy8gdXBwZXIgbGVmdCB5CiAgICAgIChpbnQpKHggKyB3aWR0aCkgPDwgMiwgICAvLyBsb3dlciByaWdodCB4LAogICAgICAoaW50KSh5ICsgaGVpZ2h0KSA8PCAyLCAgLy8gbG93ZXIgcmlnaHQgeSwKICAgICAgR19UWF9SRU5ERVJUSUxFLCAgICAgICAgIC8vIHRpbGUKICAgICAgLy8gdXBwZXIgbGVmdCBzLCB0CiAgICAgIC8vIHdoZW4gdXNpbmcgZ1NQVGV4dHVyZVJlY3RhbmdsZUZsaXAsIHRoZXNlIGFyZ3MgYXJlIGZsaXBwZWQKICAgICAgMCA8PCA1LCAwIDw8IDUsCiAgICAgIC8vIGNoYW5nZSBpbiBzLHQgZm9yIGVhY2ggY2hhbmdlIGluIHNjcmVlbiBzcGFjZSB4LHkuCiAgICAgIC8vIHNtYWxsZXIgdmFsdWVzID0gbGFyZ2VyIHNjYWxpbmcKICAgICAgLy8gd2hlbiB1c2luZyBnU1BUZXh0dXJlUmVjdGFuZ2xlRmxpcCwgdGhlc2UgYXJncyBhcmUgZmxpcHBlZAogICAgICAoKGZsb2F0KXNwcldpZHRoIC8gKGZsb2F0KXdpZHRoKSAqICgxIDw8IDEwKSwKICAgICAgKChmbG9hdClzcHJIZWlnaHQgLyAoZmxvYXQpaGVpZ2h0KSAqICgxIDw8IDEwKSk7CgogIGdEUFBpcGVTeW5jKGdsaXN0cCsrKTsKfQoKdm9pZCBtdWxNdHhGVmVjRihNdHhGIG1hdHJpeCwgZmxvYXQqIGluIC8qWzRdKi8sIGZsb2F0KiBvdXQgLypbNF0qLykgewogIGludCBpOwoKICBmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICBvdXRbaV0gPSBpblswXSAqIG1hdHJpeFswXVtpXSArICAvLyAgMCwgMSwgMiwgMwogICAgICAgICAgICAgaW5bMV0gKiBtYXRyaXhbMV1baV0gKyAgLy8gIDQsIDUsIDYsIDcsCiAgICAgICAgICAgICBpblsyXSAqIG1hdHJpeFsyXVtpXSArICAvLyAgOCwgOSwxMCwgOSwKICAgICAgICAgICAgIGluWzNdICogbWF0cml4WzNdW2ldOyAgIC8vIDEyLDEzLDE0LDE1LAogIH0KfQoKLy8gbGlrZSBnbHVQcm9qZWN0KCkKaW50IHNjcmVlblByb2plY3QoVmVjM2QqIG9iaiwKICAgICAgICAgICAgICAgICAgTXR4RiBtb2RlbE1hdHJpeCwKICAgICAgICAgICAgICAgICAgTXR4RiBwcm9qTWF0cml4LAogICAgICAgICAgICAgICAgICBWaWV3cG9ydEYgdmlld3BvcnQsCiAgICAgICAgICAgICAgICAgIFZlYzNkKiB3aW4pIHsKICBmbG9hdCBpbls0XTsKICBmbG9hdCBvdXRbNF07CgogIGluWzBdID0gb2JqLT54OwogIGluWzFdID0gb2JqLT55OwogIGluWzJdID0gb2JqLT56OwogIGluWzNdID0gMS4wOwogIG11bE10eEZWZWNGKG1vZGVsTWF0cml4LCBpbiwgb3V0KTsKICBtdWxNdHhGVmVjRihwcm9qTWF0cml4LCBvdXQsIGluKTsKCiAgaWYgKGluWzNdID09IDAuMCkKICAgIHJldHVybiBGQUxTRTsKICBpblswXSAvPSBpblszXTsKICBpblsxXSAvPSBpblszXTsKICBpblsyXSAvPSBpblszXTsKICAvKiBNYXAgeCwgeSBhbmQgeiB0byByYW5nZSAwLTEgKi8KICBpblswXSA9IGluWzBdICogMC41ICsgMC41OwogIGluWzFdID0gaW5bMV0gKiAwLjUgKyAwLjU7CiAgaW5bMl0gPSBpblsyXSAqIDAuNSArIDAuNTsKCiAgLyogTWFwIHgseSB0byB2aWV3cG9ydCAqLwogIGluWzBdID0gaW5bMF0gKiB2aWV3cG9ydFsyXSArIHZpZXdwb3J0WzBdOwogIGluWzFdID0gaW5bMV0gKiB2aWV3cG9ydFszXSArIHZpZXdwb3J0WzFdOwoKICB3aW4tPnggPSBpblswXTsKICB3aW4tPnkgPSBpblsxXTsKICB3aW4tPnogPSBpblsyXTsKICByZXR1cm4gVFJVRTsKfQo",
					"AQAAAAAAAAABAAAAcwAAAAAAAAB+AAAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAGFNAAAAAAAAYk0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYU0AAAAAAABhTQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"clang_format",
					{
						"whole_buffer": true
					},
					"AQAAAAAAAAAAAAAAF6YAAAAAAAAXpgAALyoKICAgc3RhZ2UwMC5jCgogIHRoZSBtYWluIGdhbWUgZmlsZQoqLwoKI2luY2x1ZGUgPGFzc2VydC5oPgojaW5jbHVkZSA8bnVzeXMuaD4KLy8gI2luY2x1ZGUgPHN0ZGxpYi5oPgoKI2luY2x1ZGUgPG51YWxzdGxfbi5oPgoKI2luY2x1ZGUgPG1hbGxvYy5oPgojaW5jbHVkZSA8bWF0aC5oPgoKLy8gZ2FtZQojaW5jbHVkZSAiYW5pbWF0aW9uLmgiCiNpbmNsdWRlICJjb25zdGFudHMuaCIKI2luY2x1ZGUgImZydXN0dW0uaCIKI2luY2x1ZGUgImdhbWUuaCIKI2luY2x1ZGUgImdhbWVvYmplY3QuaCIKI2luY2x1ZGUgImdyYXBoaWMuaCIKI2luY2x1ZGUgImlucHV0LmgiCiNpbmNsdWRlICJtYWluLmgiCiNpbmNsdWRlICJtb2RlbHR5cGUuaCIKI2luY2x1ZGUgIm9wdGlvbi5oIgojaW5jbHVkZSAicGF0aGZpbmRpbmcuaCIKI2luY2x1ZGUgInBoeXNpY3MuaCIKI2luY2x1ZGUgInJlbmRlcmVyLmgiCiNpbmNsdWRlICJzb3VuZC5oIgojaW5jbHVkZSAic3ByaXRlLmgiCiNpbmNsdWRlICJ0cmFjZS5oIgojaW5jbHVkZSAidmVjMmQuaCIKI2luY2x1ZGUgInZlYzNkLmgiCgojaW5jbHVkZSAibW9kZWxzLmgiCiNpbmNsdWRlICJzZWdtZW50cy5oIgoKLy8gbWFwCiNpbmNsdWRlICJnYXJkZW5fbWFwLmgiCiNpbmNsdWRlICJnYXJkZW5fbWFwX2NvbGxpc2lvbi5oIgojaW5jbHVkZSAiZ2FyZGVuX21hcF9ncmFwaC5oIgovLyBhbmltIGRhdGEKI2luY2x1ZGUgImNoYXJhY3Rlcl9hbmltLmgiCiNpbmNsdWRlICJnb29zZV9hbmltLmgiCgojaW5jbHVkZSAiZWQ2NGlvLmgiCgojZGVmaW5lIExPR19UUkFDRVMgMAojZGVmaW5lIExPR19QUk9GSUxJTkcgMQoKI2RlZmluZSBDT05UUk9MTEVSX0RFQURfWk9ORSAwLjEKI2RlZmluZSBTT1VORF9URVNUIDAKI2RlZmluZSBEUkFXX1NQUklURVMgMAoKdHlwZWRlZiBlbnVtIFJlbmRlck1vZGUgewogIFRvb25GbGF0U2hhZGluZ1JlbmRlck1vZGUsCiAgVGV4dHVyZUFuZExpZ2h0aW5nUmVuZGVyTW9kZSwKICBUZXh0dXJlTm9MaWdodGluZ1JlbmRlck1vZGUsCiAgTm9UZXh0dXJlTm9MaWdodGluZ1JlbmRlck1vZGUsCiAgTGlnaHRpbmdOb1RleHR1cmVSZW5kZXJNb2RlLAogIFdpcmVmcmFtZVJlbmRlck1vZGUsCiAgTUFYX1JFTkRFUl9NT0RFCn0gUmVuZGVyTW9kZTsKCnR5cGVkZWYgZW51bSBDb25zb2xlTW9kZSB7CiAgQ09OU09MRV9TSE9XX0NBTUVSQSwKICBDT05TT0xFX1NIT1dfQ1BVX1BST0ZJTElORywKICBDT05TT0xFX1NIT1dfQ1VMTElORywKICBDT05TT0xFX1NIT1dfUFJPRklMSU5HLAogIENPTlNPTEVfU0hPV19SQ1BfVEFTS1MsCiAgQ09OU09MRV9TSE9XX1NPVU5ELAogIENPTlNPTEVfU0hPV19UUkFDSU5HLAogIENPTlNPTEVfU0hPV19FRDY0TE9HX0lOVEVSTkFMUywKICBNQVhfQ09OU09MRV9NT0RFCn0gQ29uc29sZU1vZGU7CgpzdGF0aWMgaW50IGNvbnNvbGVTaG93biA9IFRSVUU7CnN0YXRpYyBpbnQgbnVQZXJmQmFyU2hvd24gPSBGQUxTRTsKc3RhdGljIENvbnNvbGVNb2RlIGNvbnNvbGVNb2RlID0gQ09OU09MRV9TSE9XX1BST0ZJTElORzsKCnN0YXRpYyBWZWMzZCB2aWV3UG9zOwpzdGF0aWMgVmVjM2Qgdmlld1JvdDsKc3RhdGljIElucHV0IGlucHV0OwoKc3RhdGljIHUxNiBwZXJzcE5vcm07CnN0YXRpYyB1MzIgbmVhclBsYW5lOyAvKiBOZWFyIFBsYW5lICovCnN0YXRpYyB1MzIgZmFyUGxhbmU7ICAvKiBGYXIgUGxhbmUgKi8Kc3RhdGljIEZydXN0dW0gZnJ1c3R1bTsKI2lmIEhJR0hfUkVTT0xVVElPTiAmJiBISUdIX1JFU09MVVRJT05fSEFMRl9ZCnN0YXRpYyBmbG9hdCBhc3BlY3QgPSAoZjMyKVNDUkVFTl9XRCAvIChmMzIpKFNDUkVFTl9IVCAqIDIpOwojZWxzZQpzdGF0aWMgZmxvYXQgYXNwZWN0ID0gKGYzMilTQ1JFRU5fV0QgLyAoZjMyKVNDUkVFTl9IVDsKI2VuZGlmCnN0YXRpYyBmbG9hdCBmb3Z5ID0gREVGQVVMVF9GT1ZZOwpzdGF0aWMgVmVjM2QgdXBWZWN0b3IgPSB7MC4wZiwgMS4wZiwgMC4wZn07CgovKiBmcmFtZSBjb3VudGVyICovCmZsb2F0IGZyYW1lQ291bnRlckxhc3RUaW1lOwppbnQgZnJhbWVDb3VudGVyQ3VyRnJhbWVzOwppbnQgZnJhbWVDb3VudGVyTGFzdEZyYW1lczsKCi8qIHByb2ZpbGluZyAqLwppbnQgdG90YWxVcGRhdGVzOwpmbG9hdCBwcm9mQXZnQ2hhcmFjdGVyczsKZmxvYXQgcHJvZkF2Z1BoeXNpY3M7CmZsb2F0IHByb2ZBdmdEcmF3OwpmbG9hdCBwcm9mQXZnUGF0aDsKZmxvYXQgbGFzdEZyYW1lVGltZTsKZmxvYXQgcHJvZmlsaW5nQXZlcmFnZXNbTUFYX1RSQUNFX0VWRU5UX1RZUEVdOwoKc3RhdGljIGludCBvYmplY3RzQ3VsbGVkOwoKc3RhdGljIGludCB1c2JFbmFibGVkOwpzdGF0aWMgaW50IHVzYlJlc3VsdDsKc3RhdGljIFVzYkxvZ2dlclN0YXRlIHVzYkxvZ2dlclN0YXRlOwoKc3RhdGljIGludCBsb2dUcmFjZVN0YXJ0T2Zmc2V0ID0gMDsKc3RhdGljIGludCBsb2dnaW5nVHJhY2UgPSBGQUxTRTsKCnN0YXRpYyBpbnQgdHdvQ3ljbGVNb2RlOwpzdGF0aWMgUmVuZGVyTW9kZSByZW5kZXJNb2RlU2V0dGluZzsKUGh5c1dvcmxkRGF0YSBwaHlzV29ybGREYXRhOwoKdm9pZCBkcmF3V29ybGRPYmplY3RzKER5bmFtaWMqIGR5bmFtaWNwKTsKdm9pZCBzb3VuZENoZWNrKHZvaWQpOwp2b2lkIFJvbTJSYW0odm9pZCosIHZvaWQqLCBzMzIpOwppbnQgc2NyZWVuUHJvamVjdChWZWMzZCogb2JqLAogICAgICAgICAgICAgICAgICBNdHhGIG1vZGVsTWF0cml4LAogICAgICAgICAgICAgICAgICBNdHhGIHByb2pNYXRyaXgsCiAgICAgICAgICAgICAgICAgIFZpZXdwb3J0RiB2aWV3cG9ydCwKICAgICAgICAgICAgICAgICAgVmVjM2QqIHdpbik7CnZvaWQgZHJhd1Nwcml0ZSh1bnNpZ25lZCBzaG9ydCogc3ByRGF0YSwKICAgICAgICAgICAgICAgIGludCBzcHJXaWR0aCwKICAgICAgICAgICAgICAgIGludCBzcHJIZWlnaHQsCiAgICAgICAgICAgICAgICBpbnQgeCwKICAgICAgICAgICAgICAgIGludCB5LAogICAgICAgICAgICAgICAgaW50IHdpZHRoLAogICAgICAgICAgICAgICAgaW50IGhlaWdodCwKICAgICAgICAgICAgICAgIGludCBjZW50ZXJlZCk7CgojZGVmaW5lIE9CSl9TVEFSVF9WQUwgMTAwMAoKTGlnaHRzMSBzdW5fbGlnaHQgPSBnZFNQRGVmTGlnaHRzMSgxMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEyMCwgLyogd2VhayBhbWJpZW50IGxpZ2h0ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjU1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDI1NSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyNTUsIC8qIHdoaXRlIGxpZ2h0ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgODAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgODAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCk7CgpMaWdodHMwIGFtYl9saWdodCA9IGdkU1BEZWZMaWdodHMwKDIwMCwgMjAwLCAyMDAgLyogIGFtYmllbnQgbGlnaHQgKi8pOwoKc3RhdGljIG11c0hhbmRsZSBzbmRIYW5kbGUgPSAwOwpzdGF0aWMgbXVzSGFuZGxlIHNlcUhhbmRsZSA9IDA7CnN0YXRpYyBmbG9hdCBzbmRQaXRjaCA9IDEwLjU7ICAvLyBpIGRvbid0IGZ1Y2tpbmcga25vdyA6KCgKc3RhdGljIGludCBzbmROdW1iZXIgPSAwOwpzdGF0aWMgaW50IGhvbmtTb3VuZFJhbmdlID0gSG9uazVTb3VuZCAtIEhvbmsxU291bmQ7CnN0YXRpYyBpbnQgc2VxUGxheWluZyA9IEZBTFNFOwoKLyogVGhlIGluaXRpYWxpemF0aW9uIG9mIHN0YWdlIDAgKi8Kdm9pZCBpbml0U3RhZ2UwMCgpIHsKICBHYW1lKiBnYW1lOwogIGludCBpOwoKICAvLyBsb2FkIGluIHRoZSBtb2RlbHMgc2VnbWVudCBpbnRvIGhpZ2hlciBtZW1vcnkKICBSb20yUmFtKF9tb2RlbHNTZWdtZW50Um9tU3RhcnQsIF9tb2RlbHNTZWdtZW50U3RhcnQsCiAgICAgICAgICBfbW9kZWxzU2VnbWVudFJvbUVuZCAtIF9tb2RlbHNTZWdtZW50Um9tU3RhcnQpOwogIC8vIGxvYWQgaW4gdGhlIHNwcml0ZXMgc2VnbWVudCBpbnRvIGhpZ2hlciBtZW1vcnkKICBSb20yUmFtKF9zcHJpdGVzU2VnbWVudFJvbVN0YXJ0LCBfc3ByaXRlc1NlZ21lbnRTdGFydCwKICAgICAgICAgIF9zcHJpdGVzU2VnbWVudFJvbUVuZCAtIF9zcHJpdGVzU2VnbWVudFJvbVN0YXJ0KTsKICAvLyBsb2FkIGluIHRoZSBjb2xsaXNpb24gc2VnbWVudCBpbnRvIGhpZ2hlciBtZW1vcnkKICBSb20yUmFtKF9jb2xsaXNpb25TZWdtZW50Um9tU3RhcnQsIF9jb2xsaXNpb25TZWdtZW50U3RhcnQsCiAgICAgICAgICBfY29sbGlzaW9uU2VnbWVudFJvbUVuZCAtIF9jb2xsaXNpb25TZWdtZW50Um9tU3RhcnQpOwoKICAvKiBSZWFkIGFuZCByZWdpc3RlciB0aGUgc2FtcGxlIGJhbmsuICovCiAgbnVBdVN0bFB0ckJhbmtJbml0KFBCQU5LX0VORCAtIFBCQU5LX1NUQVJUKTsKICBudUF1U3RsUHRyQmFua1NldCgodTgqKVBCQU5LX1NUQVJULCBQQkFOS19FTkQgLSBQQkFOS19TVEFSVCwKICAgICAgICAgICAgICAgICAgICAodTgqKVdCQU5LX1NUQVJUKTsKCiAgLyogUmVhZCBhbmQgcmVnaXN0ZXIgdGhlIHNvdW5kIGVmZmVjdHMuICovCiAgbnVBdVN0bFNuZFBsYXllckRhdGFTZXQoKHU4KilTRlhfU1RBUlQsIFNGWF9FTkQgLSBTRlhfU1RBUlQpOwoKICBudUF1U3RsU2VxUGxheWVyRGF0YVNldCgwLCAodTgqKVNPTkdfU1RBUlQsIFNPTkdfRU5EIC0gU09OR19TVEFSVCk7CgogIGRlYnVnUHJpbnRmU3luYygiYXVkaW8gaGVhcCB1c2VkPSVkLCBmcmVlPSVkXG4iLCBudUF1U3RsSGVhcEdldFVzZWQoKSwKICAgICAgICAgICAgICAgICAgbnVBdVN0bEhlYXBHZXRGcmVlKCkpOwoKICBwaHlzV29ybGREYXRhID0gKFBoeXNXb3JsZERhdGEpe2dhcmRlbl9tYXBfY29sbGlzaW9uX2NvbGxpc2lvbl9tZXNoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0FSREVOX01BUF9DT0xMSVNJT05fTEVOR1RILAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmdhcmRlbl9tYXBfY29sbGlzaW9uX2NvbGxpc2lvbl9tZXNoX2hhc2gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmdyYXZpdHkqLyAtOS44ICogTjY0X1NDQUxFX0ZBQ1RPUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qdmlzY29zaXR5Ki8gMC4wNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qd2F0ZXJIZWlnaHQqLyBXQVRFUl9IRUlHSFR9OwoKICB1c2JFbmFibGVkID0gVFJVRTsKICB1c2JSZXN1bHQgPSAwOwoKICBmcmFtZUNvdW50ZXJMYXN0VGltZSA9IDA7CiAgZnJhbWVDb3VudGVyQ3VyRnJhbWVzID0gMDsKICB0b3RhbFVwZGF0ZXMgPSAwOwogIHByb2ZBdmdDaGFyYWN0ZXJzID0gMDsKICBwcm9mQXZnUGh5c2ljcyA9IDA7CiAgcHJvZkF2Z0RyYXcgPSAwOwogIHByb2ZBdmdQYXRoID0gMDsKCiAgbG9nZ2luZ1RyYWNlID0gRkFMU0U7CgogIHR3b0N5Y2xlTW9kZSA9IEZBTFNFOwogIHJlbmRlck1vZGVTZXR0aW5nID0gVG9vbkZsYXRTaGFkaW5nUmVuZGVyTW9kZTsKICBuZWFyUGxhbmUgPSBERUZBVUxUX05FQVJQTEFORTsKICBmYXJQbGFuZSA9IERFRkFVTFRfRkFSUExBTkU7CiAgVmVjM2RfaW5pdCgmdmlld1BvcywgMC4wRiwgMC4wRiwgLTQwMC4wRik7CiAgVmVjM2RfaW5pdCgmdmlld1JvdCwgMC4wRiwgMC4wRiwgMC4wRik7CiAgSW5wdXRfaW5pdCgmaW5wdXQpOwoKICBHYW1lX2luaXQoZ2FyZGVuX21hcF9kYXRhLCBHQVJERU5fTUFQX0NPVU5ULCAmcGh5c1dvcmxkRGF0YSk7CgogIGludmFyaWFudChHQVJERU5fTUFQX0NPVU5UIDw9IE1BWF9XT1JMRF9PQkpFQ1RTKTsKCiAgZ2FtZSA9IEdhbWVfZ2V0KCk7CgogIGdhbWUtPnBhdGhmaW5kaW5nR3JhcGggPSAmZ2FyZGVuX21hcF9ncmFwaDsKICBnYW1lLT5wYXRoZmluZGluZ1N0YXRlID0gJmdhcmRlbl9tYXBfZ3JhcGhfcGF0aGZpbmRpbmdfc3RhdGU7CgogIGxhc3RGcmFtZVRpbWUgPSBDVVJfVElNRV9NUygpOwoKICBmb3IgKGkgPSAwOyBpIDwgTUFYX1RSQUNFX0VWRU5UX1RZUEU7ICsraSkgewogICAgcHJvZmlsaW5nQXZlcmFnZXNbaV0gPSAwOwogICAgcHJvZmlsaW5nQWNjdW11bGF0ZWRbaV0gPSAwOwogICAgcHJvZmlsaW5nQ291bnRzW2ldID0gMDsKICB9CgojaWZkZWYgRUQ2NAogIC8vIHN0YXJ0IGEgdGhyZWFkIHRvIHdhdGNoIHRoZSB0b3RhbFVwZGF0ZXMgdmFsdWUKICAvLyBpZiBpdCBkb2Vzbid0IGNoYW5nZSBlYWNoIHNlY29uZCwgd2UndmUgY3Jhc2hlZAogIGVkNjRTdGFydFdhdGNoZG9nVGhyZWFkKCZ0b3RhbFVwZGF0ZXMsIDEwMDApOwoKICBkZWJ1Z1ByaW50ZlN5bmMoImdldE1vZGVsRGlzcGxheUxpc3QgYXQgJXBcbiIsIGdldE1vZGVsRGlzcGxheUxpc3QpOwojZW5kaWYKCiAgZGVidWdQcmludGYoImdvb2QgbW9ybmluZ1xuIik7Cn0KCnZvaWQgZGVidWdQcmludFZlYzNkKGludCB4LCBpbnQgeSwgY2hhciogbGFiZWwsIFZlYzNkKiB2ZWMpIHsKICBjaGFyIGNvbmJ1ZlsxMDBdOwogIG51RGViQ29uVGV4dFBvcygwLCB4LCB5KTsKICBzcHJpbnRmKGNvbmJ1ZiwgIiVzIHslNS4wZiwlNS4wZiwlNS4wZn0iLCBsYWJlbCwgdmVjLT54LCB2ZWMtPnksIHZlYy0+eik7CiAgbnVEZWJDb25DUHV0cygwLCBjb25idWYpOwp9Cgp2b2lkIGRlYnVnUHJpbnRGbG9hdChpbnQgeCwgaW50IHksIGNoYXIqIGZvcm1hdCwgZmxvYXQgdmFsdWUpIHsKICBjaGFyIGNvbmJ1ZlsxMDBdOwogIG51RGViQ29uVGV4dFBvcygwLCB4LCB5KTsKICBzcHJpbnRmKGNvbmJ1ZiwgZm9ybWF0LCB2YWx1ZSk7CiAgbnVEZWJDb25DUHV0cygwLCBjb25idWYpOwp9CgojaWZkZWYgTlVfREVCVUcKdm9pZCB0cmFjZVJDUCgpIHsKICBpbnQgaTsKICBmbG9hdCBsb25nZXN0UkRQVGFza1RpbWUgPSAwOwogIGZsb2F0IGxvbmdlc3RSU1BUYXNrVGltZSA9IDA7CiAgLy8gczY0IHJldHJhY2VUaW1lOwoKICAvLyByZXRyYWNlVGltZSA9IG51RGViVGFza1BlcmZQdHItPnJldHJhY2VUaW1lOwogIC8vIGRlYnVnUHJpbnRmKCJydD0lZiAiLCByZXRyYWNlVGltZSAvICgxMDAwMDAwLjApKTsKICBmb3IgKGkgPSAwOyBpIDwgbnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza0NudDsgaSsrKSB7CiAgICAvLyBkZWJ1Z1ByaW50ZigKICAgIC8vICAgICAiW3QlZDogc3Q9JWYgcnNwPSVmLHJkcD0lZl0gIiwgaSwKICAgIC8vICAgICAobnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza1RpbWVbaV0ucnNwU3RhcnQgKSAvIDEwMDAuMCwKICAgIC8vICAgICAobnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza1RpbWVbaV0ucnNwRW5kIC0KICAgIC8vICAgICAgbnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza1RpbWVbaV0ucnNwU3RhcnQpIC8KICAgIC8vICAgICAgICAgMTAwMC4wLAogICAgLy8gICAgIChudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVtpXS5yZHBFbmQgLQogICAgLy8gICAgICBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVtpXS5yc3BTdGFydCkgLwogICAgLy8gICAgICAgICAxMDAwLjApOwoKICAgIC8vIHB1bGxlZCBvdXQgdG8gYSB2YXJpYWJsZSBzbyB0aGUgbW9kZXJuIGNvbXBpbGVyIGRvZXNuJ3QKICAgIC8vIGdlbmVyYXRlIGJyb2tlbiBjb2RlCiAgICBOVURlYlRhc2tUaW1lIGdmeFRhc2tUaW1lID0gbnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza1RpbWVbaV07CgogICAgVHJhY2VfYWRkRXZlbnQoUlNQVGFza1RyYWNlRXZlbnQsIGdmeFRhc2tUaW1lLnJzcFN0YXJ0IC8gMTAwMC4wZiwKICAgICAgICAgICAgICAgICAgIGdmeFRhc2tUaW1lLnJzcEVuZCAvIDEwMDAuMGYpOwoKICAgIFRyYWNlX2FkZEV2ZW50KFJEUFRhc2tUcmFjZUV2ZW50LCBnZnhUYXNrVGltZS5yc3BTdGFydCAvIDEwMDAuMGYsCiAgICAgICAgICAgICAgICAgICBnZnhUYXNrVGltZS5yZHBFbmQgLyAxMDAwLjBmKTsKCiAgICAvLyBsb25nZXN0UkRQVGFza1RpbWUgPSBNQVgobG9uZ2VzdFJEUFRhc2tUaW1lLCAoKGdmeFRhc2tUaW1lLnJzcEVuZCkgLwogICAgLy8gMTAwMC4wZiAtCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGdmeFRhc2tUaW1lLnJkcFN0YXJ0IC8KICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAwLjBmKSkpOwogICAgbG9uZ2VzdFJEUFRhc2tUaW1lID0KICAgICAgICBNQVgobG9uZ2VzdFJEUFRhc2tUaW1lLAogICAgICAgICAgICAoKGdmeFRhc2tUaW1lLnJkcEVuZCkgLyAxMDAwLjBmIC0gKGdmeFRhc2tUaW1lLnJzcEVuZCAvIDEwMDAuMGYpKSk7CiAgICBsb25nZXN0UlNQVGFza1RpbWUgPSBNQVgoCiAgICAgICAgbG9uZ2VzdFJTUFRhc2tUaW1lLAogICAgICAgICgoZ2Z4VGFza1RpbWUucnNwRW5kKSAvIDEwMDAuMGYgLSAoZ2Z4VGFza1RpbWUucnNwU3RhcnQgLyAxMDAwLjBmKSkpOwogIH0KICAvLyBkZWJ1Z1ByaW50ZigiXG4iKTsKICBwcm9maWxpbmdBY2N1bXVsYXRlZFtSRFBUYXNrVHJhY2VFdmVudF0gKz0gbG9uZ2VzdFJEUFRhc2tUaW1lOwogIHByb2ZpbGluZ0NvdW50c1tSRFBUYXNrVHJhY2VFdmVudF0rKzsKICBwcm9maWxpbmdBY2N1bXVsYXRlZFtSU1BUYXNrVHJhY2VFdmVudF0gKz0gbG9uZ2VzdFJTUFRhc2tUaW1lOwogIHByb2ZpbGluZ0NvdW50c1tSU1BUYXNrVHJhY2VFdmVudF0rKzsKfQojZW5kaWYKCi8qIE1ha2UgdGhlIGRpc3BsYXkgbGlzdCBhbmQgYWN0aXZhdGUgdGhlIHRhc2sgKi8Kdm9pZCBtYWtlREwwMCgpIHsKICBHYW1lKiBnYW1lOwogIER5bmFtaWMqIGR5bmFtaWNwOwogIGludCBjb25zb2xlT2Zmc2V0OwogIGZsb2F0IGN1clRpbWU7CiAgaW50IGk7CiAgZmxvYXQgcHJvZlN0YXJ0RHJhdywgcHJvZkVuZERyYXcsIHByb2ZTdGFydERlYnVnRHJhdzsKI2lmIERFQlVHCiAgY2hhciBjb25idWZbMTAwXTsKI2VuZGlmCgogIGdhbWUgPSBHYW1lX2dldCgpOwogIGNvbnNvbGVPZmZzZXQgPSAyMDsKCiAgY3VyVGltZSA9IENVUl9USU1FX01TKCk7CiAgZnJhbWVDb3VudGVyQ3VyRnJhbWVzKys7CgogIHByb2ZTdGFydERyYXcgPSBjdXJUaW1lOwoKICBUcmFjZV9hZGRFdmVudChGcmFtZVRyYWNlRXZlbnQsIGN1clRpbWUsIGN1clRpbWUgKyAxNik7CgogIGlmIChjdXJUaW1lIC0gZnJhbWVDb3VudGVyTGFzdFRpbWUgPj0gMTAwMC4wKSB7CiAgICBmcmFtZUNvdW50ZXJMYXN0RnJhbWVzID0gZnJhbWVDb3VudGVyQ3VyRnJhbWVzOwogICAgZnJhbWVDb3VudGVyQ3VyRnJhbWVzID0gMDsKICAgIGZyYW1lQ291bnRlckxhc3RUaW1lICs9IDEwMDAuMDsKICB9CgogIC8qIFNwZWNpZnkgdGhlIGRpc3BsYXkgbGlzdCBidWZmZXIgKi8KICBkeW5hbWljcCA9ICZnZnhfZHluYW1pY1tnZnhfZ3Rhc2tfbm9dOwogIGdsaXN0cCA9ICZnZnhfZ2xpc3RbZ2Z4X2d0YXNrX25vXVswXTsKCiAgLyogSW5pdGlhbGl6ZSBSQ1AgKi8KICBnZnhSQ1BJbml0KCk7CgovKiBDbGVhciB0aGUgZnJhbWUgYW5kIFotYnVmZmVyICovCiNpZiBSRU5ERVJFUl9GQUtFX0dST1VORAogIGdmeENsZWFyQ2ZiKEdQQUNLX1JHQkE1NTUxKDExMiwgMTU4LCAxMjIsIDEpKTsKI2Vsc2UKICBnZnhDbGVhckNmYihHUEFDS19SR0JBNTU1MSgwLCAwLCAwLCAxKSk7CiNlbmRpZgoKICBGcnVzdHVtX3NldENhbUludGVybmFscygmZnJ1c3R1bSwgZm92eSwgYXNwZWN0LCBuZWFyUGxhbmUsIGZhclBsYW5lKTsKCiAgLyogcHJvamVjdGlvbiwgdmlld2luZywgbW9kZWxpbmcgbWF0cml4IHNldCAqLwogIGd1UGVyc3BlY3RpdmUoJmR5bmFtaWNwLT5wcm9qZWN0aW9uLCAmcGVyc3BOb3JtLCBmb3Z5LCBhc3BlY3QsIG5lYXJQbGFuZSwKICAgICAgICAgICAgICAgIGZhclBsYW5lLCAxLjApOwogIGdTUFBlcnNwTm9ybWFsaXplKGdsaXN0cCsrLCBwZXJzcE5vcm0pOwoKICAvLyBnU1BDbGlwUmF0aW8oZ2xpc3RwKyssIEZSVVNUUkFUSU9fNCk7CgogIEZydXN0dW1fc2V0Q2FtRGVmKCZmcnVzdHVtLCAmZ2FtZS0+dmlld1BvcywgJmdhbWUtPnZpZXdUYXJnZXQsICZ1cFZlY3Rvcik7CgogIGlmIChnYW1lLT5mcmVlVmlldykgewogICAgZ3VQb3NpdGlvbigmZHluYW1pY3AtPmNhbWVyYSwKICAgICAgICAgICAgICAgdmlld1JvdC54LCAgLy8gcm9sbAogICAgICAgICAgICAgICB2aWV3Um90LnksICAvLyBwaXRjaAogICAgICAgICAgICAgICB2aWV3Um90LnosICAvLyB5YXcKICAgICAgICAgICAgICAgMS4wRiwgICAgICAgLy8gc2NhbGUKICAgICAgICAgICAgICAgdmlld1Bvcy54LCB2aWV3UG9zLnksIHZpZXdQb3Mueik7CiAgfSBlbHNlIHsKICAgIGd1TG9va0F0KCZkeW5hbWljcC0+Y2FtZXJhLCBnYW1lLT52aWV3UG9zLngsIGdhbWUtPnZpZXdQb3MueSwKICAgICAgICAgICAgIGdhbWUtPnZpZXdQb3MueiwgZ2FtZS0+dmlld1RhcmdldC54LCBnYW1lLT52aWV3VGFyZ2V0LnksCiAgICAgICAgICAgICBnYW1lLT52aWV3VGFyZ2V0LnosIHVwVmVjdG9yLngsIHVwVmVjdG9yLnksIHVwVmVjdG9yLnopOwogIH0KCiAgZHJhd1dvcmxkT2JqZWN0cyhkeW5hbWljcCk7CgogIGdEUEZ1bGxTeW5jKGdsaXN0cCsrKTsKICBnU1BFbmREaXNwbGF5TGlzdChnbGlzdHArKyk7CgogIGludmFyaWFudCgoZ2xpc3RwIC0gZ2Z4X2dsaXN0W2dmeF9ndGFza19ub10pIDwgR0ZYX0dMSVNUX0xFTik7CgogIC8qIEFjdGl2YXRlIHRoZSB0YXNrIGFuZCAobWF5YmUpCiAgICAgc3dpdGNoIGRpc3BsYXkgYnVmZmVycyAqLwogIG51R2Z4VGFza1N0YXJ0KAogICAgICAmZ2Z4X2dsaXN0W2dmeF9ndGFza19ub11bMF0sCiAgICAgIChzMzIpKGdsaXN0cCAtIGdmeF9nbGlzdFtnZnhfZ3Rhc2tfbm9dKSAqIHNpemVvZihHZngpLAogICAgICByZW5kZXJNb2RlU2V0dGluZyA9PSBXaXJlZnJhbWVSZW5kZXJNb2RlID8gTlVfR0ZYX1VDT0RFX0wzREVYMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogTlVfR0ZYX1VDT0RFX0YzREVYLAogICAgICAvLyBzd2FwIGJ1ZmZlciBpZiB3ZSBkb24ndCBhbHNvIGhhdmUgYW5vdGhlciB0YXNrIHRvIHNob3cgZGVidWcgc3R1ZmYKICAgICAgY29uc29sZVNob3duIHx8IG51UGVyZkJhclNob3duID8gTlVfU0NfTk9TV0FQQlVGRkVSIDogTlVfU0NfU1dBUEJVRkZFUik7CgogIC8qIFN3aXRjaCBkaXNwbGF5IGxpc3QgYnVmZmVycyAqLwogIGdmeF9ndGFza19ubyBePSAxOwoKICBwcm9mRW5kRHJhdyA9IENVUl9USU1FX01TKCk7CiAgVHJhY2VfYWRkRXZlbnQoRHJhd1RyYWNlRXZlbnQsIHByb2ZTdGFydERyYXcsIHByb2ZFbmREcmF3KTsKICBnYW1lLT5wcm9mVGltZURyYXcgKz0gcHJvZkVuZERyYXcgLSBwcm9mU3RhcnREcmF3OwoKICBwcm9mU3RhcnREZWJ1Z0RyYXcgPSBDVVJfVElNRV9NUygpOwoKICBpZiAobnVQZXJmQmFyU2hvd24pCiAgICBudURlYlRhc2tQZXJmQmFyMSgxLCAyMDAsIE5VX1NDX1NXQVBCVUZGRVIpOwoKLy8gZGVidWcgdGV4dCBvdmVybGF5CiNpZiBERUJVRwogIGludmFyaWFudCghKGNvbnNvbGVTaG93biAmJiBudVBlcmZCYXJTaG93bikpOwoKICBpZiAoY29udFBhdHRlcm4gJiAweDEpIHsKICAgIG51RGViQ29uQ2xlYXIoMCk7CiAgICBjb25zb2xlT2Zmc2V0ID0gMjE7CgogICAgaWYgKGdhbWUtPmZyZWVWaWV3KSB7CiAgICAgIGRlYnVnUHJpbnRWZWMzZCg0LCBjb25zb2xlT2Zmc2V0KyssICJ2aWV3UG9zIiwgJnZpZXdQb3MpOwogICAgfSBlbHNlIHsKICAgICAgc3dpdGNoIChjb25zb2xlTW9kZSkgewogICAgICAgIGNhc2UgQ09OU09MRV9TSE9XX0NQVV9QUk9GSUxJTkc6CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAiY2hhcj0lMy4yZm1zIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mQXZnQ2hhcmFjdGVycyk7CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAicGh5cz0lMy4yZm1zIiwgcHJvZkF2Z1BoeXNpY3MpOwogICAgICAgICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgImRyYXc9JTMuMmZtcyIsIHByb2ZBdmdEcmF3KTsKICAgICAgICAgIGRlYnVnUHJpbnRGbG9hdCgwLCBjb25zb2xlT2Zmc2V0KyssICJwYXRoPSUzLjJmbXMiLCBwcm9mQXZnUGF0aCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIENPTlNPTEVfU0hPV19QUk9GSUxJTkc6CiAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgIHNwcmludGYoY29uYnVmLCAiY3B1PSUzLjJmLHJzcD0lMy4yZixyZHA9JTMuMmYiLAogICAgICAgICAgICAgICAgICBwcm9maWxpbmdBdmVyYWdlc1tNYWluQ1BVVHJhY2VFdmVudF0sCiAgICAgICAgICAgICAgICAgIHByb2ZpbGluZ0F2ZXJhZ2VzW1JTUFRhc2tUcmFjZUV2ZW50XSwKICAgICAgICAgICAgICAgICAgcHJvZmlsaW5nQXZlcmFnZXNbUkRQVGFza1RyYWNlRXZlbnRdKTsKICAgICAgICAgIG51RGViQ29uQ1B1dHMoMCwgY29uYnVmKTsKICAgICAgICAgIG51RGViQ29uVGV4dFBvcygwLCA0LCBjb25zb2xlT2Zmc2V0KyspOwogICAgICAgICAgc3ByaW50Zihjb25idWYsICJPcHRNZXNoU3ViZGl2PSVkIiwgb3B0aW9uc1tPcHRNZXNoU3ViZGl2XSk7CiAgICAgICAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIENPTlNPTEVfU0hPV19UUkFDSU5HOgogICAgICAgICAgbnVEZWJDb25UZXh0UG9zKDAsIDQsIGNvbnNvbGVPZmZzZXQrKyk7CiAgICAgICAgICBzcHJpbnRmKGNvbmJ1ZiwgInRyYWNlIHJlYz0lZCxsb2c9JWQsZXZzPSVkLGxnZD0lZCIsCiAgICAgICAgICAgICAgICAgIFRyYWNlX2lzVHJhY2luZygpLCBsb2dnaW5nVHJhY2UsIFRyYWNlX2dldEV2ZW50c0NvdW50KCksCiAgICAgICAgICAgICAgICAgIGxvZ1RyYWNlU3RhcnRPZmZzZXQpOwogICAgICAgICAgbnVEZWJDb25DUHV0cygwLCBjb25idWYpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfUkNQX1RBU0tTOgojaWZkZWYgTlVfREVCVUcKICAgICAgICB7CiAgICAgICAgICBpbnQgdHNrSWR4OwogICAgICAgICAgZm9yICh0c2tJZHggPSAwOyB0c2tJZHggPCBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrQ250OyB0c2tJZHgrKykgewogICAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgICAgc3ByaW50Zihjb25idWYsICJbdCVkOiAgcnNwPSUuMmYscmRwPSUuMmZdICIsIHRza0lkeCwKICAgICAgICAgICAgICAgICAgICAobnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza1RpbWVbdHNrSWR4XS5yc3BFbmQgLQogICAgICAgICAgICAgICAgICAgICBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVt0c2tJZHhdLnJzcFN0YXJ0KSAvCiAgICAgICAgICAgICAgICAgICAgICAgIDEwMDAuMCwKICAgICAgICAgICAgICAgICAgICAobnVEZWJUYXNrUGVyZlB0ci0+Z2Z4VGFza1RpbWVbdHNrSWR4XS5yZHBFbmQgLQogICAgICAgICAgICAgICAgICAgICBudURlYlRhc2tQZXJmUHRyLT5nZnhUYXNrVGltZVt0c2tJZHhdLnJzcFN0YXJ0KSAvCiAgICAgICAgICAgICAgICAgICAgICAgIDEwMDAuMCk7CiAgICAgICAgICAgIG51RGViQ29uQ1B1dHMoMCwgY29uYnVmKTsKICAgICAgICAgIH0KICAgICAgICB9CiNlbmRpZgogICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ09OU09MRV9TSE9XX0NVTExJTkc6CiAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgIHNwcmludGYoY29uYnVmLCAiY3VsbGVkPSVkIiwgb2JqZWN0c0N1bGxlZCk7CiAgICAgICAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIENPTlNPTEVfU0hPV19DQU1FUkE6CiAgICAgICAgICBjb25zb2xlT2Zmc2V0ID0gMTY7ICAvLyBuZWVkcyBleHRyYSBzcGFjZQogICAgICAgICAgZGVidWdQcmludFZlYzNkKDQsIGNvbnNvbGVPZmZzZXQrKywgInZpZXdQb3MiLCAmZ2FtZS0+dmlld1Bvcyk7CiAgICAgICAgICBkZWJ1Z1ByaW50VmVjM2QoNCwgY29uc29sZU9mZnNldCsrLCAidmlld1RhcmdldCIsICZnYW1lLT52aWV3VGFyZ2V0KTsKICAgICAgICAgIGRlYnVnUHJpbnRGbG9hdCg0LCBjb25zb2xlT2Zmc2V0KyssICJ2aWV3Wm9vbT0lMS4xZiIsIGdhbWUtPnZpZXdab29tKTsKICAgICAgICAgIGRlYnVnUHJpbnRGbG9hdCg0LCBjb25zb2xlT2Zmc2V0KyssICJmb3Z5PSUzLjFmIiwgZm92eSk7CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAibmVhclBsYW5lPSUuMmYiLCBuZWFyUGxhbmUpOwogICAgICAgICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgImZhclBsYW5lPSUuMmYiLCBmYXJQbGFuZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfRUQ2NExPR19JTlRFUk5BTFM6CiNpZmRlZiBFRDY0CiAgICAgICAgICB1c2JMb2dnZXJHZXRTdGF0ZSgmdXNiTG9nZ2VyU3RhdGUpOwogICAgICAgICAgbnVEZWJDb25UZXh0UG9zKDAsIDQsIGNvbnNvbGVPZmZzZXQrKyk7CiAgICAgICAgICBzcHJpbnRmKGNvbmJ1ZiwgInVzYj0lZCxyZXM9JWQsc3Q9JWQsaWQ9JWQsbXFzej0lZCIsIHVzYkVuYWJsZWQsCiAgICAgICAgICAgICAgICAgIHVzYlJlc3VsdCwgdXNiTG9nZ2VyU3RhdGUuZmlmb1dyaXRlU3RhdGUsCiAgICAgICAgICAgICAgICAgIHVzYkxvZ2dlclN0YXRlLm1zZ0lELCB1c2JMb2dnZXJTdGF0ZS5tc2dRU2l6ZSk7CiAgICAgICAgICBudURlYkNvbkNQdXRzKDAsIGNvbmJ1Zik7CiAgICAgICAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgICAgICAgIHNwcmludGYoY29uYnVmLCAib2ZmPSU0ZCxmbHU9JWQsb3ZmPSVkLGRvbj0lZCxlcnI9JWQiLAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS51c2JMb2dnZXJPZmZzZXQsCiAgICAgICAgICAgICAgICAgIHVzYkxvZ2dlclN0YXRlLnVzYkxvZ2dlckZsdXNoaW5nLAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS51c2JMb2dnZXJPdmVyZmxvdywgdXNiTG9nZ2VyU3RhdGUuY291bnREb25lLAogICAgICAgICAgICAgICAgICB1c2JMb2dnZXJTdGF0ZS53cml0ZUVycm9yKTsKICAgICAgICAgIG51RGViQ29uQ1B1dHMoMCwgY29uYnVmKTsKI2VuZGlmCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBDT05TT0xFX1NIT1dfU09VTkQ6CiAgICAgICAgICBkZWJ1Z1ByaW50RmxvYXQoNCwgY29uc29sZU9mZnNldCsrLCAic25kPSUuMGYiLCBzbmROdW1iZXIpOwogICAgICAgICAgZGVidWdQcmludEZsb2F0KDQsIGNvbnNvbGVPZmZzZXQrKywgInBpdGNoPSVmIiwgc25kUGl0Y2gpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0gIC8vIGVuZCBzd2l0Y2gKICAgIH0gICAgLy8gZW5kIGlmIChmcmVlVmlldykKICAgIGRlYnVnUHJpbnRGbG9hdCg0LCBjb25zb2xlT2Zmc2V0KyssICJmcmFtZT0lMy4yZm1zIiwKICAgICAgICAgICAgICAgICAgICAxMDAwLjAgLyBmcmFtZUNvdW50ZXJMYXN0RnJhbWVzKTsKCiAgICBudURlYkNvblRleHRQb3MoMCwgNCwgY29uc29sZU9mZnNldCsrKTsKICAgIHNwcmludGYoY29uYnVmLCAicmV0cmFjZT0lbHUiLCBudVNjUmV0cmFjZUNvdW50ZXIpOwogICAgbnVEZWJDb25DUHV0cygwLCBjb25idWYpOwogICAgZGVidWdQcmludFZlYzNkKDQsIGNvbnNvbGVPZmZzZXQrKywgInBvcyIsICZnYW1lLT5wbGF5ZXIuZ29vc2UtPnBvc2l0aW9uKTsKICB9IGVsc2UgewogICAgbnVEZWJDb25UZXh0UG9zKDAsIDksIDI0KTsKICAgIG51RGViQ29uQ1B1dHMoMCwgIkNvbnRyb2xsZXIxIG5vdCBjb25uZWN0ZWQiKTsKICB9CgogIC8qIERpc3BsYXkgY2hhcmFjdGVycyBvbiB0aGUgZnJhbWUgYnVmZmVyICovCiAgbnVEZWJDb25EaXNwKE5VX1NDX1NXQVBCVUZGRVIpOwojZW5kaWYgIC8vIGVuZCBvZiAjaWYgREVCVUcKCiAgVHJhY2VfYWRkRXZlbnQoRGVidWdEcmF3VHJhY2VFdmVudCwgcHJvZlN0YXJ0RGVidWdEcmF3LCBDVVJfVElNRV9NUygpKTsKfQoKdm9pZCBjaGVja0RlYnVnQ29udHJvbHMoR2FtZSogZ2FtZSkgewogIC8qIENoYW5nZSB0aGUgZGlzcGxheSBwb3NpdGlvbiBieSBzdGljayBkYXRhICovCiAgdmlld1JvdC54ID0gY29udGRhdGEtPnN0aWNrX3k7ICAvLyByb3QgYXJvdW5kIHgKICB2aWV3Um90LnkgPSBjb250ZGF0YS0+c3RpY2tfeDsgIC8vIHJvdCBhcm91bmQgeQoKICAvKiBUaGUgcmV2ZXJzZSByb3RhdGlvbiBieSB0aGUgQSBidXR0b24gKi8KICBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIEFfQlVUVE9OKSB7CiAgICB0d29DeWNsZU1vZGUgPSAhdHdvQ3ljbGVNb2RlOwogIH0KICAvKiBDaGFuZ2UgdGhlIG1vdmluZyBzcGVlZCB3aXRoIHVwL2Rvd24gYnV0dG9ucyBvZiBjb250cm9sbGVyICovCiAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIFVfSlBBRCkKICAgIHZpZXdQb3MueiArPSAxMC4wOwogIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBEX0pQQUQpCiAgICB2aWV3UG9zLnogLT0gMTAuMDsKCiAgaWYgKHZpZXdQb3MueiA8ICg2MDAuMCAtIGZhclBsYW5lKSkgewogICAgLyogSXQgY29tZXMgYmFjayBuZWFyIGlmIGl0IGdvZXMgdG9vIGZhciAqLwogICAgdmlld1Bvcy56ID0gNjAwLjAgLSBuZWFyUGxhbmU7CiAgfSBlbHNlIGlmICh2aWV3UG9zLnogPiAoNjAwLjAgLSBuZWFyUGxhbmUpKSB7CiAgICAvKiBJdCBnb2VzIGJhY2sgZmFyIGlmIGl0IGNvbWVzIHRvbyBuZWFyICovCiAgICB2aWV3UG9zLnogPSA2MDAuMCAtIGZhclBsYW5lOwogIH0KCiAgLyogPDwgWFkgYXhpcyBzaGlmdCBwcm9jZXNzID4+ICovCiAgLyogTW92ZSBsZWZ0L3JpZ2h0IHdpdGggbGVmdC9yaWdodCBidXR0b25zIG9mIGNvbnRyb2xsZXIgKi8KICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgTF9KUEFEKQogICAgdmlld1Bvcy54IC09IDEuMDsKICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgUl9KUEFEKQogICAgdmlld1Bvcy54ICs9IDEuMDsKICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgVV9DQlVUVE9OUykKICAgIHZpZXdQb3MueSAtPSAzMC4wOwogIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBEX0NCVVRUT05TKQogICAgdmlld1Bvcy55ICs9IDMwLjA7CiAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIExfQ0JVVFRPTlMpCiAgICB2aWV3UG9zLnggLT0gMzAuMDsKICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgUl9DQlVUVE9OUykKICAgIHZpZXdQb3MueCArPSAzMC4wOwp9Cgp2b2lkIGxvZ1RyYWNlQ2h1bmsoKSB7CiAgaW50IGk7CiAgaW50IHByaW50ZWRGaXJzdEl0ZW07CiNpZiBFRDY0CgogIHByaW50ZWRGaXJzdEl0ZW0gPSBGQUxTRTsKICBpZiAodXNiTG9nZ2VyQnVmZmVyUmVtYWluaW5nKCkgPCAxMjApIHsKICAgIHJldHVybjsKICB9CiAgZGVidWdQcmludGYoIlRSQUNFPVsiKTsKICBmb3IgKGkgPSBsb2dUcmFjZVN0YXJ0T2Zmc2V0OyBpIDwgVHJhY2VfZ2V0RXZlbnRzQ291bnQoKTsgaSsrKSB7CiAgICAvLyBjaGVjayB3ZSBoYXZlIHJvb20gZm9yIG1vcmUgZGF0YQogICAgaWYgKHVzYkxvZ2dlckJ1ZmZlclJlbWFpbmluZygpIDwgNDApIHsKICAgICAgYnJlYWs7CiAgICB9CiAgICBkZWJ1Z1ByaW50ZigiJXNbJS4yZiwlLjJmLCVkXSIsIHByaW50ZWRGaXJzdEl0ZW0gPyAiLCIgOiAiIiwKICAgICAgICAgICAgICAgIHRyYWNlRXZlbnRzW2ldLnN0YXJ0LCB0cmFjZUV2ZW50c1tpXS5lbmQsIHRyYWNlRXZlbnRzW2ldLnR5cGUpOwogICAgcHJpbnRlZEZpcnN0SXRlbSA9IFRSVUU7CiAgICBsb2dUcmFjZVN0YXJ0T2Zmc2V0ID0gaTsKICB9CiAgZGVidWdQcmludGYoIl1cbiIpOwoKICBpZiAobG9nVHJhY2VTdGFydE9mZnNldCA9PSBUcmFjZV9nZXRFdmVudHNDb3VudCgpIC0gMSkgewogICAgLy8gZmluaXNoZWQKICAgIGxvZ2dpbmdUcmFjZSA9IEZBTFNFOwogICAgbG9nVHJhY2VTdGFydE9mZnNldCA9IDA7CiAgICBUcmFjZV9jbGVhcigpOwogIH0KI2VuZGlmCn0KCnZvaWQgc3RhcnRSZWNvcmRpbmdUcmFjZSgpIHsKICBUcmFjZV9jbGVhcigpOwogIFRyYWNlX3N0YXJ0KCk7Cn0KCnZvaWQgZmluaXNoUmVjb3JkaW5nVHJhY2UoKSB7CiAgVHJhY2Vfc3RvcCgpOwogIGxvZ2dpbmdUcmFjZSA9IFRSVUU7Cn0KCi8qIFRoZSBnYW1lIHByb2dyZXNzaW5nIHByb2Nlc3MgZm9yIHN0YWdlIDAgKi8Kdm9pZCB1cGRhdGVHYW1lMDAodm9pZCkgewogIGludCBpOwogIEdhbWUqIGdhbWU7CgogIHRvdGFsVXBkYXRlcysrOwojaWZkZWYgTlVfREVCVUcKICB0cmFjZVJDUCgpOyAgLy8gcmVjb3JkIHJjcCBwZXJmIGZyb20gcHJldiBmcmFtZQojZW5kaWYKCiAgZ2FtZSA9IEdhbWVfZ2V0KCk7CgogIFZlYzJkX29yaWdpbigmaW5wdXQuZGlyZWN0aW9uKTsKCiAgLyogRGF0YSByZWFkaW5nIG9mIGNvbnRyb2xsZXIgMSAqLwogIG51Q29udERhdGFHZXRFeChjb250ZGF0YSwgMCk7CiAgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBTVEFSVF9CVVRUT04pIHsKICAgIC8vIHJlbmRlck1vZGVTZXR0aW5nKys7CiAgICAvLyBpZiAocmVuZGVyTW9kZVNldHRpbmcgPj0gTUFYX1JFTkRFUl9NT0RFKSB7CiAgICAvLyAgIHJlbmRlck1vZGVTZXR0aW5nID0gMDsKICAgIC8vIH0KICAgIHJlbmRlck1vZGVTZXR0aW5nID0gcmVuZGVyTW9kZVNldHRpbmcgPT0gVG9vbkZsYXRTaGFkaW5nUmVuZGVyTW9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBXaXJlZnJhbWVSZW5kZXJNb2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFRvb25GbGF0U2hhZGluZ1JlbmRlck1vZGU7CiAgfQoKI2lmIFNPVU5EX1RFU1QKICBzb3VuZENoZWNrKCk7CiNlbmRpZgogIGlmIChjb250ZGF0YVswXS50cmlnZ2VyICYgWl9UUklHKSB7CiAgICBnYW1lLT5mcmVlVmlldyA9ICFnYW1lLT5mcmVlVmlldzsKICB9CiAgaWYgKGdhbWUtPmZyZWVWaWV3KSB7CiAgICBjaGVja0RlYnVnQ29udHJvbHMoZ2FtZSk7CiAgfSBlbHNlIHsKICAgIC8vIG5vcm1hbCBjb250cm9scwogICAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIEFfQlVUVE9OKSB7CiAgICAgIGlucHV0LnJ1biA9IFRSVUU7CiAgICB9CiAgICBpZiAoY29udGRhdGFbMF0uYnV0dG9uICYgQl9CVVRUT04pIHsKICAgICAgaW5wdXQucGlja3VwID0gVFJVRTsKICAgIH0KICAgIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBMX1RSSUcpIHsKICAgICAgaW5wdXQuem9vbUluID0gVFJVRTsKICAgIH0KICAgIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBSX1RSSUcpIHsKICAgICAgaW5wdXQuem9vbU91dCA9IFRSVUU7CiAgICB9CgogICAgaWYgKGNvbnRkYXRhWzBdLmJ1dHRvbiAmIExfSlBBRCkgewogICAgICBpZiAoY29uc29sZVNob3duKSB7CiAgICAgICAgY29uc29sZU1vZGUgLT0gMTsKICAgICAgICBpZiAoY29uc29sZU1vZGUgPCAwKSB7CiAgICAgICAgICBjb25zb2xlTW9kZSA9IE1BWF9DT05TT0xFX01PREUgLSAxOwogICAgICAgICAgY29uc29sZVNob3duID0gRkFMU0U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGVTaG93biA9IFRSVUU7CiAgICAgIH0KICAgIH0KICAgIGlmIChjb250ZGF0YVswXS5idXR0b24gJiBSX0pQQUQpIHsKICAgICAgaWYgKGNvbnNvbGVTaG93bikgewogICAgICAgIGNvbnNvbGVNb2RlICs9IDE7CiAgICAgICAgaWYgKGNvbnNvbGVNb2RlID09IE1BWF9DT05TT0xFX01PREUpIHsKICAgICAgICAgIGNvbnNvbGVNb2RlID0gMDsKICAgICAgICAgIGNvbnNvbGVTaG93biA9IEZBTFNFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlU2hvd24gPSBUUlVFOwogICAgICB9CiAgICB9CgogICAgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBEX0NCVVRUT05TKSB7CiAgICAgIG9wdGlvbnNbT3B0TWVzaFN1YmRpdl0gPSAhb3B0aW9uc1tPcHRNZXNoU3ViZGl2XTsKICAgIH0KCiNpZiBTT1VORF9URVNUCiAgICBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIExfQ0JVVFRPTlMpIHsKICAgICAgLy8gVE9ETzogdHJpZ2dlciB0aGlzIHNvdW5kIGZyb20gaW5zaWRlIHRoZSBwbGF5ZXIgc3RhdGUgbWFjaGluZQogICAgICBzbmROdW1iZXIgPSBSQU5EKGhvbmtTb3VuZFJhbmdlKSArIEhvbmsxU291bmQ7CiAgICAgIC8vIHRoaXMgY3V0cyBvdXQgYW55IHByZXZpb3VzIGhvbmsKICAgICAgLy8gVE9ETzogcHJldmVudCBvdmVybGFwcGluZyBob25rcz8KICAgICAgaWYgKHNuZEhhbmRsZSAhPSAwKSB7CiAgICAgICAgbnVBdVN0bFNuZFBsYXllclNuZFN0b3Aoc25kSGFuZGxlLCAwKTsKICAgICAgfQogICAgICAvLyBzbmRQaXRjaCA9IDEwLjU7ICAvLyBoYW5kIHR1bmVkLi4uIHRoZSBzYW1wbGUgdHVuaW5nIGlzIGZ1Y2tlZAogICAgICBzbmRQaXRjaCA9IDA7CiAgICAgIHNuZEhhbmRsZSA9IG51QXVTdGxTbmRQbGF5ZXJQbGF5KHNuZE51bWJlcik7CiAgICAgIG51QXVTdGxTbmRQbGF5ZXJTZXRTbmRQaXRjaChzbmRIYW5kbGUsIHNuZFBpdGNoKTsKICAgIH0KCiAgICBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIFJfQ0JVVFRPTlMpIHsKICAgICAgaWYgKHNlcVBsYXlpbmcpIHsKICAgICAgICBkZWJ1Z1ByaW50Zigic3RvcCBwbGF5aW5nIHNlcVxuIik7CiAgICAgICAgbnVBdVN0bFNlcVBsYXllclN0b3AoLypmcmFtZXMgdW50aWwgc3RvcCovIDApOwogICAgICAgIHNlcVBsYXlpbmcgPSBGQUxTRTsKICAgICAgICBzZXFIYW5kbGUgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGRlYnVnUHJpbnRmKCJzdGFydCBwbGF5aW5nIHNlcVxuIik7CiAgICAgICAgc2VxSGFuZGxlID0gbnVBdVN0bFNlcVBsYXllclBsYXkoLypzZXEgcGxheWVyIG51bSovIE5VX0FVX1NFUV9QTEFZRVIwKTsKICAgICAgICBudUF1U3RsU2VxUGxheWVyU2V0TWFzdGVyVm9sKC8qbWF4Ki8gMHg3ZmZmKTsKICAgICAgICBNdXNIYW5kbGVTZXRWb2x1bWUoc2VxSGFuZGxlLCAvKiAyMDAlICovIDB4MTAwKTsKICAgICAgICBzZXFQbGF5aW5nID0gVFJVRTsKICAgICAgfQogICAgfQojZW5kaWYKCiAgICBpbnB1dC5kaXJlY3Rpb24ueCA9IC1jb250ZGF0YS0+c3RpY2tfeCAvIDYxLjBGOwogICAgaW5wdXQuZGlyZWN0aW9uLnkgPSBjb250ZGF0YS0+c3RpY2tfeSAvIDYzLjBGOwogICAgaWYgKGZhYnNmKGlucHV0LmRpcmVjdGlvbi54KSA8IENPTlRST0xMRVJfREVBRF9aT05FKQogICAgICBpbnB1dC5kaXJlY3Rpb24ueCA9IDA7CiAgICBpZiAoZmFic2YoaW5wdXQuZGlyZWN0aW9uLnkpIDwgQ09OVFJPTExFUl9ERUFEX1pPTkUpCiAgICAgIGlucHV0LmRpcmVjdGlvbi55ID0gMDsKICAgIGlmIChWZWMyZF9sZW5ndGgoJmlucHV0LmRpcmVjdGlvbikgPiAxLjBGKSB7CiAgICAgIFZlYzJkX25vcm1hbGlzZSgmaW5wdXQuZGlyZWN0aW9uKTsKICAgIH0KICB9CgogIEdhbWVfdXBkYXRlKCZpbnB1dCk7CgojaWYgTE9HX1BST0ZJTElORwogIGRlYnVnUHJpbnRmKCJjcHU9JTMuMmYscnNwPSUzLjJmLHJkcD0lMy4yZlxuIiwKICAgICAgICAgICAgICBwcm9maWxpbmdBdmVyYWdlc1tNYWluQ1BVVHJhY2VFdmVudF0sCiAgICAgICAgICAgICAgcHJvZmlsaW5nQXZlcmFnZXNbUlNQVGFza1RyYWNlRXZlbnRdLAogICAgICAgICAgICAgIHByb2ZpbGluZ0F2ZXJhZ2VzW1JEUFRhc2tUcmFjZUV2ZW50XSk7CiNlbmRpZgoKI2lmIExPR19UUkFDRVMKICBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIFVfQ0JVVFRPTlMpIHsKICAgIGlmICghbG9nZ2luZ1RyYWNlKSB7CiAgICAgIGlmICghVHJhY2VfaXNUcmFjaW5nKCkpIHsKICAgICAgICBzdGFydFJlY29yZGluZ1RyYWNlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmluaXNoUmVjb3JkaW5nVHJhY2UoKTsKICAgICAgfQogICAgfQogIH0KICBpZiAoVHJhY2VfZ2V0RXZlbnRzQ291bnQoKSA9PSBUUkFDRV9FVkVOVF9CVUZGRVJfU0laRSkgewogICAgZmluaXNoUmVjb3JkaW5nVHJhY2UoKTsKICB9CiNlbmRpZgogIGlmICh1c2JFbmFibGVkKSB7CiNpZiBMT0dfVFJBQ0VTCiAgICBpZiAobG9nZ2luZ1RyYWNlKSB7CiAgICAgIGxvZ1RyYWNlQ2h1bmsoKTsKICAgIH0KI2VuZGlmCiAgfQoKICAvLyBpZiAodG90YWxVcGRhdGVzICUgNjAgPT0gMCkgewogIC8vICAgZGVidWdQcmludGZTeW5jKCJyZXRyYWNlPSVkXG4iLCBudVNjUmV0cmFjZUNvdW50ZXIpOwogIC8vIH0KCiAgaWYgKHVzYkVuYWJsZWQpIHsKI2lmIExPR19UUkFDRVMKICAgIGlmIChsb2dnaW5nVHJhY2UpIHsKICAgICAgbG9nVHJhY2VDaHVuaygpOwogICAgfQojZW5kaWYKI2lmZGVmIEVENjQKICAgIHVzYlJlc3VsdCA9IGVkNjRBc3luY0xvZ2dlckZsdXNoKCk7CiNlbmRpZgogIH0KCiAgaWYgKHRvdGFsVXBkYXRlcyAlIDYwID09IDApIHsKICAgIC8vIGNhbGMgYXZlcmFnZXMgZm9yIGxhc3QgNjAgdXBkYXRlcwogICAgcHJvZkF2Z0NoYXJhY3RlcnMgPSBnYW1lLT5wcm9mVGltZUNoYXJhY3RlcnMgLyA2MDsKICAgIGdhbWUtPnByb2ZUaW1lQ2hhcmFjdGVycyA9IDAuMGY7CiAgICBwcm9mQXZnUGh5c2ljcyA9IGdhbWUtPnByb2ZUaW1lUGh5c2ljcyAvIDYwOwogICAgZ2FtZS0+cHJvZlRpbWVQaHlzaWNzID0gMC4wZjsKICAgIHByb2ZBdmdEcmF3ID0gZ2FtZS0+cHJvZlRpbWVEcmF3IC8gNjA7CiAgICBnYW1lLT5wcm9mVGltZURyYXcgPSAwLjBmOwogICAgcHJvZkF2Z1BhdGggPSBnYW1lLT5wcm9mVGltZVBhdGggLyA2MDsKICAgIGdhbWUtPnByb2ZUaW1lUGF0aCA9IDAuMGY7CgogICAgZm9yIChpID0gMDsgaSA8IE1BWF9UUkFDRV9FVkVOVF9UWVBFOyArK2kpIHsKICAgICAgcHJvZmlsaW5nQXZlcmFnZXNbaV0gPQogICAgICAgICAgcHJvZmlsaW5nQ291bnRzW2ldID09IDAKICAgICAgICAgICAgICA/IDAKICAgICAgICAgICAgICA6IHByb2ZpbGluZ0FjY3VtdWxhdGVkW2ldIC8gKGZsb2F0KXByb2ZpbGluZ0NvdW50c1tpXTsKICAgICAgcHJvZmlsaW5nQWNjdW11bGF0ZWRbaV0gPSAwOwogICAgICBwcm9maWxpbmdDb3VudHNbaV0gPSAwOwogICAgfQogIH0KfQoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIFRoZSBjYWxsLWJhY2sgZnVuY3Rpb24KCiAgcGVuZGluZ0dmeCB3aGljaCBpcyBwYXNzZWQgZnJvbSBOdXN5c3RlbSBhcyB0aGUgYXJndW1lbnQgb2YgdGhlIGNhbGwtYmFjawogIGZ1bmN0aW9uIGlzIHRoZSB0b3RhbCBvZiBSQ1AgdGFza3MgdGhhdCBhcmUgY3VycmVudGx5IHByb2Nlc3NpbmcgYW5kCiAgd2FpdGluZyBmb3IgdGhlIHByb2Nlc3MuCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8Kdm9pZCBzdGFnZTAwKGludCBwZW5kaW5nR2Z4KSB7CiAgZmxvYXQgc2tpcHBlZEdmeFRpbWUsIHByb2ZTdGFydFVwZGF0ZSwgcHJvZlN0YXJ0RnJhbWUsIHByb2ZFbmRGcmFtZTsKICAvLyBhbiBleHRyYSB0YXNrIGlzIHVzZWQgdG8gZHJhdyBkZWJ1ZyBzdHVmZgogIGludCBnZnhUYXNrc1Blck1ha2VETCA9IGNvbnNvbGVTaG93biB8fCBudVBlcmZCYXJTaG93biA/IDIgOiAxOwogIHByb2ZTdGFydEZyYW1lID0gQ1VSX1RJTUVfTVMoKTsKICAvKiBQcm92aWRlIHRoZSBkaXNwbGF5IHByb2Nlc3MgaWYgbiBvciBsZXNzIFJDUCB0YXNrcyBhcmUgcHJvY2Vzc2luZyBvcgogICAgICAgIHdhaXRpbmcgZm9yIHRoZSBwcm9jZXNzLiAgKi8KICBpZiAobnVTY1JldHJhY2VDb3VudGVyICUgRlJBTUVfU0tJUCA9PSAwKSB7CiAgICBpZiAocGVuZGluZ0dmeCA8IGdmeFRhc2tzUGVyTWFrZURMICogMikgewogICAgICBtYWtlREwwMCgpOwogICAgICBUcmFjZV9hZGRFdmVudChNYWluTWFrZURpc3BsYXlMaXN0VHJhY2VFdmVudCwgcHJvZlN0YXJ0RnJhbWUsCiAgICAgICAgICAgICAgICAgICAgIENVUl9USU1FX01TKCkpOwogICAgfSBlbHNlIHsKICAgICAgc2tpcHBlZEdmeFRpbWUgPSBDVVJfVElNRV9NUygpOwogICAgICBUcmFjZV9hZGRFdmVudChTa2lwcGVkR2Z4VGFza1RyYWNlRXZlbnQsIHNraXBwZWRHZnhUaW1lLAogICAgICAgICAgICAgICAgICAgICBza2lwcGVkR2Z4VGltZSArIDE2LjBmKTsKICAgICAgcHJvZmlsaW5nQ291bnRzW1NraXBwZWRHZnhUYXNrVHJhY2VFdmVudF0rKzsKICAgICAgLy8gZGVidWdQcmludGZTeW5jKCJkcm9wcGVkIGZyYW1lICVkXG4iLCBudVNjUmV0cmFjZUNvdW50ZXIgLyBGUkFNRV9TS0lQKTsKICAgIH0KICB9CgogIHByb2ZTdGFydFVwZGF0ZSA9IENVUl9USU1FX01TKCk7CiAgLyogVGhlIHByb2Nlc3Mgb2YgZ2FtZSBwcm9ncmVzcyAgKi8KICB1cGRhdGVHYW1lMDAoKTsKICBwcm9mRW5kRnJhbWUgPSBDVVJfVElNRV9NUygpOwogIFRyYWNlX2FkZEV2ZW50KE1haW5DUFVUcmFjZUV2ZW50LCBwcm9mU3RhcnRGcmFtZSwgcHJvZkVuZEZyYW1lKTsKICBUcmFjZV9hZGRFdmVudChNYWluVXBkYXRlVHJhY2VFdmVudCwgcHJvZlN0YXJ0VXBkYXRlLCBwcm9mRW5kRnJhbWUpOwogIHByb2ZpbGluZ0FjY3VtdWxhdGVkW01haW5DUFVUcmFjZUV2ZW50XSArPSBwcm9mRW5kRnJhbWUgLSBwcm9mU3RhcnRGcmFtZTsKICBwcm9maWxpbmdDb3VudHNbTWFpbkNQVVRyYWNlRXZlbnRdKys7Cn0KCnR5cGVkZWYgZW51bSBMaWdodGluZ1R5cGUgewogIFN1bkxpZ2h0aW5nLAogIE9ubHlBbWJpZW50TGlnaHRpbmcsCiAgTUFYX0xJR0hUSU5HX1RZUEUKfSBMaWdodGluZ1R5cGU7CgpMaWdodGluZ1R5cGUgZ2V0TGlnaHRpbmdUeXBlKEdhbWVPYmplY3QqIG9iaikgewogIHN3aXRjaCAob2JqLT5tb2RlbFR5cGUpIHsKICAgIGNhc2UgVW5pRmxvb3JNb2RlbDoKICAgICAgcmV0dXJuIE9ubHlBbWJpZW50TGlnaHRpbmc7CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gU3VuTGlnaHRpbmc7CiAgfQp9CgppbnQgZ2V0QW5pbWF0aW9uTnVtTW9kZWxNZXNoUGFydHMoTW9kZWxUeXBlIG1vZGVsVHlwZSkgewogIHN3aXRjaCAobW9kZWxUeXBlKSB7CiAgICBjYXNlIEdvb3NlTW9kZWw6CiAgICAgIHJldHVybiBNQVhfR09PU0VfTUVTSF9UWVBFOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIE1BWF9DSEFSQUNURVJfTUVTSF9UWVBFOwogIH0KfQoKaW50IHNob3VsZExlcnBBbmltYXRpb24oTW9kZWxUeXBlIG1vZGVsVHlwZSkgewogIHN3aXRjaCAobW9kZWxUeXBlKSB7CiAgICBjYXNlIEdvb3NlTW9kZWw6CiAgICAgIHJldHVybiBUUlVFOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIEZBTFNFOwogIH0KfQoKQW5pbWF0aW9uUmFuZ2UqIGdldEN1cnJlbnRBbmltYXRpb25SYW5nZShHYW1lT2JqZWN0KiBvYmopIHsKICBpZiAob2JqLT5tb2RlbFR5cGUgPT0gR29vc2VNb2RlbCkgewogICAgcmV0dXJuICZnb29zZV9hbmltX3Jhbmdlc1soR29vc2VBbmltVHlwZSlvYmotPmFuaW1TdGF0ZS0+c3RhdGVdOwogIH0gZWxzZSB7CiAgICByZXR1cm4gJmNoYXJhY3Rlcl9hbmltX3Jhbmdlc1soQ2hhcmFjdGVyQW5pbVR5cGUpb2JqLT5hbmltU3RhdGUtPnN0YXRlXTsKICB9Cn0KCkFuaW1hdGlvbkZyYW1lKiBnZXRBbmltRGF0YShNb2RlbFR5cGUgbW9kZWxUeXBlKSB7CiAgc3dpdGNoIChtb2RlbFR5cGUpIHsKICAgIGNhc2UgR29vc2VNb2RlbDoKICAgICAgcmV0dXJuIGdvb3NlX2FuaW1fZGF0YTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBjaGFyYWN0ZXJfYW5pbV9kYXRhOwogIH0KfQoKdm9pZCBkcmF3V29ybGRPYmplY3RzKER5bmFtaWMqIGR5bmFtaWNwKSB7CiAgR2FtZSogZ2FtZTsKICBHYW1lT2JqZWN0KiBvYmo7CiAgaW50IGksIHVzZVpCdWZmZXJpbmc7CiAgaW50IG1vZGVsTWVzaElkeDsKICBpbnQgbW9kZWxNZXNoUGFydHM7CiAgR2Z4KiBtb2RlbERpc3BsYXlMaXN0OwogIEFuaW1hdGlvbkZyYW1lIGFuaW1GcmFtZTsKICBBbmltYXRpb25JbnRlcnBvbGF0aW9uIGFuaW1JbnRlcnA7CiAgQW5pbWF0aW9uUmFuZ2UqIGN1ckFuaW1SYW5nZTsKICBBbmltYXRpb25Cb25lQXR0YWNobWVudCogYXR0YWNobWVudDsKICBSZW5kZXJlclNvcnREaXN0YW5jZSogdmlzaWJsZU9iakRpc3RhbmNlOwogIGludCogd29ybGRPYmplY3RzVmlzaWJpbGl0eTsKICBpbnQqIGludGVyc2VjdGluZ09iamVjdHM7CiAgaW50IHZpc2libGVPYmplY3RzQ291bnQ7CiAgaW50IHZpc2liaWxpdHlDdWxsZWQgPSAwOwogIGZsb2F0IHByb2ZTdGFydFNvcnQsIHByb2ZTdGFydEl0ZXIsIHByb2ZTdGFydEFuaW07CiAgLy8gZmxvYXQgcHJvZlN0YXJ0QW5pbUxlcnA7CiAgZmxvYXQgcHJvZlN0YXJ0RnJ1c3R1bTsKCiAgZ2FtZSA9IEdhbWVfZ2V0KCk7CiAgd29ybGRPYmplY3RzVmlzaWJpbGl0eSA9IChpbnQqKW1hbGxvYyhnYW1lLT53b3JsZE9iamVjdHNDb3VudCAqIHNpemVvZihpbnQpKTsKICBpbnZhcmlhbnQod29ybGRPYmplY3RzVmlzaWJpbGl0eSk7CgogIHByb2ZTdGFydEZydXN0dW0gPSBDVVJfVElNRV9NUygpOwogIHZpc2liaWxpdHlDdWxsZWQgPSBSZW5kZXJlcl9jdWxsVmlzaWJpbGl0eSgKICAgICAgZ2FtZS0+d29ybGRPYmplY3RzLCBnYW1lLT53b3JsZE9iamVjdHNDb3VudCwgd29ybGRPYmplY3RzVmlzaWJpbGl0eSwKICAgICAgJmZydXN0dW0sIGdhcmRlbl9tYXBfYm91bmRzKTsKICBvYmplY3RzQ3VsbGVkID0gdmlzaWJpbGl0eUN1bGxlZDsKCiAgVHJhY2VfYWRkRXZlbnQoRHJhd0ZydXN0dW1DdWxsVHJhY2VFdmVudCwgcHJvZlN0YXJ0RnJ1c3R1bSwgQ1VSX1RJTUVfTVMoKSk7CgogIC8vIG9ubHkgYWxsb2Mgc3BhY2UgZm9yIG51bSB2aXNpYmxlIG9iamVjdHMKICB2aXNpYmxlT2JqZWN0c0NvdW50ID0gZ2FtZS0+d29ybGRPYmplY3RzQ291bnQgLSB2aXNpYmlsaXR5Q3VsbGVkOwogIHZpc2libGVPYmpEaXN0YW5jZSA9IChSZW5kZXJlclNvcnREaXN0YW5jZSopbWFsbG9jKAogICAgICAodmlzaWJsZU9iamVjdHNDb3VudCkgKiBzaXplb2YoUmVuZGVyZXJTb3J0RGlzdGFuY2UpKTsKICBpbnZhcmlhbnQodmlzaWJsZU9iakRpc3RhbmNlKTsKCiAgcHJvZlN0YXJ0U29ydCA9IENVUl9USU1FX01TKCk7CiAgUmVuZGVyZXJfc29ydFZpc2libGVPYmplY3RzKGdhbWUtPndvcmxkT2JqZWN0cywgZ2FtZS0+d29ybGRPYmplY3RzQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkT2JqZWN0c1Zpc2liaWxpdHksIHZpc2libGVPYmplY3RzQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVPYmpEaXN0YW5jZSwgJmdhbWUtPnZpZXdQb3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhcmRlbl9tYXBfYm91bmRzKTsKICBUcmFjZV9hZGRFdmVudChEcmF3U29ydFRyYWNlRXZlbnQsIHByb2ZTdGFydFNvcnQsIENVUl9USU1FX01TKCkpOwoKICAvLyBib29sZWFuIG9mIHdoZXRoZXIgYW4gb2JqZWN0IGludGVyc2VjdHMgYW5vdGhlciAoZm9yIHogYnVmZmVyCiAgLy8gb3B0aW1pemF0aW9uKQogIGludGVyc2VjdGluZ09iamVjdHMgPSAoaW50KiltYWxsb2MoKHZpc2libGVPYmplY3RzQ291bnQpICogc2l6ZW9mKGludCkpOwogIGludmFyaWFudChpbnRlcnNlY3RpbmdPYmplY3RzKTsKICBSZW5kZXJlcl9jYWxjSW50ZXJzZWN0aW5nKGludGVyc2VjdGluZ09iamVjdHMsIHZpc2libGVPYmplY3RzQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlT2JqRGlzdGFuY2UsIGdhcmRlbl9tYXBfYm91bmRzKTsKCiAgZ1NQQ2xlYXJHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIDB4RkZGRkZGRkYpOwogIGdEUFNldEN5Y2xlVHlwZShnbGlzdHArKywgdHdvQ3ljbGVNb2RlID8gR19DWUNfMkNZQ0xFIDogR19DWUNfMUNZQ0xFKTsKCiAgLy8gei1idWZmZXJlZCwgYW50aWFsaWFzZWQgdHJpYW5nbGVzCiAgLy8KI2lmICFSRU5ERVJFUl9QQUlOVEVSU19BTEdPUklUSE0KICBnRFBTZXRSZW5kZXJNb2RlKGdsaXN0cCsrLCBHX1JNX0FBX1pCX09QQV9TVVJGLCBHX1JNX0FBX1pCX09QQV9TVVJGMik7CiAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX1pCVUZGRVIpOwojZW5kaWYKCiAgZ1NQU2V0TGlnaHRzMChnbGlzdHArKywgYW1iX2xpZ2h0KTsKCiAgLy8gc2V0dXAgdmlldwogIGdTUE1hdHJpeChnbGlzdHArKywgT1NfSzBfVE9fUEhZU0lDQUwoJihkeW5hbWljcC0+cHJvamVjdGlvbikpLAogICAgICAgICAgICBHX01UWF9QUk9KRUNUSU9OIHwgR19NVFhfTE9BRCB8IEdfTVRYX05PUFVTSCk7CiAgZ1NQTWF0cml4KGdsaXN0cCsrLCBPU19LMF9UT19QSFlTSUNBTCgmKGR5bmFtaWNwLT5jYW1lcmEpKSwKICAgICAgICAgICAgR19NVFhfTU9ERUxWSUVXIHwgR19NVFhfTE9BRCB8IEdfTVRYX05PUFVTSCk7CgogIHByb2ZTdGFydEl0ZXIgPSBDVVJfVElNRV9NUygpOwogIC8vIHJlbmRlciB3b3JsZCBvYmplY3RzCiAgZm9yIChpID0gMDsgaSA8IHZpc2libGVPYmplY3RzQ291bnQ7IGkrKykgewogICAgLy8gaXRlcmF0ZSB2aXNpYmxlIG9iamVjdHMgZmFyIHRvIG5lYXIKICAgIG9iaiA9ICh2aXNpYmxlT2JqRGlzdGFuY2UgKyBpKS0+b2JqOwoKICAgIC8vIHJlbmRlciB0ZXh0dXJlZCBtb2RlbHMKICAgIGdTUFRleHR1cmUoZ2xpc3RwKyssIDB4ODAwMCwgMHg4MDAwLCAwLCBHX1RYX1JFTkRFUlRJTEUsIEdfT04pOwogICAgZ0RQU2V0VGV4dHVyZUZpbHRlcihnbGlzdHArKywgR19URl9CSUxFUlApOwogICAgZ0RQU2V0VGV4dHVyZVBlcnNwKGdsaXN0cCsrLCBHX1RQX1BFUlNQKTsKCiAgICBzd2l0Y2ggKHJlbmRlck1vZGVTZXR0aW5nKSB7CiAgICAgIGNhc2UgVGV4dHVyZUFuZExpZ2h0aW5nUmVuZGVyTW9kZToKICAgICAgY2FzZSBMaWdodGluZ05vVGV4dHVyZVJlbmRlck1vZGU6CiAgICAgICAgaWYgKGdldExpZ2h0aW5nVHlwZShvYmopID09IE9ubHlBbWJpZW50TGlnaHRpbmcpIHsKICAgICAgICAgIGdTUFNldExpZ2h0czAoZ2xpc3RwKyssIGFtYl9saWdodCk7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnU1BTZXRMaWdodHMxKGdsaXN0cCsrLCBzdW5fbGlnaHQpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KCiAgICBnU1BDbGVhckdlb21ldHJ5TW9kZShnbGlzdHArKywgMHhGRkZGRkZGRik7CiAgICBpbnZhcmlhbnQoaSA8IHZpc2libGVPYmplY3RzQ291bnQpOwogICAgaW52YXJpYW50KG9iaiAhPSBOVUxMKTsKICAgIGlmICghUkVOREVSRVJfUEFJTlRFUlNfQUxHT1JJVEhNIHx8ICAvLyBhbHdheXMgeiBidWZmZXIKCiAgICAgICAgaW50ZXJzZWN0aW5nT2JqZWN0c1tpXSB8fAogICAgICAgIC8vIGFuaW1hdGVkIGdhbWUgb2JqZWN0cyBoYXZlIGNvbmNhdmUgc2hhcGVzLCBuZWVkIHogYnVmZmVyaW5nCiAgICAgICAgUmVuZGVyZXJfaXNBbmltYXRlZEdhbWVPYmplY3Qob2JqKSkgewogICAgICBpZiAoIVJFTkRFUkVSX1BBSU5URVJTX0FMR09SSVRITSB8fCAgLy8gYWx3YXlzIHogYnVmZmVyCiAgICAgICAgICBSZW5kZXJlcl9pc1pCdWZmZXJlZEdhbWVPYmplY3Qob2JqKSkgewogICAgICAgIGlmIChBTlRJQUxJQVNJTkcpIHsKICAgICAgICAgIGdEUFNldFJlbmRlck1vZGUoZ2xpc3RwKyssIEdfUk1fQUFfWkJfT1BBX1NVUkYsIEdfUk1fQUFfWkJfT1BBX1NVUkYyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9aQl9PUEFfU1VSRiwgR19STV9aQl9PUEFfU1VSRjIpOwogICAgICAgIH0KICAgICAgICBnU1BTZXRHZW9tZXRyeU1vZGUoZ2xpc3RwKyssIEdfWkJVRkZFUik7CiAgICAgIH0gZWxzZSAvKmlmIChSZW5kZXJlcl9pc1pXcml0ZUdhbWVPYmplY3Qob2JqKSkqLyB7CiAgICAgICAgaWYgKEFOVElBTElBU0lORykgewogICAgICAgICAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9BQV9aVVBEX09QQV9TVVJGLAogICAgICAgICAgICAgICAgICAgICAgICAgICBHX1JNX0FBX1pVUERfT1BBX1NVUkYyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9aVVBEX09QQV9TVVJGLCBHX1JNX1pVUERfT1BBX1NVUkYyKTsKICAgICAgICB9CiAgICAgICAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX1pCVUZGRVIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoQU5USUFMSUFTSU5HKSB7CiAgICAgICAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9BQV9PUEFfU1VSRiwgR19STV9BQV9PUEFfU1VSRjIpOwogICAgICB9IGVsc2UgewogICAgICAgIGdEUFNldFJlbmRlck1vZGUoZ2xpc3RwKyssIEdfUk1fT1BBX1NVUkYsIEdfUk1fT1BBX1NVUkYyKTsKICAgICAgfQogICAgfQoKICAgIHN3aXRjaCAocmVuZGVyTW9kZVNldHRpbmcpIHsKICAgICAgY2FzZSBUb29uRmxhdFNoYWRpbmdSZW5kZXJNb2RlOgogICAgICAgIC8vIGlmIChSZW5kZXJlcl9pc0xpdEdhbWVPYmplY3Qob2JqKSkgewogICAgICAgIC8vICAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX1NIQURFIHwgR19MSUdIVElORyB8IEdfQ1VMTF9CQUNLKTsKICAgICAgICAvLyB9IGVsc2UgewogICAgICAgIC8vICAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX1NIQURFIHwgR19DVUxMX0JBQ0spOwogICAgICAgIC8vIH0KCiAgICAgICAgZ1NQU2V0R2VvbWV0cnlNb2RlKGdsaXN0cCsrLCBHX0NVTExfQkFDSyk7CiAgICAgICAgZ0RQU2V0Q29tYmluZU1vZGUoZ2xpc3RwKyssIEdfQ0NfREVDQUxSR0IsIEdfQ0NfREVDQUxSR0IpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFRleHR1cmVOb0xpZ2h0aW5nUmVuZGVyTW9kZToKICAgICAgY2FzZSBXaXJlZnJhbWVSZW5kZXJNb2RlOgogICAgICAgIGdTUFNldEdlb21ldHJ5TW9kZShnbGlzdHArKywgR19TSEFERSB8IEdfU0hBRElOR19TTU9PVEggfCBHX0NVTExfQkFDSyk7CiAgICAgICAgZ0RQU2V0Q29tYmluZU1vZGUoZ2xpc3RwKyssIEdfQ0NfREVDQUxSR0IsIEdfQ0NfREVDQUxSR0IpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFRleHR1cmVBbmRMaWdodGluZ1JlbmRlck1vZGU6CiAgICAgICAgZ1NQU2V0R2VvbWV0cnlNb2RlKAogICAgICAgICAgICBnbGlzdHArKywgR19TSEFERSB8IEdfU0hBRElOR19TTU9PVEggfCBHX0xJR0hUSU5HIHwgR19DVUxMX0JBQ0spOwogICAgICAgIGdEUFNldENvbWJpbmVNb2RlKGdsaXN0cCsrLCBHX0NDX01PRFVMQVRFUkdCLCBHX0NDX01PRFVMQVRFUkdCKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBMaWdodGluZ05vVGV4dHVyZVJlbmRlck1vZGU6CiAgICAgICAgZ1NQU2V0R2VvbWV0cnlNb2RlKAogICAgICAgICAgICBnbGlzdHArKywgR19TSEFERSB8IEdfU0hBRElOR19TTU9PVEggfCBHX0xJR0hUSU5HIHwgR19DVUxMX0JBQ0spOwogICAgICAgIGdEUFNldENvbWJpbmVNb2RlKGdsaXN0cCsrLCBHX0NDX1NIQURFLCBHX0NDX1NIQURFKTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDogIC8vIE5vVGV4dHVyZU5vTGlnaHRpbmdSZW5kZXJNb2RlCiAgICAgICAgZ0RQU2V0UHJpbUNvbG9yKGdsaXN0cCsrLCAwLCAwLCAvKnIqLyAxODAsIC8qZyovIDE4MCwgLypiKi8gMTgwLAogICAgICAgICAgICAgICAgICAgICAgICAvKmEqLyAyNTUpOwogICAgICAgIGdTUFNldEdlb21ldHJ5TW9kZShnbGlzdHArKywgR19DVUxMX0JBQ0spOwogICAgICAgIGdEUFNldENvbWJpbmVNb2RlKGdsaXN0cCsrLCBHX0NDX1BSSU1JVElWRSwgR19DQ19QUklNSVRJVkUpOwogICAgfQoKICAgIC8vIHNldCB0aGUgdHJhbnNmb3JtIGluIHdvcmxkIHNwYWNlIGZvciB0aGUgZ2FtZW9iamVjdCB0byByZW5kZXIKICAgIGd1UG9zaXRpb24oJmR5bmFtaWNwLT5vYmpUcmFuc2Zvcm1zW2ldLAogICAgICAgICAgICAgICAwLjBGLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3QgeAogICAgICAgICAgICAgICBvYmotPnJvdGF0aW9uLnksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3QgeQogICAgICAgICAgICAgICAwLjBGLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3QgegogICAgICAgICAgICAgICBtb2RlbFR5cGVzUHJvcGVydGllc1tvYmotPm1vZGVsVHlwZV0uc2NhbGUsICAvLyBzY2FsZQogICAgICAgICAgICAgICBvYmotPnBvc2l0aW9uLngsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3MgeAogICAgICAgICAgICAgICBvYmotPnBvc2l0aW9uLnksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3MgeQogICAgICAgICAgICAgICBvYmotPnBvc2l0aW9uLnogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3MgegogICAgKTsKICAgIGdTUE1hdHJpeCgKICAgICAgICBnbGlzdHArKywgT1NfSzBfVE9fUEhZU0lDQUwoJihkeW5hbWljcC0+b2JqVHJhbnNmb3Jtc1tpXSkpLAogICAgICAgIEdfTVRYX01PREVMVklFVyB8IEdfTVRYX01VTCB8IEdfTVRYX1BVU0gpOyAgLy8gZ2FtZW9iamVjdCBtdHggc3RhcnQKCiAgICBpZiAoUmVuZGVyZXJfaXNBbmltYXRlZEdhbWVPYmplY3Qob2JqKSkgewogICAgICAvLyBjYXNlIGZvciBtdWx0aS1wYXJ0IG9iamVjdHMgdXNpbmcgcmlnaWQgYm9keSBhbmltYXRpb24KICAgICAgcHJvZlN0YXJ0QW5pbSA9IENVUl9USU1FX01TKCk7CgogICAgICBtb2RlbE1lc2hQYXJ0cyA9IGdldEFuaW1hdGlvbk51bU1vZGVsTWVzaFBhcnRzKG9iai0+bW9kZWxUeXBlKTsKICAgICAgY3VyQW5pbVJhbmdlID0gZ2V0Q3VycmVudEFuaW1hdGlvblJhbmdlKG9iaik7CiAgICAgIEFuaW1hdGlvbkludGVycG9sYXRpb25fY2FsYygmYW5pbUludGVycCwgb2JqLT5hbmltU3RhdGUsIGN1ckFuaW1SYW5nZSk7CgogICAgICBmb3IgKG1vZGVsTWVzaElkeCA9IDA7IG1vZGVsTWVzaElkeCA8IG1vZGVsTWVzaFBhcnRzOyArK21vZGVsTWVzaElkeCkgewogICAgICAgIC8vIHByb2ZTdGFydEFuaW1MZXJwID0gQ1VSX1RJTUVfTVMoKTsKICAgICAgICAvLyBsZXJwaW5nIHRha2VzIGFib3V0IDAuMm1zIHBlciBib25lCiAgICAgICAgaWYgKHNob3VsZExlcnBBbmltYXRpb24ob2JqLT5tb2RlbFR5cGUpKSB7CiAgICAgICAgICBBbmltYXRpb25GcmFtZV9sZXJwKAogICAgICAgICAgICAgICZhbmltSW50ZXJwLCAgLy8gcmVzdWx0IG9mIEFuaW1hdGlvbkludGVycG9sYXRpb25fY2FsYygpCiAgICAgICAgICAgICAgZ2V0QW5pbURhdGEoCiAgICAgICAgICAgICAgICAgIG9iai0+bW9kZWxUeXBlKSwgIC8vIHBvaW50ZXIgdG8gc3RhcnQgb2YgQW5pbWF0aW9uRnJhbWUgbGlzdAogICAgICAgICAgICAgIG1vZGVsTWVzaFBhcnRzLCAgICAgICAvLyBudW0gYm9uZXMgaW4gcmlnIHVzZWQgYnkgYW5pbURhdGEKICAgICAgICAgICAgICBtb2RlbE1lc2hJZHgsICAvLyBpbmRleCBvZiBib25lIGluIHJpZyB0byBwcm9kdWNlIHRyYW5zZm9ybSBmb3IKICAgICAgICAgICAgICAmYW5pbUZyYW1lICAgICAvLyB0aGUgcmVzdWx0YW50IGludGVycG9sYXRlZCBhbmltYXRpb24gZnJhbWUKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEFuaW1hdGlvbkZyYW1lX2dldCgKICAgICAgICAgICAgICAmYW5pbUludGVycCwgIC8vIHJlc3VsdCBvZiBBbmltYXRpb25JbnRlcnBvbGF0aW9uX2NhbGMoKQogICAgICAgICAgICAgIGdldEFuaW1EYXRhKAogICAgICAgICAgICAgICAgICBvYmotPm1vZGVsVHlwZSksICAvLyBwb2ludGVyIHRvIHN0YXJ0IG9mIEFuaW1hdGlvbkZyYW1lIGxpc3QKICAgICAgICAgICAgICBtb2RlbE1lc2hQYXJ0cywgICAgICAgLy8gbnVtIGJvbmVzIGluIHJpZyB1c2VkIGJ5IGFuaW1EYXRhCiAgICAgICAgICAgICAgbW9kZWxNZXNoSWR4LCAgLy8gaW5kZXggb2YgYm9uZSBpbiByaWcgdG8gcHJvZHVjZSB0cmFuc2Zvcm0gZm9yCiAgICAgICAgICAgICAgJmFuaW1GcmFtZSAgICAgLy8gdGhlIHJlc3VsdGFudCBpbnRlcnBvbGF0ZWQgYW5pbWF0aW9uIGZyYW1lCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAvLyBUcmFjZV9hZGRFdmVudChBbmltTGVycFRyYWNlRXZlbnQsIHByb2ZTdGFydEFuaW1MZXJwLCBDVVJfVElNRV9NUygpKTsKCiAgICAgICAgLy8gcHVzaCBtYXRyaXggd2l0aCB0aGUgYmxlbmRlciB0byBuNjQgY29vcmQgcm90YXRpb24sIHRoZW4gbXVsaXRwbHkKICAgICAgICAvLyBpdCBieSB0aGUgbW9kZWwncyByb3RhdGlvbiBhbmQgb2Zmc2V0CgogICAgICAgIC8vIHJvdGF0ZSBmcm9tIHotdXAgKGJsZW5kZXIpIHRvIHktdXAgKG9wZW5nbCkgY29vcmRzCiAgICAgICAgLy8gVE9ETzogbW92ZSBhcyBtYW55IG9mIHRoZXNlIHRyYW5zZm9ybWF0aW9ucyBhcyBwb3NzaWJsZSB0bwogICAgICAgIC8vIGJlIHByZWNvbXB1dGVkIGluIGFuaW1hdGlvbiBkYXRhCiAgICAgICAgZ3VSb3RhdGUoJmR5bmFtaWNwLT56VXBUb1lVcENvb3JkaW5hdGVzUm90YXRpb24sIC05MC4wZiwgMSwgMCwgMCk7CiAgICAgICAgZ1NQTWF0cml4KGdsaXN0cCsrLAogICAgICAgICAgICAgICAgICBPU19LMF9UT19QSFlTSUNBTCgmKGR5bmFtaWNwLT56VXBUb1lVcENvb3JkaW5hdGVzUm90YXRpb24pKSwKICAgICAgICAgICAgICAgICAgR19NVFhfTU9ERUxWSUVXIHwgR19NVFhfTVVMIHwgR19NVFhfUFVTSCk7CgogICAgICAgIGd1UG9zaXRpb24oJm9iai0+YW5pbVN0YXRlLT5hbmltTWVzaFRyYW5zZm9ybVttb2RlbE1lc2hJZHhdLAogICAgICAgICAgICAgICAgICAgYW5pbUZyYW1lLnJvdGF0aW9uLngsICAvLyByb2xsCiAgICAgICAgICAgICAgICAgICBhbmltRnJhbWUucm90YXRpb24ueSwgIC8vIHBpdGNoCiAgICAgICAgICAgICAgICAgICBhbmltRnJhbWUucm90YXRpb24ueiwgIC8vIHlhdwogICAgICAgICAgICAgICAgICAgMS4wRiwgICAgICAgICAgICAgICAgICAvLyBzY2FsZQogICAgICAgICAgICAgICAgICAgYW5pbUZyYW1lLnBvc2l0aW9uLngsICAvLyBwb3MgeAogICAgICAgICAgICAgICAgICAgYW5pbUZyYW1lLnBvc2l0aW9uLnksICAvLyBwb3MgeQogICAgICAgICAgICAgICAgICAgYW5pbUZyYW1lLnBvc2l0aW9uLnogICAvLyBwb3MgegogICAgICAgICk7CiAgICAgICAgZ1NQTWF0cml4KGdsaXN0cCsrLAogICAgICAgICAgICAgICAgICBPU19LMF9UT19QSFlTSUNBTCgKICAgICAgICAgICAgICAgICAgICAgICYob2JqLT5hbmltU3RhdGUtPmFuaW1NZXNoVHJhbnNmb3JtW21vZGVsTWVzaElkeF0pKSwKICAgICAgICAgICAgICAgICAgR19NVFhfTU9ERUxWSUVXIHwgR19NVFhfTVVMIHwgR19NVFhfTk9QVVNIKTsKCiAgICAgICAgZ1NQRGlzcGxheUxpc3QoZ2xpc3RwKyssIGdldE1lc2hEaXNwbGF5TGlzdEZvck1vZGVsTWVzaFBhcnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmotPm1vZGVsVHlwZSwgYW5pbUZyYW1lLm9iamVjdCkpOwoKICAgICAgICBhdHRhY2htZW50ID0gJm9iai0+YW5pbVN0YXRlLT5hdHRhY2htZW50OwogICAgICAgIGlmIChhdHRhY2htZW50LT5tb2RlbFR5cGUgIT0gTm9uZU1vZGVsICYmCiAgICAgICAgICAgIGF0dGFjaG1lbnQtPmJvbmVJbmRleCA9PSBtb2RlbE1lc2hJZHgpIHsKICAgICAgICAgIGd1UG9zaXRpb24oJm9iai0+YW5pbVN0YXRlLT5hdHRhY2htZW50VHJhbnNmb3JtLAogICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50LT5yb3RhdGlvbi54LCAgLy8gcm9sbAogICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50LT5yb3RhdGlvbi55LCAgLy8gcGl0Y2gKICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudC0+cm90YXRpb24ueiwgIC8vIHlhdwogICAgICAgICAgICAgICAgICAgICAxLjBGLCAgICAgICAgICAgICAgICAgICAgLy8gc2NhbGUKICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudC0+b2Zmc2V0LngsICAgIC8vIHBvcyB4CiAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQtPm9mZnNldC55LCAgICAvLyBwb3MgeQogICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50LT5vZmZzZXQueiAgICAgLy8gcG9zIHoKICAgICAgICAgICk7CiAgICAgICAgICBnU1BNYXRyaXgoZ2xpc3RwKyssCiAgICAgICAgICAgICAgICAgICAgT1NfSzBfVE9fUEhZU0lDQUwoJihvYmotPmFuaW1TdGF0ZS0+YXR0YWNobWVudFRyYW5zZm9ybSkpLAogICAgICAgICAgICAgICAgICAgIEdfTVRYX01PREVMVklFVyB8IEdfTVRYX01VTCB8IEdfTVRYX1BVU0gpOwogICAgICAgICAgbW9kZWxEaXNwbGF5TGlzdCA9IGdldE1vZGVsRGlzcGxheUxpc3QoYXR0YWNobWVudC0+bW9kZWxUeXBlLCAwKTsKICAgICAgICAgIGdTUERpc3BsYXlMaXN0KGdsaXN0cCsrLCBtb2RlbERpc3BsYXlMaXN0KTsKICAgICAgICAgIGdTUFBvcE1hdHJpeChnbGlzdHArKywgR19NVFhfTU9ERUxWSUVXKTsKICAgICAgICB9CgogICAgICAgIGdTUFBvcE1hdHJpeChnbGlzdHArKywgR19NVFhfTU9ERUxWSUVXKTsKICAgICAgfQogICAgICBUcmFjZV9hZGRFdmVudChEcmF3QW5pbVRyYWNlRXZlbnQsIHByb2ZTdGFydEFuaW0sIENVUl9USU1FX01TKCkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gY2FzZSBmb3Igc2ltcGxlIGdhbWVvYmplY3RzIHdpdGggbm8gbW92aW5nIHN1Yi1wYXJ0cwogICAgICBtb2RlbERpc3BsYXlMaXN0ID0gZ2V0TW9kZWxEaXNwbGF5TGlzdChvYmotPm1vZGVsVHlwZSwgb2JqLT5zdWJ0eXBlKTsKCiAgICAgIGdTUERpc3BsYXlMaXN0KGdsaXN0cCsrLCBtb2RlbERpc3BsYXlMaXN0KTsKICAgIH0KCiAgICBnU1BQb3BNYXRyaXgoZ2xpc3RwKyssIEdfTVRYX01PREVMVklFVyk7ICAvLyBnYW1lb2JqZWN0IG10eCBlbmQKCiAgICBnRFBQaXBlU3luYyhnbGlzdHArKyk7CiAgfQoKI2lmIERSQVdfU1BSSVRFUwogIHsKICAgIFZpZXdwb3J0RiB2aWV3cG9ydCA9IHswLCAwLCBTQ1JFRU5fV0QsIFNDUkVFTl9IVH07CiAgICBmbG9hdCB3aWR0aCA9IDY0OwogICAgZmxvYXQgaGVpZ2h0ID0gNjQ7CiAgICBWZWMzZCBjZW50ZXI7CiAgICBWZWMzZCBwcm9qZWN0ZWQ7CiAgICBNdHhGIG1vZGVsVmlld010eEY7CiAgICBNdHhGIHByb2plY3Rpb25NdHhGOwoKICAgIGd1TXR4TDJGKG1vZGVsVmlld010eEYsICZkeW5hbWljcC0+Y2FtZXJhKTsKICAgIGd1TXR4TDJGKHByb2plY3Rpb25NdHhGLCAmZHluYW1pY3AtPnByb2plY3Rpb24pOwogICAgZm9yIChpID0gMDsgaSA8IHZpc2libGVPYmplY3RzQ291bnQ7IGkrKykgewogICAgICBvYmogPSB2aXNpYmxlT2JqRGlzdGFuY2VbaV0ub2JqOwogICAgICBHYW1lX2dldE9iakNlbnRlcihvYmosICZjZW50ZXIpOwogICAgICBjZW50ZXIueSArPSA3NTsKICAgICAgaWYgKCFvYmotPmFuaW1TdGF0ZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHNjcmVlblByb2plY3QoJmNlbnRlciwgbW9kZWxWaWV3TXR4RiwgcHJvamVjdGlvbk10eEYsIHZpZXdwb3J0LAogICAgICAgICAgICAgICAgICAgICZwcm9qZWN0ZWQpOwoKICAgICAgLy8gcmVuZGVyIHNwcml0ZXMKICAgICAgZHJhd1Nwcml0ZShnZXRTcHJpdGVGb3JTcHJpdGVUeXBlKEhvbmtTcHJpdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcHJpdGVfZnJhbWVDeWNsZShIT05LX1NQUklURV9GUkFNRVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKnNwcml0ZSBmcmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24qLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAsIGdhbWUtPnRpY2spKSwKCiAgICAgICAgICAgICAgICAgMzIsIDMyLCAgLy8gdGV4dHVyZSBkaW1lbnNpb25zCiAgICAgICAgICAgICAgICAgcHJvamVjdGVkLngsCiAgICAgICAgICAgICAgICAgU0NSRUVOX0hUIC0gcHJvamVjdGVkLnksICAvLyBkcmF3IGF0IHBvcywgaW52ZXJ0IHkKICAgICAgICAgICAgICAgICBSRVNfU0NBTEVfWCh3aWR0aCksIFJFU19TQ0FMRV9ZKGhlaWdodCksIFRSVUUKCiAgICAgICk7CiAgICB9CiAgfQojZW5kaWYKCiAgZnJlZShpbnRlcnNlY3RpbmdPYmplY3RzKTsKICBmcmVlKHZpc2libGVPYmpEaXN0YW5jZSk7CiAgZnJlZSh3b3JsZE9iamVjdHNWaXNpYmlsaXR5KTsKCiAgVHJhY2VfYWRkRXZlbnQoRHJhd0l0ZXJUcmFjZUV2ZW50LCBwcm9mU3RhcnRJdGVyLCBDVVJfVElNRV9NUygpKTsKfQoKLyogUHJvdmlkZSBwbGF5YmFjayBhbmQgY29udHJvbCBvZiBhdWRpbyBieSB0aGUgYnV0dG9uIG9mIHRoZSBjb250cm9sbGVyICovCnZvaWQgc291bmRDaGVjayh2b2lkKSB7CiAgLyogVGhlIG9yZGVyIGluIHdoaWNoIGF1ZGlvIGlzIHBsYXllZCBjYW4gYmUgZGV0ZXJtaW5lZCB1c2luZyB0aGUgcmlnaHQgYW5kCiAgICogbGVmdCBzaWRlcyBvZiB0aGUgY3Jvc3Mga2V5LiAqLwogIGlmICgoY29udGRhdGFbMF0udHJpZ2dlciAmIExfSlBBRCkgfHwgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBSX0pQQUQpIHx8CiAgICAgIGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBVX0pQQUQgfHwgY29udGRhdGFbMF0udHJpZ2dlciAmIERfSlBBRCkgewogICAgaWYgKHNuZE51bWJlcikKICAgICAgbnVBdVN0bFNuZFBsYXllclNuZFN0b3Aoc25kSGFuZGxlLCAwKTsKCiAgICBpZiAoY29udGRhdGFbMF0udHJpZ2dlciAmIExfSlBBRCkgewogICAgICBzbmROdW1iZXItLTsKICAgICAgaWYgKHNuZE51bWJlciA8IDEpCiAgICAgICAgc25kTnVtYmVyID0gTUFYX1NPVU5EX1RZUEUgLSAxOwogICAgfSBlbHNlIGlmIChjb250ZGF0YVswXS50cmlnZ2VyICYgUl9KUEFEKSB7CiAgICAgIHNuZE51bWJlcisrOwogICAgICBpZiAoc25kTnVtYmVyID4gTUFYX1NPVU5EX1RZUEUgLSAxKQogICAgICAgIHNuZE51bWJlciA9IDE7CiAgICB9IGVsc2UgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBVX0pQQUQpIHsKICAgICAgc25kUGl0Y2ggKz0gMC41OwogICAgICBpZiAoc25kUGl0Y2ggPiAxMi4wKQogICAgICAgIHNuZFBpdGNoID0gLTEyLjA7CiAgICB9IGVsc2UgaWYgKGNvbnRkYXRhWzBdLnRyaWdnZXIgJiBEX0pQQUQpIHsKICAgICAgc25kUGl0Y2ggLT0gMC41OwogICAgICBpZiAoc25kUGl0Y2ggPCAtMTIuMCkKICAgICAgICBzbmRQaXRjaCA9IDEyLjA7CiAgICB9CgogICAgc25kSGFuZGxlID0gbnVBdVN0bFNuZFBsYXllclBsYXkoc25kTnVtYmVyIC0gMSk7CiAgICBudUF1U3RsU25kUGxheWVyU2V0U25kUGl0Y2goc25kSGFuZGxlLCBzbmRQaXRjaCk7CiAgfQp9CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwovKiAgUm9tMlJhbSAtIFJlYWRzIGRhdGEgZnJvbSBST00gaW50byBSQU0gICAgICAqLwovKiAgSU46IGZyb21fYWRkciBUaGUgc291cmNlIGFkZHJlc3Mgb2YgdGhlIGRhdGEgaW4gUk9NICAgKi8KLyogICAgdG9fYWRkciAgIFRoZSBkZXN0aW5hdGlvbiBhZGRyZXNzIG9mIHRoZSBkYXRhIGluIFJBTSAqLwovKiAgICBzZXFfc2l6ZSAgICAgICAgICBTaXplIG9mIHRoZSBkYXRhIHRvIHJlYWQgICAgICAqLwovKiAgUkVUOiAgTm90aGluZyAgICAgICAgICAgICAqLwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwp2b2lkIFJvbTJSYW0odm9pZCogZnJvbV9hZGRyLCB2b2lkKiB0b19hZGRyLCBzMzIgc2VxX3NpemUpIHsKICAvKiBDYW5ub3QgdHJhbnNmZXIgaWYgc2l6ZSBpcyBhbiBvZGQgbnVtYmVyLCBzbyBtYWtlIGl0IGFuIGV2ZW4gbnVtYmVyLiAqLwogIGlmIChzZXFfc2l6ZSAmIDB4MDAwMDAwMDEpCiAgICBzZXFfc2l6ZSsrOwoKICBudVBpUmVhZFJvbSgodTMyKWZyb21fYWRkciwgdG9fYWRkciwgc2VxX3NpemUpOwp9Cgp2b2lkIGRyYXdTcHJpdGUodW5zaWduZWQgc2hvcnQqIHNwckRhdGEsCiAgICAgICAgICAgICAgICBpbnQgc3ByV2lkdGgsCiAgICAgICAgICAgICAgICBpbnQgc3BySGVpZ2h0LAogICAgICAgICAgICAgICAgaW50IGF0WCwKICAgICAgICAgICAgICAgIGludCBhdFksCiAgICAgICAgICAgICAgICBpbnQgd2lkdGgsCiAgICAgICAgICAgICAgICBpbnQgaGVpZ2h0LAogICAgICAgICAgICAgICAgaW50IGNlbnRlcmVkKSB7CiAgaW50IHggPSBhdFggKyAoY2VudGVyZWQgPyAtKHdpZHRoIC8gMikgOiAwKTsKICBpbnQgeSA9IGF0WSArIChjZW50ZXJlZCA/IC0oaGVpZ2h0IC8gMikgOiAwKTsKCiAgZ0RQTG9hZFRleHR1cmVCbG9jayhnbGlzdHArKywgc3ByRGF0YSwgR19JTV9GTVRfUkdCQSwgR19JTV9TSVpfMTZiLCBzcHJXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgIHNwckhlaWdodCwgMCwgR19UWF9XUkFQIHwgR19UWF9OT01JUlJPUiwKICAgICAgICAgICAgICAgICAgICAgIEdfVFhfV1JBUCB8IEdfVFhfTk9NSVJST1IsIDAsIDAsIEdfVFhfTk9MT0QsIEdfVFhfTk9MT0QpOwogIGdEUFNldFRleHR1cmVQZXJzcChnbGlzdHArKywgR19UUF9OT05FKTsKICBnRFBTZXRBbHBoYUNvbXBhcmUoZ2xpc3RwKyssIEdfQUNfVEhSRVNIT0xEKTsKICBnRFBTZXRDb21iaW5lTW9kZShnbGlzdHArKywgR19DQ19NT0RVTEFURVJHQkFfUFJJTSwgR19DQ19NT0RVTEFURVJHQkFfUFJJTSk7CiAgZ0RQU2V0UmVuZGVyTW9kZShnbGlzdHArKywgR19STV9YTFVfU1VSRiwgR19STV9YTFVfU1VSRjIpOwogIC8vIFRPRE86IGNsaXAgcmVjdGFuZ2xlIGFuZCBvZmZzZXQrc2NhbGUgdGV4IGNvb3JkcyBzbyB3ZSBjYW4gcmVuZGVyIHBhcnRseQogIC8vIG9mZnNjcmVlbiB0ZXh0dXJlcwogIGdTUFNjaXNUZXh0dXJlUmVjdGFuZ2xlKAogICAgICBnbGlzdHArKywKICAgICAgKGludCkoeCkgPDwgMiwgICAgICAgICAgIC8vIHVwcGVyIGxlZnQgeCwKICAgICAgKGludCkoeSkgPDwgMiwgICAgICAgICAgIC8vIHVwcGVyIGxlZnQgeQogICAgICAoaW50KSh4ICsgd2lkdGgpIDw8IDIsICAgLy8gbG93ZXIgcmlnaHQgeCwKICAgICAgKGludCkoeSArIGhlaWdodCkgPDwgMiwgIC8vIGxvd2VyIHJpZ2h0IHksCiAgICAgIEdfVFhfUkVOREVSVElMRSwgICAgICAgICAvLyB0aWxlCiAgICAgIC8vIHVwcGVyIGxlZnQgcywgdAogICAgICAvLyB3aGVuIHVzaW5nIGdTUFRleHR1cmVSZWN0YW5nbGVGbGlwLCB0aGVzZSBhcmdzIGFyZSBmbGlwcGVkCiAgICAgIDAgPDwgNSwgMCA8PCA1LAogICAgICAvLyBjaGFuZ2UgaW4gcyx0IGZvciBlYWNoIGNoYW5nZSBpbiBzY3JlZW4gc3BhY2UgeCx5LgogICAgICAvLyBzbWFsbGVyIHZhbHVlcyA9IGxhcmdlciBzY2FsaW5nCiAgICAgIC8vIHdoZW4gdXNpbmcgZ1NQVGV4dHVyZVJlY3RhbmdsZUZsaXAsIHRoZXNlIGFyZ3MgYXJlIGZsaXBwZWQKICAgICAgKChmbG9hdClzcHJXaWR0aCAvIChmbG9hdCl3aWR0aCkgKiAoMSA8PCAxMCksCiAgICAgICgoZmxvYXQpc3BySGVpZ2h0IC8gKGZsb2F0KWhlaWdodCkgKiAoMSA8PCAxMCkpOwoKICBnRFBQaXBlU3luYyhnbGlzdHArKyk7Cn0KCnZvaWQgbXVsTXR4RlZlY0YoTXR4RiBtYXRyaXgsIGZsb2F0KiBpbiAvKls0XSovLCBmbG9hdCogb3V0IC8qWzRdKi8pIHsKICBpbnQgaTsKCiAgZm9yIChpID0gMDsgaSA8IDQ7IGkrKykgewogICAgb3V0W2ldID0gaW5bMF0gKiBtYXRyaXhbMF1baV0gKyAgLy8gIDAsIDEsIDIsIDMKICAgICAgICAgICAgIGluWzFdICogbWF0cml4WzFdW2ldICsgIC8vICA0LCA1LCA2LCA3LAogICAgICAgICAgICAgaW5bMl0gKiBtYXRyaXhbMl1baV0gKyAgLy8gIDgsIDksMTAsIDksCiAgICAgICAgICAgICBpblszXSAqIG1hdHJpeFszXVtpXTsgICAvLyAxMiwxMywxNCwxNSwKICB9Cn0KCi8vIGxpa2UgZ2x1UHJvamVjdCgpCmludCBzY3JlZW5Qcm9qZWN0KFZlYzNkKiBvYmosCiAgICAgICAgICAgICAgICAgIE10eEYgbW9kZWxNYXRyaXgsCiAgICAgICAgICAgICAgICAgIE10eEYgcHJvak1hdHJpeCwKICAgICAgICAgICAgICAgICAgVmlld3BvcnRGIHZpZXdwb3J0LAogICAgICAgICAgICAgICAgICBWZWMzZCogd2luKSB7CiAgZmxvYXQgaW5bNF07CiAgZmxvYXQgb3V0WzRdOwoKICBpblswXSA9IG9iai0+eDsKICBpblsxXSA9IG9iai0+eTsKICBpblsyXSA9IG9iai0+ejsKICBpblszXSA9IDEuMDsKICBtdWxNdHhGVmVjRihtb2RlbE1hdHJpeCwgaW4sIG91dCk7CiAgbXVsTXR4RlZlY0YocHJvak1hdHJpeCwgb3V0LCBpbik7CgogIGlmIChpblszXSA9PSAwLjApCiAgICByZXR1cm4gRkFMU0U7CiAgaW5bMF0gLz0gaW5bM107CiAgaW5bMV0gLz0gaW5bM107CiAgaW5bMl0gLz0gaW5bM107CiAgLyogTWFwIHgsIHkgYW5kIHogdG8gcmFuZ2UgMC0xICovCiAgaW5bMF0gPSBpblswXSAqIDAuNSArIDAuNTsKICBpblsxXSA9IGluWzFdICogMC41ICsgMC41OwogIGluWzJdID0gaW5bMl0gKiAwLjUgKyAwLjU7CgogIC8qIE1hcCB4LHkgdG8gdmlld3BvcnQgKi8KICBpblswXSA9IGluWzBdICogdmlld3BvcnRbMl0gKyB2aWV3cG9ydFswXTsKICBpblsxXSA9IGluWzFdICogdmlld3BvcnRbM10gKyB2aWV3cG9ydFsxXTsKCiAgd2luLT54ID0gaW5bMF07CiAgd2luLT55ID0gaW5bMV07CiAgd2luLT56ID0gaW5bMl07CiAgcmV0dXJuIFRSVUU7Cn0K",
					"AQAAAAAAAAABAAAAYk0AAAAAAABiTQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "goose64.sublime-project",
			"settings":
			{
				"buffer_size": 1686,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAgBgAAewogICJmb2xkZXJzIjogWwogICAgewogICAgICAicGF0aCI6ICIuIiwKICAgICAgImZvbGRlcl9leGNsdWRlX3BhdHRlcm5zIjogWyJpbWd1aSJdCiAgICB9CiAgXSwKICAic2V0dGluZ3MiOiB7CgogICAgIkNsYW5nRm9ybWF0IjogewogICAgICAic3R5bGUiOiAiQ2hyb21pdW0iLAogICAgICAiZm9ybWF0X29uX3NhdmUiOiB0cnVlLAogICAgfSwKIAoKICAgICJTdWJsaW1lTGludGVyLmxpbnRlcnMuY2xhbmcuYXJncyI6ICItREVENjQgLWZlcnJvci1saW1pdD0xMDAwMCAtV2FsbCAtZnN5bnRheC1vbmx5IC1mbm8tY2FyZXQtZGlhZ25vc3RpY3MgLXN0ZD1jODkgLXBlZGFudGljICAtV25vLW1pc3NpbmctYnJhY2VzIC1Xbm8tZGVwcmVjYXRlZC1kZWNsYXJhdGlvbnMgLVduby1sb25nLWxvbmcgLVduby1jb21tZW50IC1Xbm8tY29uc3RhbnQtY29udmVyc2lvbiAtRF9fTjY0X189MSAtRF9MQU5HVUFHRV9DPTEgLURfTUlQU19TWkxPTkc9NjQgLWluY2x1ZGUgdWx0cmE2NC5oIC1ERjNERVhfR0JJXzIgLWluY2x1ZGUgXCJQUi9nYmkuaFwiIiwKICAgICJTdWJsaW1lTGludGVyLmxpbnRlcnMuY2xhbmcuSSI6IFsKICAgICAgIiR7Zm9sZGVyfSIsCiAgICAgICIke2ZpbGVfcGF0aH0iLAogICAgICAiL1VzZXJzL2pmcmllbmQvLndpbmUvZHJpdmVfYy9uaW50ZW5kby9uNjRraXQvbnVzdGQvaW5jbHVkZSIsCiAgICAgICIvVXNlcnMvamZyaWVuZC8ud2luZS9kcml2ZV9jL25pbnRlbmRvL242NGtpdC9udXN5cy9pbmNsdWRlIiwKICAgICAgIi9Vc2Vycy9qZnJpZW5kLy53aW5lL2RyaXZlX2MvdWx0cmEvdXNyL2luY2x1ZGUiCiAgICBdLAogCiAgICAiU3VibGltZUxpbnRlci5saW50ZXJzLmNsYW5nKysuYXJncyI6ICAiLURFRDY0IC1mZXJyb3ItbGltaXQ9MTAwMDAgLVdhbGwgLWZzeW50YXgtb25seSAtZm5vLWNhcmV0LWRpYWdub3N0aWNzICAtV25vLW1pc3NpbmctYnJhY2VzIC1Xbm8tZGVwcmVjYXRlZC1kZWNsYXJhdGlvbnMgLVduby1sb25nLWxvbmcgLVduby1jb21tZW50IC1EX19ONjRfXz0xIC1EX0xBTkdVQUdFX0M9MSAtRF9NSVBTX1NaTE9ORz02NCAtaW5jbHVkZSB1bHRyYTY0LmggLURGM0RFWF9HQklfMiAtaW5jbHVkZSBcIlBSL2diaS5oXCIiLAogICAgIlN1YmxpbWVMaW50ZXIubGludGVycy5jbGFuZysrLkkiOiBbCiAgICAgICIke2ZvbGRlcn0iLAogICAgICAiJHtmaWxlX3BhdGh9IiwKICAgICAgIi9Vc2Vycy9qZnJpZW5kLy53aW5lL2RyaXZlX2MvbmludGVuZG8vbjY0a2l0L251c3RkL2luY2x1ZGUiLAogICAgICAiL1VzZXJzL2pmcmllbmQvLndpbmUvZHJpdmVfYy9uaW50ZW5kby9uNjRraXQvbnVzeXMvaW5jbHVkZSIsCiAgICAgICIvVXNlcnMvamZyaWVuZC8ud2luZS9kcml2ZV9jL3VsdHJhL3Vzci9pbmNsdWRlIgogICAgXQogIH0sCgogICJidWlsZF9zeXN0ZW1zIjogWwogICAgewogICAgICAibmFtZSI6ICJHTCBCdWlsZCIsCiAgICAgICJjbWQiOiBbIi4vZ2xidWlsZC5zaCJdCiAgICB9LAoKICAgIHsKICAgICAgIm5hbWUiOiAiRW11IEJ1aWxkIiwKICAgICAgImNtZCI6IFsiLi9idWlsZF9hbmRfcnVuLnNoIl0KICAgIH0KICBdCn0AAAAAAAAAAJYGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "GL Build",
	"build_system_choices":
	[
		[
			[
				[
					"Emu Build",
					""
				],
				[
					"GL Build",
					""
				],
				[
					"Packages/C++/C++ Single File.sublime-build",
					""
				],
				[
					"Packages/C++/C++ Single File.sublime-build",
					"Run"
				],
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				],
				[
					"Packages/SublimeREPL/sublimerepl_build_system_hack.sublime-build",
					""
				]
			],
			[
				"GL Build",
				""
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 271.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"error",
				"SublimeLinter: Show All Errors"
			],
			[
				"projec",
				"Project: Edit"
			],
			[
				"edit ",
				"Project: Edit"
			],
			[
				"pr",
				"Project: Edit"
			],
			[
				"ren",
				"File: Rename"
			],
			[
				"reb",
				"BracketHighlighter: Remove Brackets"
			],
			[
				"del",
				"File: Delete"
			],
			[
				"rena",
				"Rename File"
			],
			[
				"make",
				"Build With: Make"
			],
			[
				"bash",
				"Set Syntax: Bourne Again Shell (bash)"
			],
			[
				"path",
				"File: Copy Path"
			],
			[
				"de",
				"File: Delete"
			],
			[
				"makefi",
				"Set Syntax: Makefile"
			],
			[
				"move",
				"File: Move"
			],
			[
				"filename",
				"File: Copy Name"
			],
			[
				"uniq",
				"Permute Lines: Unique"
			],
			[
				"github",
				"GitHubinator"
			],
			[
				"gih",
				"GitHubinator"
			],
			[
				"clos",
				"File: Close All"
			],
			[
				"save",
				"File: Save All"
			],
			[
				"came",
				"Convert Case: camelCase"
			],
			[
				"jaas",
				"Set Syntax: JavaScript (Babel)"
			],
			[
				"babel",
				"Babel Transform"
			],
			[
				"enabl",
				"Package Control: Enable Package"
			],
			[
				"pack",
				"Package Control: List Packages"
			],
			[
				"upper",
				"Convert Case: Upper Case"
			],
			[
				"setting",
				"Preferences: Settings"
			],
			[
				"c++",
				"Set Syntax: C++"
			],
			[
				"low",
				"Convert Case: Lower Case"
			],
			[
				"prefere",
				"Preferences: Settings"
			],
			[
				"form",
				"Sublack: Format file"
			],
			[
				"packin",
				"Package Control: Install Package"
			],
			[
				"sort",
				"Sort Lines"
			],
			[
				"err",
				"SublimeLinter: Goto Error"
			],
			[
				"linter",
				"SublimeLinter: Goto Error"
			],
			[
				"jav",
				"Set Syntax: JavaScript"
			],
			[
				"jasv",
				"Set Syntax: JavaScript"
			],
			[
				"got",
				"SublimeLinter: Goto Error"
			],
			[
				"Dele",
				"File: Delete"
			],
			[
				"wrap",
				"Word Wrap: Toggle"
			],
			[
				"upp",
				"Convert Case: Upper Case"
			],
			[
				"wra",
				"Word Wrap: Toggle"
			],
			[
				"sor",
				"Sort Lines"
			],
			[
				"s",
				"Sort Lines"
			],
			[
				"uni",
				"Permute Lines: Unique"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"renam",
				"Rename File"
			],
			[
				"linterset",
				"Preferences: SublimeLinter Settings"
			],
			[
				"debug",
				"BracketHighlighter: Enable Debug Mode"
			],
			[
				"brak",
				"BracketHighlighter: Toggle Global Enable"
			],
			[
				"brakethigh",
				"BracketHighlighter: Toggle Global Enable"
			],
			[
				"match",
				"BracketHighlighter: Match Brackets (ignore threshold)"
			],
			[
				"cam",
				"Convert Case: camelCase"
			],
			[
				"scame",
				"Convert Case: camelCase"
			],
			[
				"dele",
				"File: Delete"
			],
			[
				"pyth",
				"Set Syntax: Python"
			],
			[
				"bui",
				"Build With: Emu Build"
			],
			[
				"build",
				"Build With: Emu Build"
			],
			[
				"javc",
				"Set Syntax: JavaScript"
			],
			[
				"synbash",
				"Set Syntax: Bourne Again Shell (bash)"
			],
			[
				"sync",
				"Set Syntax: C"
			],
			[
				"preferlint",
				"Preferences: SublimeLinter Settings"
			],
			[
				"pro",
				"Project: Edit"
			],
			[
				"preferelint",
				"Preferences: SublimeLinter Settings"
			],
			[
				"prefer",
				"Preferences: Settings"
			],
			[
				"Synct",
				"Set Syntax: C++"
			],
			[
				"syn++",
				"Set Syntax: C++"
			],
			[
				"goto",
				"SublimeLinter: Goto Error"
			],
			[
				"dle",
				"File: Delete"
			],
			[
				"forma",
				"Clang Format: Select Style"
			],
			[
				"clang",
				"Clang Format: Select Style"
			],
			[
				"brow",
				"Preferences: Browse Packages"
			],
			[
				"format",
				"Clang Format: Select Style"
			],
			[
				"disabl",
				"Package Control: Disable Package"
			],
			[
				"buildview",
				"Disable/Enable buildview for this window"
			],
			[
				"buildgl",
				"Build With: GL Build"
			],
			[
				"gl bu",
				"Build With: GL Build"
			],
			[
				"rean",
				"File: Rename"
			],
			[
				"sublimelint",
				"Preferences: SublimeLinter Settings"
			],
			[
				"sublimelin",
				"Preferences: SublimeLinter Settings"
			],
			[
				"syntaxc",
				"Set Syntax: C"
			],
			[
				"perma",
				"GitHubinator Permalink"
			],
			[
				"githu",
				"GitHubinator"
			],
			[
				"pac",
				"Package Control: Install Package"
			],
			[
				"pasca",
				"Convert Case: PascalCase"
			],
			[
				"cap",
				"Convert Case: PascalCase"
			],
			[
				"schem",
				"Schemr: List all schemes"
			],
			[
				"theme",
				"Themr: List themes"
			],
			[
				"scheme",
				"Schemr: List all schemes"
			],
			[
				"sche",
				"Schemr: List all schemes"
			],
			[
				"sch",
				"Schemr: List all schemes"
			],
			[
				"them",
				"Themr: List themes"
			],
			[
				"sett",
				"Preferences: Settings"
			],
			[
				"prefe",
				"Preferences: Settings"
			],
			[
				"dup",
				"File: Duplicate"
			],
			[
				"prett",
				"Preferences: JsPrettier Settings - Default"
			],
			[
				"pret",
				"Preferences: JsPrettier Settings - User"
			],
			[
				"prettier",
				"JsPrettier: Format Code"
			],
			[
				"pre",
				"Preferences: JsPrettier Settings - User"
			],
			[
				"json",
				"Set Syntax: JSON"
			],
			[
				"flow",
				"GitHub Flavored Markdown: Preview"
			],
			[
				"enable",
				"Package Control: Enable Package"
			],
			[
				"pl",
				"Package Control: List Packages"
			],
			[
				"lintthis",
				"SublimeLinter: Lint This View"
			],
			[
				"lint",
				"File: New View into File"
			],
			[
				"lintersett",
				"Preferences: SublimeLinter Settings"
			],
			[
				"linters",
				"Preferences: SublimeLinter Settings"
			],
			[
				"enablepack",
				"Package Control: Enable Package"
			],
			[
				"list linter",
				"SublimeLinter: Reload SublimeLinter and its Plugins"
			],
			[
				"sublimelintesett",
				"Preferences: SublimeLinter Settings"
			],
			[
				"sublimeLinter sett",
				"Preferences: SublimeLinter Settings"
			],
			[
				"lin",
				"SublimeLinter: Lint This View"
			],
			[
				"erro",
				"SublimeLinter: Goto Error"
			],
			[
				"go",
				"SublimeLinter: Goto Error"
			],
			[
				"unfo",
				"Code Folding: Unfold All"
			],
			[
				"unfor",
				"SublimeREPL: SBT for opened folder"
			],
			[
				"sublimlintset",
				"Preferences: SublimeLinter Settings"
			],
			[
				"pretter",
				"Preferences: JsPrettier Settings - User"
			],
			[
				"new view",
				"File: New View into File"
			],
			[
				"name",
				"File: Copy Name"
			],
			[
				"tag",
				"Tag: Remove Picked Tags in Document"
			],
			[
				"tag remove",
				"Tag: Remove Picked Tags in Document"
			],
			[
				"musta",
				"Set Syntax: HTML with mustaches"
			],
			[
				"conver",
				"Convert Case: dash-case"
			],
			[
				"reason",
				"Set Syntax: Reason"
			],
			[
				"dl",
				"File: Delete"
			],
			[
				"for",
				"Reason: Format file"
			],
			[
				"fork",
				"GitHub Flavored Markdown: Preview"
			]
		],
		"width": 496.0
	},
	"console":
	{
		"height": 340.0,
		"history":
		[
			"import urllib.request,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404' + 'e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)",
			"import urllib2,os; pf='Package Control.sublime-package'; ipp=sublime.installed_packages_path(); os.makedirs(ipp) if not os.path.exists(ipp) else None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); open(os.path.join(ipp,pf),'wb').write(urllib2.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read()); print('Please restart Sublime Text to finish installation')"
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Users/jfriend/.wine/drive_c/goose64/src"
	],
	"file_history":
	[
		"/Users/jfriend/.wine/drive_c/goose64/src/main.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/stage00.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_usb.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_usb.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_watchdog.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_fault.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_fault.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_watchdog.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/n64compat.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/sound.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/constants.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/disassemble_modern.sh",
		"/Users/jfriend/.wine/drive_c/goose64/src/segments.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/spec",
		"/Users/jfriend/.wine/drive_c/goose64/src/graphic.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/GNUmakefile",
		"/Users/jfriend/.wine/drive_c/goose64/src/common.makefile",
		"/Users/jfriend/.wine/drive_c/goose64/src/Makefile",
		"/Users/jfriend/.wine/drive_c/goose64/src/compile.bat",
		"/Users/jfriend/.wine/drive_c/goose64/src/goose64.sublime-project",
		"/Users/jfriend/.wine/drive_c/goose64/src/modern.makefile",
		"/Users/jfriend/.wine/drive_c/goose64/src/AUDIO.md",
		"/Users/jfriend/.wine/drive_c/goose64/src/build_modern.sh",
		"/Users/jfriend/.wine/drive_c/goose64/src/trace.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/deploy.sh",
		"/Users/jfriend/.wine/drive_c/goose64/src/localdefs.makefile",
		"/Users/jfriend/.wine/drive_c/goose64/src/run_mupen.sh",
		"/Users/jfriend/.wine/drive_c/goose64/src/build_cached.sh",
		"/Users/jfriend/.wine/drive_c/goose64/src/build.sh",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_os_error.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/ed64io_os_error.h",
		"/Users/jfriend/.wine/drive_c/goose64/src/glgoose.cpp",
		"/Users/jfriend/.wine/drive_c/goose64/src/models.c",
		"/Users/jfriend/.wine/drive_c/goose64/src/README.md",
		"/Users/jfriend/.wine/drive_c/goose64/src/.gitignore",
		"/Users/jfriend/.wine/drive_c/goose64/renderer.c",
		"/Users/jfriend/.wine/drive_c/goose64/goose64.sublime-project",
		"/Users/jfriend/.wine/drive_c/goose64/disassembly.txt",
		"/Users/jfriend/.wine/drive_c/goose64/sfx.h",
		"/Users/jfriend/.wine/drive_c/goose64/game.c",
		"/Users/jfriend/.wine/drive_c/goose64/constants.h",
		"/Users/jfriend/.wine/drive_c/goose64/renderer.h",
		"/Users/jfriend/.wine/drive_c/goose64/disassemble_modern.sh",
		"/Users/jfriend/.wine/drive_c/goose64/goose.out.dasm",
		"/Users/jfriend/.wine/drive_c/goose64/codesegment.o.dasm",
		"/Users/jfriend/.wine/drive_c/goose64/specminimal",
		"/Users/jfriend/.wine/drive_c/goose64/.depend",
		"/Users/jfriend/.wine/drive_c/goose64/localdefs.makefile",
		"/Users/jfriend/.wine/drive_c/goose64/stage00.c",
		"/Users/jfriend/.wine/drive_c/goose64/deploy.sh",
		"/Users/jfriend/.wine/drive_c/goose64/disassemble.sh",
		"/Users/jfriend/.wine/drive_c/goose64/Makefile",
		"/Users/jfriend/.wine/drive_c/goose64/ART.md",
		"/Users/jfriend/.wine/drive_c/goose64/mk000001.bat",
		"/Users/jfriend/.wine/drive_c/goose64/main_disasm.txt",
		"/Users/jfriend/.wine/drive_c/goose64/run_mupen.sh",
		"/Users/jfriend/.wine/drive_c/goose64/objdump.sh",
		"/Users/jfriend/.wine/drive_c/goose64/objdump.bat",
		"/Users/jfriend/.wine/drive_c/goose64/mem_heap.c",
		"/Users/jfriend/.wine/drive_c/goose64/mem_heap.h",
		"/Users/jfriend/.wine/drive_c/goose64/spec",
		"/Users/jfriend/.wine/drive_c/goose64/GNUmakefile",
		"/Users/jfriend/.wine/drive_c/goose64/compile.bat",
		"/Users/jfriend/.wine/drive_c/goose64/codesegment_disasm.txt",
		"/Users/jfriend/.wine/drive_c/goose64/sampling_profiler.c",
		"/Users/jfriend/code/m64p/build.sh",
		"/Users/jfriend/.wine/drive_c/goose64/trace.h",
		"/Users/jfriend/.wine/drive_c/goose64/trace.c",
		"/Users/jfriend/.wine/drive_c/goose64/sampling_profiler.h",
		"/Users/jfriend/.wine/drive_c/goose64/ed64io_fault.c",
		"/Users/jfriend/.wine/drive_c/goose64/codesegment_syms.txt",
		"/Users/jfriend/.wine/drive_c/goose64/build.sh",
		"/Users/jfriend/code/n64sdkmod/packages/root-compatibility-enviroment/etc/profile.d/n64-root.sh",
		"/Users/jfriend/.wine/drive_c/goose64/ed64io_usb.h",
		"/Users/jfriend/.wine/drive_c/goose64/ed64io_usb.c",
		"/Users/jfriend/.wine/drive_c/goose64/ed64io_os_error.c",
		"/Users/jfriend/.wine/drive_c/goose64/ed64io_os_error.h",
		"/Users/jfriend/.wine/drive_c/goose64/ed64io_fault.h",
		"/Users/jfriend/.wine/drive_c/moderngccdemo/libgultra_d_disasm.txt",
		"/Users/jfriend/.wine/drive_c/moderngccdemo/libgultra_disasm.txt",
		"/Users/jfriend/.wine/drive_c/goose64/graphic.c",
		"/Users/jfriend/.wine/drive_c/goose64/graphic.h",
		"/Users/jfriend/.wine/drive_c/goose64/main.c",
		"/Users/jfriend/.wine/drive_c/goose64/blender.sh",
		"/Users/jfriend/.wine/drive_c/goose64/export_animation.py",
		"/Users/jfriend/.wine/drive_c/goose64/export_character_model.py",
		"/Users/jfriend/.wine/drive_c/goose64/glgoose.cpp",
		"/Users/jfriend/.wine/drive_c/goose64/garden.blend",
		"/Users/jfriend/.wine/drive_c/goose64/garden.blend1",
		"/Users/jfriend/.wine/drive_c/goose64/glgoose",
		"/Users/jfriend/.wine/drive_c/goose64/university_bldg.h",
		"/Users/jfriend/.wine/drive_c/goose64/university_floor.h",
		"/Users/jfriend/.wine/drive_c/goose64/university_map.h",
		"/Users/jfriend/.wine/drive_c/goose64/university_map_collision.c",
		"/Users/jfriend/.wine/drive_c/goose64/university_map_collision.h",
		"/Users/jfriend/.wine/drive_c/goose64/university_map_graph.c",
		"/Users/jfriend/.wine/drive_c/goose64/university_map_graph.h",
		"/Users/jfriend/.wine/drive_c/goose64/goose64.out",
		"/Users/jfriend/.wine/drive_c/goose64/goose64glut/goose64glut.xcodeproj/project.xcworkspace/xcuserdata/jfriend.xcuserdatad/UserInterfaceState.xcuserstate",
		"/Users/jfriend/.wine/drive_c/goose64/models/Person.blend",
		"/Users/jfriend/.wine/drive_c/goose64/models/Person.blend1",
		"/Users/jfriend/.wine/drive_c/goose64/models/UniBldg.blend",
		"/Users/jfriend/.wine/drive_c/goose64/models/UniBldg.blend1",
		"/Users/jfriend/.wine/drive_c/goose64/models/UniFloor.blend",
		"/Users/jfriend/.wine/drive_c/goose64/buildcache.json",
		"/Users/jfriend/.wine/drive_c/goose64/garden_bldg.obj",
		"/Users/jfriend/.wine/drive_c/goose64/garden_floor.obj",
		"/Users/jfriend/.wine/drive_c/goose64/ground.mtl",
		"/Users/jfriend/.wine/drive_c/goose64/ground.obj",
		"/Users/jfriend/.wine/drive_c/goose64/lilypad.mtl",
		"/Users/jfriend/.wine/drive_c/goose64/lilypad.obj",
		"/Users/jfriend/.wine/drive_c/goose64/reed.mtl",
		"/Users/jfriend/.wine/drive_c/goose64/reed.obj",
		"/Users/jfriend/.wine/drive_c/goose64/rocks.mtl",
		"/Users/jfriend/.wine/drive_c/goose64/rocks.obj",
		"/Users/jfriend/.wine/drive_c/goose64/water.mtl",
		"/Users/jfriend/.wine/drive_c/goose64/water.obj",
		"/Users/jfriend/.wine/drive_c/goose64/watergrass.mtl",
		"/Users/jfriend/.wine/drive_c/goose64/watergrass.obj",
		"/Users/jfriend/.wine/drive_c/goose64/goose64glut/goose64glut.xcodeproj/project.pbxproj",
		"/Users/jfriend/.wine/drive_c/goose64/nodegraph/nodegraph.cpp",
		"/Users/jfriend/.wine/drive_c/goose64/character.c",
		"/Users/jfriend/.wine/drive_c/goose64/export_collision_mesh.py",
		"/Users/jfriend/.wine/drive_c/goose64/export_positions.py",
		"/Users/jfriend/.wine/drive_c/goose64/spatial_hash.py",
		"/Users/jfriend/.wine/drive_c/goose64/build_cached.sh",
		"/Users/jfriend/.wine/drive_c/goose64/ultratex.py"
	],
	"find":
	{
		"height": 39.0
	},
	"find_in_files":
	{
		"height": 121.0,
		"where_history":
		[
			"*.c",
			"",
			"*.c",
			"",
			"*.c",
			"*.cpp,*.hpp",
			"",
			"*.c,*.h,*.py",
			"*.c,*.h",
			"",
			"*.c,*.h",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"makeDL00",
			"ed64StartWatchdogThread",
			"WireframeRenderMode",
			"sun_light",
			"amb_light",
			"twoCycleMode",
			"drawW",
			"draw",
			"renderModeSetting",
			"dynamicp",
			"loader64",
			"ed64PrintFuncImpl",
			"retrace",
			"osSyncPrintf",
			"_PrintfImplUSBAsync",
			"_Printf",
			"__MusIntSetPitch+1bc",
			"osSyncPrintf",
			"__MusIntSetPitch+1a4",
			"ed64PrintThreads",
			"ed64PrintThreads()",
			"ed64PrintThreads",
			"clearBreakpoint",
			"breakinst",
			"breakMsg",
			"BREAK_INSTRUCTION_MASK",
			"breakinst",
			"ed64DebuggerUsbListener",
			"walkFaultedThreads",
			"ED64IO_DEBUGGER",
			"ed64PrintThreads",
			"printThreads",
			"printThr",
			"lastValToWatch",
			"ed64StartWatchdogThread",
			"ED64CODEFILES",
			"totalUpdates",
			"retrace",
			"DBGPRINT",
			"watchdogThreadPri",
			"currentThreadOriginalPri",
			"startedwatchdogproc",
			"mainThreadPri",
			"watchdog",
			"fault",
			"faultMsgQ",
			"watchdogMsgQ",
			"valToWatchNew",
			"faultThreadPri",
			"faultThreadStack",
			"faultThreadPri",
			"faultMsgQ",
			"startedwatchdogproc",
			"faultproc",
			"currentThreadOriginalPri",
			"watchdogThread",
			"watchdogThreadPri",
			"CORELIBS",
			"NUAUDIOLIB",
			"CORELIBS",
			"NUAUDIOLIB",
			"ifdef OPTIMIZE",
			"seqPlaying",
			"sndHandle",
			"SeqPl",
			"CBUTT",
			"b1n12_2",
			"Stop",
			"\")",
			"L_C",
			"nuAuStlSeqPlayerPlay",
			"nuAuStlSeq",
			"nuAuStlSeqPlayerDataSet",
			"Seq",
			"MAX_SOUND_TYPE",
			"soundCheck",
			"SOUND_TE",
			"_songSegmentRomEnd",
			"offhonks",
			"honkSoundRange",
			"soundTypeRange",
			"sndNum",
			"sndNumber",
			"maxSoundType",
			"sndNumber",
			"MAX_SOUND_TYPE",
			"MAX_SOUND_NUMBER",
			"maxSoundType",
			"MAX_SOUND_TYPE",
			" % x",
			"sndNumber",
			"0",
			"debugPrintf",
			"sndHandle",
			"sndNumber",
			"nuAuStlSndPlayerPlay",
			"sndNumber",
			"nuAuStlSndPlayerPlay",
			"nuAuStlSndPlayerSndStop",
			"nuA",
			"$(TARGETS",
			"SOUND_TEST",
			"soundCheck",
			"SOUND_TEST",
			"CONSOLE_SHOW_SOUND",
			"SOUND_TEST",
			"LOG_TR",
			"A_BUTTON",
			"twoCycleMode",
			"nuAuStlSndPlayerSetSndPitch",
			"sndPitch",
			"sndHandle",
			"nuAuStlSndPlayerPlay",
			"sndHandle",
			"soundCheck",
			"ed64PrintfSync2",
			"SFX",
			"sfx",
			"SFX",
			"SFX_START",
			"ed64PrintfSync2",
			"_modelsSegmentRomStart",
			"DEBUGSTARTUP",
			"ed64PrintfSync2",
			"DEBUGPRINT",
			" done",
			"osCreateThread",
			"traceRCP"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			"GARDEN",
			"garden",
			"GARDEN",
			"garden",
			"GARDEN",
			"garden",
			"0x0000",
			"HIGH_RESOLUTION_HALF_Y",
			"torso",
			"forearm",
			"forearm.l",
			"forearm.r",
			"forearm_r",
			"forearm_l",
			"hand_r",
			"forearm",
			"origin",
			"rotation.y",
			"rotationY"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "stage00.c",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 42519,
						"regions":
						{
						},
						"selection":
						[
							[
								72,
								72
							]
						],
						"settings":
						{
							"bracket_highlighter.busy": false,
							"bracket_highlighter.locations":
							{
								"close":
								{
								},
								"icon":
								{
								},
								"open":
								{
								},
								"unmatched":
								{
								}
							},
							"bracket_highlighter.regions":
							[
								"bh_default",
								"bh_default_center",
								"bh_default_open",
								"bh_default_close",
								"bh_default_content",
								"bh_regex",
								"bh_regex_center",
								"bh_regex_open",
								"bh_regex_close",
								"bh_regex_content",
								"bh_double_quote",
								"bh_double_quote_center",
								"bh_double_quote_open",
								"bh_double_quote_close",
								"bh_double_quote_content",
								"bh_square",
								"bh_square_center",
								"bh_square_open",
								"bh_square_close",
								"bh_square_content",
								"bh_angle",
								"bh_angle_center",
								"bh_angle_open",
								"bh_angle_close",
								"bh_angle_content",
								"bh_curly",
								"bh_curly_center",
								"bh_curly_open",
								"bh_curly_close",
								"bh_curly_content",
								"bh_unmatched",
								"bh_unmatched_center",
								"bh_unmatched_open",
								"bh_unmatched_close",
								"bh_unmatched_content",
								"bh_c_define",
								"bh_c_define_center",
								"bh_c_define_open",
								"bh_c_define_close",
								"bh_c_define_content",
								"bh_round",
								"bh_round_center",
								"bh_round_open",
								"bh_round_close",
								"bh_round_content",
								"bh_tag",
								"bh_tag_center",
								"bh_tag_open",
								"bh_tag_close",
								"bh_tag_content",
								"bh_single_quote",
								"bh_single_quote_center",
								"bh_single_quote_open",
								"bh_single_quote_close",
								"bh_single_quote_content"
							],
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "goose64.sublime-project",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1686,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"bracket_highlighter.busy": false,
							"bracket_highlighter.locations":
							{
								"close":
								{
									"1":
									[
										1685,
										1686
									]
								},
								"icon":
								{
									"1":
									[
										"Packages/BracketHighlighter/icons/curly_bracket.png",
										"region.purplish"
									]
								},
								"open":
								{
									"1":
									[
										0,
										1
									]
								},
								"unmatched":
								{
								}
							},
							"bracket_highlighter.regions":
							[
								"bh_default",
								"bh_default_center",
								"bh_default_open",
								"bh_default_close",
								"bh_default_content",
								"bh_regex",
								"bh_regex_center",
								"bh_regex_open",
								"bh_regex_close",
								"bh_regex_content",
								"bh_double_quote",
								"bh_double_quote_center",
								"bh_double_quote_open",
								"bh_double_quote_close",
								"bh_double_quote_content",
								"bh_square",
								"bh_square_center",
								"bh_square_open",
								"bh_square_close",
								"bh_square_content",
								"bh_angle",
								"bh_angle_center",
								"bh_angle_open",
								"bh_angle_close",
								"bh_angle_content",
								"bh_curly",
								"bh_curly_center",
								"bh_curly_open",
								"bh_curly_close",
								"bh_curly_content",
								"bh_unmatched",
								"bh_unmatched_center",
								"bh_unmatched_open",
								"bh_unmatched_close",
								"bh_unmatched_content",
								"bh_c_define",
								"bh_c_define_center",
								"bh_c_define_open",
								"bh_c_define_close",
								"bh_c_define_content",
								"bh_round",
								"bh_round_center",
								"bh_round_open",
								"bh_round_close",
								"bh_round_content",
								"bh_tag",
								"bh_tag_center",
								"bh_tag_open",
								"bh_tag_close",
								"bh_tag_content",
								"bh_single_quote",
								"bh_single_quote_center",
								"bh_single_quote_open",
								"bh_single_quote_close",
								"bh_single_quote_content"
							],
							"syntax": "Packages/PackageDev/Package/Sublime Text Project/Sublime Text Project.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 30.0
	},
	"input":
	{
		"height": 44.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.SublimeLinter":
	{
		"height": 517.0
	},
	"output.SublimeLinter Messages":
	{
		"height": 407.0
	},
	"output.aaa_package_dev":
	{
		"height": 116.0
	},
	"output.exec":
	{
		"height": 382.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.mdpopups":
	{
		"height": 0.0
	},
	"output.package_dev":
	{
		"height": 116.0
	},
	"output.unsaved_changes":
	{
		"height": 138.0
	},
	"pinned_build_system": "",
	"project": "goose64.sublime-project",
	"replace":
	{
		"height": 56.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"stage",
				"stage00.c"
			],
			[
				"main",
				"main.c"
			],
			[
				"dis",
				"disassemble_modern.sh"
			],
			[
				"const",
				"constants.h"
			],
			[
				"n64compat",
				"n64compat.h"
			],
			[
				"comp",
				"compile.bat"
			],
			[
				"make",
				"Makefile"
			],
			[
				"depl",
				"deploy.sh"
			],
			[
				"sta",
				"stage00.c"
			],
			[
				"ed64io",
				"ed64io.h"
			],
			[
				"stag",
				"stage00.c"
			],
			[
				"read",
				"README.md"
			],
			[
				"watchdo",
				"ed64io_watchdog.c"
			],
			[
				"watch",
				"watchdog.c"
			],
			[
				"ed6us",
				"ed64io_usb.h"
			],
			[
				"ed64usb",
				"ed64io_usb.c"
			],
			[
				"wat",
				"watchdog.c"
			],
			[
				"edfau",
				"ed64io_fault.c"
			],
			[
				"fual",
				"ed64io_fault.h"
			],
			[
				"faul",
				"ed64io_fault.c"
			],
			[
				"spec",
				"spec"
			],
			[
				"comm",
				"common.makefile"
			],
			[
				"sound",
				"sound.h"
			],
			[
				"sf",
				"sfx.h"
			],
			[
				"a",
				"AUDIO.md"
			],
			[
				"aud",
				"AUDIO.md"
			],
			[
				"buich",
				"build_cached.sh"
			],
			[
				"buildcach",
				"build_cached.sh"
			],
			[
				"mae",
				"Makefile"
			],
			[
				"build",
				"build.sh"
			],
			[
				"spe",
				"spec"
			],
			[
				".md",
				"AUDIO.md"
			],
			[
				"giti",
				".gitignore"
			],
			[
				"dasm",
				"goose.out.dasm"
			],
			[
				"",
				"common.makefile"
			],
			[
				"go",
				"goose.out.dasm"
			],
			[
				"gn",
				"GNUmakefile"
			],
			[
				"modern",
				"modern.makefile"
			],
			[
				"gnu",
				"GNUmakefile"
			],
			[
				"commo",
				"common.makefile"
			],
			[
				"goose.outd",
				"goose.out.dasm"
			],
			[
				"disass",
				"disassemble_modern.sh"
			],
			[
				"ed64fa",
				"ed64io_fault.c"
			],
			[
				"buildmo",
				"build_modern.sh"
			],
			[
				"buildcac",
				"build_cached.sh"
			],
			[
				"mainc",
				"main.c"
			],
			[
				"buildca",
				"build_cached.sh"
			],
			[
				"buch",
				"build_cached.sh"
			],
			[
				"render",
				"renderer.h"
			],
			[
				"gnuma",
				"GNUmakefile"
			],
			[
				"moden",
				"disassemble_modern.sh"
			],
			[
				"disa",
				"disassemble_modern.sh"
			],
			[
				"cons",
				"constants.h"
			],
			[
				"depen",
				".depend"
			],
			[
				"depe",
				".depend"
			],
			[
				"consta",
				"constants.h"
			],
			[
				"buidmo",
				"build_modern.sh"
			],
			[
				"rende",
				"renderer.c"
			],
			[
				"gamec",
				"game.c"
			],
			[
				"constants.h",
				"constants.h"
			],
			[
				"ream",
				"README.md"
			],
			[
				"buimod",
				"build_modern.sh"
			],
			[
				"mak",
				"common.makefile"
			],
			[
				"lo",
				"localdefs"
			],
			[
				"gl",
				"glgoose.cpp"
			],
			[
				"art",
				"ART.md"
			],
			[
				"rea",
				"README.md"
			],
			[
				"ma",
				"Makefile"
			],
			[
				"runm",
				"run_mupen.sh"
			],
			[
				"maek",
				"Makefile"
			],
			[
				"edos",
				"ed64io_os_error.h"
			],
			[
				"bui",
				"build.sh"
			],
			[
				"buca",
				"build_cached.sh"
			],
			[
				"build_ca",
				"build_cached.sh"
			],
			[
				"GN",
				"GNUmakefile"
			],
			[
				"compile.bat",
				"compile.bat"
			],
			[
				"codes",
				"codesegment_disasm.txt"
			],
			[
				"objdump.bat",
				"objdump.bat"
			],
			[
				"co",
				"codesegment_disasm.txt"
			],
			[
				"obj",
				"objdump.sh"
			],
			[
				"disas",
				"disassembly.txt"
			],
			[
				"mode",
				"models.c"
			],
			[
				"buil",
				"build.sh"
			],
			[
				"run",
				"run_mupen.sh"
			],
			[
				"makef",
				"Makefile"
			],
			[
				"sp",
				"spec"
			],
			[
				"mem",
				"mem_heap.h"
			],
			[
				"maindis",
				"main_disasm.txt"
			],
			[
				"edfaul",
				"ed64io_fault.c"
			],
			[
				"trace",
				"trace.h"
			],
			[
				"profi",
				"profiler.c"
			],
			[
				"usb",
				"ed64io_usb.h"
			],
			[
				"edusb",
				"ed64io_usb.c"
			],
			[
				"edus",
				"ed64io_usb.c"
			],
			[
				"graph",
				"graphic.c"
			],
			[
				"blen",
				"blender.sh"
			],
			[
				"expoan",
				"export_animation.py"
			],
			[
				"expocha",
				"export_character_model.py"
			],
			[
				"ren",
				"renderer.h"
			],
			[
				"buid",
				"build.sh"
			],
			[
				"ed64fau",
				"ed64io_fault.h"
			],
			[
				"build mo",
				"build_modern.sh"
			],
			[
				"buildmod",
				"build_modern.sh"
			],
			[
				"frus",
				"frustum.c"
			],
			[
				"ultra",
				"ultratex.py"
			],
			[
				"stage00",
				"stage00.c"
			],
			[
				"stag0",
				"stage00.c"
			],
			[
				"eve",
				"ed64io_everdrive.h"
			],
			[
				"everdh",
				"ed64io_everdrive.h"
			],
			[
				"rendere",
				"renderer.c"
			],
			[
				"trach",
				"trace.h"
			],
			[
				"grap",
				"graphic.c"
			],
			[
				"renh",
				"renderer.h"
			],
			[
				"readme",
				"README.md"
			],
			[
				"bush",
				"bush.h"
			],
			[
				"univeco",
				"university_map_collision.c"
			],
			[
				"coll",
				"collision.c"
			],
			[
				"glc",
				"glgoose.cpp"
			],
			[
				"git",
				".gitignore"
			],
			[
				"grpah",
				"graphic.c"
			],
			[
				"soun",
				"sound.h"
			],
			[
				"mainh",
				"main.h"
			],
			[
				"get",
				"get_changed_files.py"
			],
			[
				"honktest",
				"honktest1spr.h"
			],
			[
				"test",
				"testspr.h"
			],
			[
				"wave",
				"wavefront64/wavefront64.lua"
			],
			[
				"honk3",
				"honk3spr.h"
			],
			[
				"honk2",
				"honk2spr.h"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/code/posts/posts.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 34.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"Renderer_calcIntersecting",
				"Renderer_calcIntersecting"
			],
			[
				"Time",
				"CUR_TIME_MS"
			],
			[
				"ed64StartWatchdogThread",
				"ed64StartWatchdogThread"
			],
			[
				"ed64PrintFuncImpl",
				"ed64PrintFuncImpl"
			],
			[
				"Soundty",
				"SoundType"
			],
			[
				"rand",
				"RAND"
			],
			[
				"RAND",
				"RAND"
			],
			[
				"SONG",
				"SONG_END"
			],
			[
				"gfxInit",
				"gfxInit"
			],
			[
				"debug",
				"DEBUGPRINT"
			],
			[
				"Trace_addEvent",
				"Trace_addEvent"
			],
			[
				"tracead",
				"Trace_addEvent"
			],
			[
				"trace",
				"Trace_start"
			],
			[
				"initStage00",
				"initStage00"
			],
			[
				"game",
				"Game_init"
			],
			[
				"ed64RegisterOSErrorHandler",
				"ed64RegisterOSErrorHandler"
			],
			[
				"ed64PrintStackTrace",
				"ed64PrintStackTrace"
			],
			[
				"EXTERN_SEGMENT_WITH_BSS",
				"EXTERN_SEGMENT_WITH_BSS"
			],
			[
				"PerfLogger_logChunk",
				"PerfLogger_logChunk"
			],
			[
				"SamplingProfiler_startThread",
				"SamplingProfiler_startThread"
			],
			[
				"Trace_clear",
				"Trace_clear"
			],
			[
				"regDesc_t",
				"regDesc_t"
			],
			[
				"inva",
				"invariant"
			],
			[
				"ED64IO_FAULT_STACKSIZE",
				"ED64IO_FAULT_STACKSIZE"
			],
			[
				"SCREEN_HT",
				"SCREEN_HT"
			],
			[
				"assert",
				"ed64Assert"
			],
			[
				"invar",
				"invariant"
			],
			[
				"characini",
				"Character_init"
			],
			[
				"char",
				"Character"
			],
			[
				"upda",
				"updateGame00"
			],
			[
				"Renderer_sortVisibleObjects",
				"Renderer_sortVisibleObjects"
			],
			[
				"Renderer_isCloser",
				"Renderer_isCloserBySeparatingPlane"
			],
			[
				"Renderer_getSeparatingPlane",
				"Renderer_getSeparatingPlane"
			],
			[
				"update",
				"updateGame00"
			],
			[
				"Plane_distance",
				"Plane_distance"
			],
			[
				"render",
				"Renderer_cullVisibility"
			],
			[
				"rendere",
				"Renderer_cullVisibility"
			],
			[
				"ed64",
				"ed64PrintfSync2"
			],
			[
				"ed64SendFaultMessage",
				"ed64SendFaultMessage"
			],
			[
				"Renderer_isBackgroundGameObject",
				"Renderer_isBackgroundGameObject"
			],
			[
				"gfxClearCfb",
				"gfxClearCfb"
			],
			[
				"invariant",
				"invariant"
			],
			[
				"isback",
				"Renderer_isBackgroundGameObject"
			],
			[
				"Renderer_isZBufferedGameObject",
				"Renderer_isZBufferedGameObject"
			],
			[
				"renderer",
				"Renderer_cullVisibility"
			],
			[
				"RendererSortDistance",
				"RendererSortDistance"
			],
			[
				"Vec3d_directionTo",
				"Vec3d_directionTo"
			],
			[
				"MEM_HEAP_SIZE",
				"MEM_HEAP_SIZE"
			],
			[
				"gameob",
				"GameObject"
			],
			[
				"zbu",
				"Renderer_isZBufferedGameObject"
			],
			[
				"aabb",
				"AABB_fromSphere"
			],
			[
				"AABB",
				"AABB"
			],
			[
				"getModelDisplayList",
				"getModelDisplayList"
			],
			[
				"G_RM_AA_ZUPD_OPA_SURF",
				"G_RM_AA_ZUPD_OPA_SURF"
			],
			[
				"updateGame00",
				"updateGame00"
			],
			[
				"main",
				"main"
			],
			[
				"MIN",
				"MIN"
			],
			[
				"camera",
				"Game_updateCamera"
			],
			[
				"Rand",
				"RAND"
			],
			[
				"Game_getObjCenter",
				"Game_getObjCenter"
			],
			[
				"padBinaryLeft",
				"padBinaryLeft"
			],
			[
				"draww",
				"drawWorldObjects"
			],
			[
				"drawW",
				"drawWorldObjects"
			],
			[
				"Sprite_frameCycle",
				"Sprite_frameCycle"
			],
			[
				"fram",
				"Sprite_frameCycle"
			],
			[
				"Matr",
				"Matrix4"
			],
			[
				"Matrix",
				"Matrix4"
			],
			[
				"player",
				"Player_move"
			],
			[
				"E",
				"Euler"
			],
			[
				"animSta",
				"AnimationState"
			],
			[
				"Dynamic",
				"Dynamic"
			],
			[
				"gameo",
				"GameObject"
			],
			[
				"Gameob",
				"GameObject_init"
			],
			[
				"Renderer_cullVisibility",
				"Renderer_cullVisibility"
			],
			[
				"updagame",
				"updateGame00"
			],
			[
				"stage0",
				"stage00"
			],
			[
				"makeDL00",
				"makeDL00"
			],
			[
				"Game_update",
				"Game_update"
			],
			[
				"chracini",
				"Character_init"
			],
			[
				"getmo",
				"getMeshForModelType"
			],
			[
				"logtr",
				"logTraceChunk"
			],
			[
				"renderso",
				"Renderer_sortVisibleObjects"
			],
			[
				"loadBMP_custom",
				"loadBMP_custom"
			],
			[
				"update00",
				"updateGame00"
			],
			[
				"make",
				"makeDL00"
			],
			[
				"rendererc",
				"Renderer_cullVisibility"
			],
			[
				"ma",
				"makeDL00"
			],
			[
				"maked",
				"makeDL00"
			],
			[
				"HIGH_RESOLUTION",
				"HIGH_RESOLUTION"
			],
			[
				"makedl",
				"makeDL00"
			],
			[
				"getCen",
				"GetCenter"
			],
			[
				"model",
				"ModelProperties"
			],
			[
				"physb",
				"PhysBody"
			],
			[
				"ImGuiInputTextFlags",
				"ImGuiInputTextFlags_"
			],
			[
				"inputFlo",
				"InputFloat"
			],
			[
				"phys",
				"PhysBody"
			],
			[
				"Gameo",
				"GameObject"
			],
			[
				"InputF",
				"InputFloat3"
			],
			[
				"ImGuiInputTextFlags_",
				"ImGuiInputTextFlags_"
			],
			[
				"InputFloat3",
				"InputFloat3"
			],
			[
				"inputflo",
				"InputFloat3"
			],
			[
				"inputfl",
				"InputFloat"
			],
			[
				"InputFloat",
				"InputFloat"
			],
			[
				"GameObj",
				"GameObject"
			],
			[
				"EulerDe",
				"EulerDegrees"
			],
			[
				"FLT_EPSILON",
				"FLT_EPSILON"
			],
			[
				"rayinter",
				"Game_rayIntersectsSphere"
			],
			[
				"gameray",
				"Game_rayIntersectsSphere"
			],
			[
				"Vec3d",
				"VEC3D_H"
			],
			[
				"vec3d",
				"Vec3d"
			],
			[
				"Game_getIntersectingObject",
				"Game_getIntersectingObject"
			],
			[
				"RaycastTraceEvent",
				"RaycastTraceEvent"
			],
			[
				"Game_traceRaycast",
				"Game_traceRaycast"
			],
			[
				"Game_rayIntersectsSphere",
				"Game_rayIntersectsSphere"
			],
			[
				"vec3ddir",
				"Vec3d_directionTo"
			],
			[
				"Vec3d_init",
				"Vec3d_init"
			],
			[
				"cahraccanse",
				"Character_canSeeItem"
			],
			[
				"intersec",
				"Game_rayIntersectsSphere"
			],
			[
				"ImGui_ImplGLUT_InstallFuncs",
				"ImGui_ImplGLUT_InstallFuncs"
			],
			[
				"AnimatioFra",
				"AnimationFrame_lerp"
			],
			[
				"AnimationFrame_lerp",
				"AnimationFrame_lerp"
			],
			[
				"characmove",
				"Character_moveTowards"
			],
			[
				"Character_moveTowards",
				"Character_moveTowards"
			],
			[
				"charac",
				"Character"
			],
			[
				"gameupdate",
				"Game_update"
			],
			[
				"AnimationState_init",
				"AnimationState_init"
			],
			[
				"MAX_ANIM_MESH_PARTS",
				"MAX_ANIM_MESH_PARTS"
			],
			[
				"Anim",
				"AnimationFrame"
			]
		],
		"width": 600.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": false,
	"show_open_files": true,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 342.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
